(function(e,t){function n(e,n,i){if(i===t&&1===e.nodeType){var r="data-"+n.replace(H,"-$1").toLowerCase();if(i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:L.isNaN(i)?z.test(i)?L.parseJSON(i):i:parseFloat(i)}catch(s){}L.data(e,n,i)}else i=t}return i}function i(e){for(var t in e)if("toJSON"!==t)return!1;return!0}function r(e,n,i){var r=n+"defer",s=n+"queue",a=n+"mark",o=L.data(e,r,t,!0);!o||"queue"!==i&&L.data(e,s,t,!0)||"mark"!==i&&L.data(e,a,t,!0)||setTimeout(function(){L.data(e,s,t,!0)||L.data(e,a,t,!0)||(L.removeData(e,r,!0),o.resolve())},0)}function s(){return!1}function a(){return!0}function o(e,n,i){var r=L.extend({},i[0]);r.type=e,r.originalEvent={},r.liveFired=t,L.event.handle.call(n,r),r.isDefaultPrevented()&&i[0].preventDefault()}function l(e){var t,n,i,r,s,a,o,l,c,u,h,p,d=[],f=[],m=L._data(this,"events");if(e.liveFired!==this&&m&&m.live&&!e.target.disabled&&(!e.button||"click"!==e.type)){e.namespace&&(h=RegExp("(^|\\.)"+e.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),e.liveFired=this;var g=m.live.slice(0);for(o=0;g.length>o;o++)s=g[o],s.origType.replace(G,"")===e.type?f.push(s.selector):g.splice(o--,1);for(r=L(e.target).closest(f,e.currentTarget),l=0,c=r.length;c>l;l++)for(u=r[l],o=0;g.length>o;o++)s=g[o],u.selector!==s.selector||h&&!h.test(s.namespace)||u.elem.disabled||(a=u.elem,i=null,("mouseenter"===s.preType||"mouseleave"===s.preType)&&(e.type=s.preType,i=L(e.relatedTarget).closest(s.selector)[0],i&&L.contains(a,i)&&(i=a)),i&&i===a||d.push({elem:a,handleObj:s,level:u.level}));for(l=0,c=d.length;c>l&&(r=d[l],!(n&&r.level>n))&&(e.currentTarget=r.elem,e.data=r.handleObj.data,e.handleObj=r.handleObj,p=r.handleObj.origHandler.apply(r.elem,arguments),p!==!1&&!e.isPropagationStopped()||(n=r.level,p===!1&&(t=!1),!e.isImmediatePropagationStopped()));l++);return t}}function c(e,t){return(e&&"*"!==e?e+".":"")+t.replace(Z,"`").replace(Q,"&")}function u(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function h(e,t,n){if(t=t||0,L.isFunction(t))return L.grep(e,function(e,i){var r=!!t.call(e,i,e);return r===n});if(t.nodeType)return L.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=L.grep(e,function(e){return 1===e.nodeType});if(ht.test(t))return L.filter(t,i,!n);t=L.filter(t,i)}return L.grep(e,function(e){return L.inArray(e,t)>=0===n})}function p(e){return L.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e,t){if(1===t.nodeType&&L.hasData(e)){var n=L.expando,i=L.data(e),r=L.data(t,i);if(i=i[n]){var s=i.events;if(r=r[n]=L.extend({},i),s){delete r.handle,r.events={};for(var a in s)for(var o=0,l=s[a].length;l>o;o++)L.event.add(t,a+(s[a][o].namespace?".":"")+s[a][o].namespace,s[a][o],s[a][o].data)}}}}function f(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?t.outerHTML=e.outerHTML:"input"!==n||"checkbox"!==e.type&&"radio"!==e.type?"option"===n?t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(L.expando))}function m(e){return"getElementsByTagName"in e?e.getElementsByTagName("*"):"querySelectorAll"in e?e.querySelectorAll("*"):[]}function g(e){("checkbox"===e.type||"radio"===e.type)&&(e.defaultChecked=e.checked)}function v(e){L.nodeName(e,"input")?g(e):"getElementsByTagName"in e&&L.grep(e.getElementsByTagName("input"),g)}function b(e,t){t.src?L.ajax({url:t.src,async:!1,dataType:"script"}):L.globalEval((t.text||t.textContent||t.innerHTML||"").replace(kt,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function y(e,t,n){var i="width"===t?e.offsetWidth:e.offsetHeight,r="width"===t?Lt:Ft;return i>0?("border"!==n&&L.each(r,function(){n||(i-=parseFloat(L.css(e,"padding"+this))||0),"margin"===n?i+=parseFloat(L.css(e,n+this))||0:i-=parseFloat(L.css(e,"border"+this+"Width"))||0}),i+"px"):(i=St(e,t,t),(0>i||null==i)&&(i=e.style[t]||0),i=parseFloat(i)||0,n&&L.each(r,function(){i+=parseFloat(L.css(e,"padding"+this))||0,"padding"!==n&&(i+=parseFloat(L.css(e,"border"+this+"Width"))||0),"margin"===n&&(i+=parseFloat(L.css(e,n+this))||0)}),i+"px")}function x(e){return function(t,n){if("string"!=typeof t&&(n=t,t="*"),L.isFunction(n))for(var i,r,s,a=t.toLowerCase().split(Zt),o=0,l=a.length;l>o;o++)i=a[o],s=/^\+/.test(i),s&&(i=i.substr(1)||"*"),r=e[i]=e[i]||[],r[s?"unshift":"push"](n)}}function _(e,n,i,r,s,a){s=s||n.dataTypes[0],a=a||{},a[s]=!0;for(var o,l=e[s],c=0,u=l?l.length:0,h=e===nn;u>c&&(h||!o);c++)o=l[c](n,i,r),"string"==typeof o&&(!h||a[o]?o=t:(n.dataTypes.unshift(o),o=_(e,n,i,r,o,a)));return!h&&o||a["*"]||(o=_(e,n,i,r,"*",a)),o}function w(e,n){var i,r,s=L.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);r&&L.extend(!0,e,r)}function T(e,t,n,i){if(L.isArray(t))L.each(t,function(t,r){n||Ut.test(e)?i(e,r):T(e+"["+("object"==typeof r||L.isArray(r)?t:"")+"]",r,n,i)});else if(n||null==t||"object"!=typeof t)i(e,t);else for(var r in t)T(e+"["+r+"]",t[r],n,i)}function k(e,n,i){var r,s,a,o,l=e.contents,c=e.dataTypes,u=e.responseFields;for(s in u)s in i&&(n[u[s]]=i[s]);for(;"*"===c[0];)c.shift(),r===t&&(r=e.mimeType||n.getResponseHeader("content-type"));if(r)for(s in l)if(l[s]&&l[s].test(r)){c.unshift(s);break}if(c[0]in i)a=c[0];else{for(s in i){if(!c[0]||e.converters[s+" "+c[0]]){a=s;break}o||(o=s)}a=a||o}return a?(a!==c[0]&&c.unshift(a),i[a]):t}function C(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var i,r,s,a,o,l,c,u,h=e.dataTypes,p={},d=h.length,f=h[0];for(i=1;d>i;i++){if(1===i)for(r in e.converters)"string"==typeof r&&(p[r.toLowerCase()]=e.converters[r]);if(a=f,f=h[i],"*"===f)f=a;else if("*"!==a&&a!==f){if(o=a+" "+f,l=p[o]||p["* "+f],!l){u=t;for(c in p)if(s=c.split(" "),(s[0]===a||"*"===s[0])&&(u=p[s[1]+" "+f])){c=p[c],c===!0?l=u:u===!0&&(l=c);break}}l||u||L.error("No conversion from "+o.replace(" "," to ")),l!==!0&&(n=l?l(n):u(c(n)))}}return n}function S(){try{return new e.XMLHttpRequest}catch(t){}}function E(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function A(){return setTimeout(N,0),mn=L.now()}function N(){mn=t}function M(e,t){var n={};return L.each(yn.concat.apply([],yn.slice(0,t)),function(){n[this]=e}),n}function D(e){if(!gn[e]){var t=I.body,n=L("<"+e+">").appendTo(t),i=n.css("display");n.remove(),("none"===i||""===i)&&(pn||(pn=I.createElement("iframe"),pn.frameBorder=pn.width=pn.height=0),t.appendChild(pn),dn&&pn.createElement||(dn=(pn.contentWindow||pn.contentDocument).document,dn.write(("CSS1Compat"===I.compatMode?"<!doctype html>":"")+"<html><body>"),dn.close()),n=dn.createElement(e),dn.body.appendChild(n),i=L.css(n,"display"),t.removeChild(pn)),gn[e]=i}return gn[e]}function $(e){return L.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var I=e.document,P=e.navigator,O=e.location,L=function(){function n(){if(!o.isReady){try{I.documentElement.doScroll("left")}catch(e){return setTimeout(n,1),t}o.ready()}}var i,r,s,a,o=function(e,t){return new o.fn.init(e,t,i)},l=e.jQuery,c=e.$,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,h=/\S/,p=/^\s+/,d=/\s+$/,f=/\d/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,g=/^[\],:{}\s]*$/,v=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,b=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,x=/(webkit)[ \/]([\w.]+)/,_=/(opera)(?:.*version)?[ \/]([\w.]+)/,w=/(msie) ([\w.]+)/,T=/(mozilla)(?:.*? rv:([\w.]+))?/,k=/-([a-z]|[0-9])/gi,C=/^-ms-/,S=function(e,t){return(t+"").toUpperCase()},E=P.userAgent,A=Object.prototype.toString,N=Object.prototype.hasOwnProperty,M=Array.prototype.push,D=Array.prototype.slice,$=String.prototype.trim,O=Array.prototype.indexOf,L={};return o.fn=o.prototype={constructor:o,init:function(e,n,i){var r,s,a,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!n&&I.body)return this.context=I,this[0]=I.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:u.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1])return n=n instanceof o?n[0]:n,l=n?n.ownerDocument||n:I,a=m.exec(e),a?o.isPlainObject(n)?(e=[I.createElement(a[1])],o.fn.attr.call(e,n,!0)):e=[l.createElement(a[1])]:(a=o.buildFragment([r[1]],[l]),e=(a.cacheable?o.clone(a.fragment):a.fragment).childNodes),o.merge(this,e);if(s=I.getElementById(r[2]),s&&s.parentNode){if(s.id!==r[2])return i.find(e);this.length=1,this[0]=s}return this.context=I,this.selector=e,this}return o.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),o.makeArray(e,this))},selector:"",jquery:"1.6.4",length:0,size:function(){return this.length},toArray:function(){return D.call(this,0)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=this.constructor();return o.isArray(e)?M.apply(i,e):o.merge(i,e),i.prevObject=this,i.context=this.context,"find"===t?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return o.each(this,e,t)},ready:function(e){return o.bindReady(),s.done(e),this},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(D.apply(this,arguments),"slice",D.call(arguments).join(","))},map:function(e){return this.pushStack(o.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:M,sort:[].sort,splice:[].splice},o.fn.init.prototype=o.fn,o.extend=o.fn.extend=function(){var e,n,i,r,s,a,l=arguments[0]||{},c=1,u=arguments.length,h=!1;for("boolean"==typeof l&&(h=l,l=arguments[1]||{},c=2),"object"==typeof l||o.isFunction(l)||(l={}),u===c&&(l=this,--c);u>c;c++)if(null!=(e=arguments[c]))for(n in e)i=l[n],r=e[n],l!==r&&(h&&r&&(o.isPlainObject(r)||(s=o.isArray(r)))?(s?(s=!1,a=i&&o.isArray(i)?i:[]):a=i&&o.isPlainObject(i)?i:{},l[n]=o.extend(h,a,r)):r!==t&&(l[n]=r));return l},o.extend({noConflict:function(t){return e.$===o&&(e.$=c),t&&e.jQuery===o&&(e.jQuery=l),o},isReady:!1,readyWait:1,holdReady:function(e){e?o.readyWait++:o.ready(!0)},ready:function(e){if(e===!0&&!--o.readyWait||e!==!0&&!o.isReady){if(!I.body)return setTimeout(o.ready,1);if(o.isReady=!0,e!==!0&&--o.readyWait>0)return;s.resolveWith(I,[o]),o.fn.trigger&&o(I).trigger("ready").unbind("ready")}},bindReady:function(){if(!s){if(s=o._Deferred(),"complete"===I.readyState)return setTimeout(o.ready,1);if(I.addEventListener)I.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",o.ready,!1);else if(I.attachEvent){I.attachEvent("onreadystatechange",a),e.attachEvent("onload",o.ready);var t=!1;try{t=null==e.frameElement}catch(i){}I.documentElement.doScroll&&t&&n()}}},isFunction:function(e){return"function"===o.type(e)},isArray:Array.isArray||function(e){return"array"===o.type(e)},isWindow:function(e){return e&&"object"==typeof e&&"setInterval"in e},isNaN:function(e){return null==e||!f.test(e)||isNaN(e)},type:function(e){return null==e?e+"":L[A.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==o.type(e)||e.nodeType||o.isWindow(e))return!1;try{if(e.constructor&&!N.call(e,"constructor")&&!N.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||N.call(e,i)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw e},parseJSON:function(n){return"string"==typeof n&&n?(n=o.trim(n),e.JSON&&e.JSON.parse?e.JSON.parse(n):g.test(n.replace(v,"@").replace(b,"]").replace(y,""))?Function("return "+n)():(o.error("Invalid JSON: "+n),t)):null},parseXML:function(n){var i,r;try{e.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(s){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||o.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&h.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,S)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,i){var r,s=0,a=e.length,l=a===t||o.isFunction(e);if(i)if(l){for(r in e)if(n.apply(e[r],i)===!1)break}else for(;a>s&&n.apply(e[s++],i)!==!1;);else if(l){for(r in e)if(n.call(e[r],r,e[r])===!1)break}else for(;a>s&&n.call(e[s],s,e[s++])!==!1;);return e},trim:$?function(e){return null==e?"":$.call(e)}:function(e){return null==e?"":(""+e).replace(p,"").replace(d,"")},makeArray:function(e,t){var n=t||[];if(null!=e){var i=o.type(e);null==e.length||"string"===i||"function"===i||"regexp"===i||o.isWindow(e)?M.call(n,e):o.merge(n,e)}return n},inArray:function(e,t){if(!t)return-1;if(O)return O.call(t,e);for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},merge:function(e,n){var i=e.length,r=0;if("number"==typeof n.length)for(var s=n.length;s>r;r++)e[i++]=n[r];else for(;n[r]!==t;)e[i++]=n[r++];return e.length=i,e},grep:function(e,t,n){var i,r=[];n=!!n;for(var s=0,a=e.length;a>s;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,i){var r,s,a=[],l=0,c=e.length,u=e instanceof o||c!==t&&"number"==typeof c&&(c>0&&e[0]&&e[c-1]||0===c||o.isArray(e));if(u)for(;c>l;l++)r=n(e[l],l,i),null!=r&&(a[a.length]=r);else for(s in e)r=n(e[s],s,i),null!=r&&(a[a.length]=r);return a.concat.apply([],a)},guid:1,proxy:function(e,n){if("string"==typeof n){var i=e[n];n=e,e=i}if(!o.isFunction(e))return t;var r=D.call(arguments,2),s=function(){return e.apply(n,r.concat(D.call(arguments)))};return s.guid=e.guid=e.guid||s.guid||o.guid++,s},access:function(e,n,i,r,s,a){var l=e.length;if("object"==typeof n){for(var c in n)o.access(e,c,n[c],r,s,i);return e}if(i!==t){r=!a&&r&&o.isFunction(i);for(var u=0;l>u;u++)s(e[u],n,r?i.call(e[u],u,s(e[u],n)):i,a);return e}return l?s(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=x.exec(e)||_.exec(e)||w.exec(e)||0>e.indexOf("compatible")&&T.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}o.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof o&&!(i instanceof e)&&(i=e(i)),o.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(I);return e},browser:{}}),o.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){L["[object "+t+"]"]=t.toLowerCase()}),r=o.uaMatch(E),r.browser&&(o.browser[r.browser]=!0,o.browser.version=r.version),o.browser.webkit&&(o.browser.safari=!0),h.test("Â ")&&(p=/^[\s\xA0]+/,d=/[\s\xA0]+$/),i=o(I),I.addEventListener?a=function(){I.removeEventListener("DOMContentLoaded",a,!1),o.ready()}:I.attachEvent&&(a=function(){"complete"===I.readyState&&(I.detachEvent("onreadystatechange",a),o.ready())}),o}(),F="done fail isResolved isRejected promise then always pipe".split(" "),j=[].slice;L.extend({_Deferred:function(){var e,t,n,i=[],r={done:function(){if(!n){var t,s,a,o,l,c=arguments;for(e&&(l=e,e=0),t=0,s=c.length;s>t;t++)a=c[t],o=L.type(a),"array"===o?r.done.apply(r,a):"function"===o&&i.push(a);l&&r.resolveWith(l[0],l[1])}return this},resolveWith:function(r,s){if(!n&&!e&&!t){s=s||[],t=1;try{for(;i[0];)i.shift().apply(r,s)}finally{e=[r,s],t=0}}return this},resolve:function(){return r.resolveWith(this,arguments),this},isResolved:function(){return!(!t&&!e)},cancel:function(){return n=1,i=[],this}};return r},Deferred:function(e){var t,n=L._Deferred(),i=L._Deferred();return L.extend(n,{then:function(e,t){return n.done(e).fail(t),this},always:function(){return n.done.apply(n,arguments).fail.apply(this,arguments)},fail:i.done,rejectWith:i.resolveWith,reject:i.resolve,isRejected:i.isResolved,pipe:function(e,t){return L.Deferred(function(i){L.each({done:[e,"resolve"],fail:[t,"reject"]},function(e,t){var r,s=t[0],a=t[1];L.isFunction(s)?n[e](function(){r=s.apply(this,arguments),r&&L.isFunction(r.promise)?r.promise().then(i.resolve,i.reject):i[a+"With"](this===n?i:this,[r])}):n[e](i[a])})}).promise()},promise:function(e){if(null==e){if(t)return t;t=e={}}for(var i=F.length;i--;)e[F[i]]=n[F[i]];return e}}),n.done(i.cancel).fail(n.cancel),delete n.cancel,e&&e.call(n,n),n},when:function(e){function t(e){return function(t){n[e]=arguments.length>1?j.call(arguments,0):t,--s||a.resolveWith(a,j.call(n,0))}}var n=arguments,i=0,r=n.length,s=r,a=1>=r&&e&&L.isFunction(e.promise)?e:L.Deferred();if(r>1){for(;r>i;i++)n[i]&&L.isFunction(n[i].promise)?n[i].promise().then(t(i),a.reject):--s;s||a.resolveWith(a,n)}else a!==e&&a.resolveWith(a,r?[e]:[]);return a.promise()}}),L.support=function(){var e,t,n,i,r,s,a,o,l,c,u,h,p,d,f,m,g=I.createElement("div"),v=I.documentElement;if(g.setAttribute("className","t"),g.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",e=g.getElementsByTagName("*"),t=g.getElementsByTagName("a")[0],!e||!e.length||!t)return{};n=I.createElement("select"),i=n.appendChild(I.createElement("option")),r=g.getElementsByTagName("input")[0],a={leadingWhitespace:3===g.firstChild.nodeType,tbody:!g.getElementsByTagName("tbody").length,htmlSerialize:!!g.getElementsByTagName("link").length,style:/top/.test(t.getAttribute("style")),hrefNormalized:"/a"===t.getAttribute("href"),opacity:/^0.55$/.test(t.style.opacity),cssFloat:!!t.style.cssFloat,checkOn:"on"===r.value,optSelected:i.selected,getSetAttribute:"t"!==g.className,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},r.checked=!0,a.noCloneChecked=r.cloneNode(!0).checked,n.disabled=!0,a.optDisabled=!i.disabled;try{delete g.test}catch(b){a.deleteExpando=!1}!g.addEventListener&&g.attachEvent&&g.fireEvent&&(g.attachEvent("onclick",function(){a.noCloneEvent=!1}),g.cloneNode(!0).fireEvent("onclick")),r=I.createElement("input"),r.value="t",r.setAttribute("type","radio"),a.radioValue="t"===r.value,r.setAttribute("checked","checked"),g.appendChild(r),o=I.createDocumentFragment(),o.appendChild(g.firstChild),a.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,g.innerHTML="",g.style.width=g.style.paddingLeft="1px",l=I.getElementsByTagName("body")[0],u=I.createElement(l?"div":"body"),h={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},l&&L.extend(h,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in h)u.style[f]=h[f];if(u.appendChild(g),c=l||v,c.insertBefore(u,c.firstChild),a.appendChecked=r.checked,a.boxModel=2===g.offsetWidth,"zoom"in g.style&&(g.style.display="inline",g.style.zoom=1,a.inlineBlockNeedsLayout=2===g.offsetWidth,g.style.display="",g.innerHTML="<div style='width:4px;'></div>",a.shrinkWrapBlocks=2!==g.offsetWidth),g.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",p=g.getElementsByTagName("td"),m=0===p[0].offsetHeight,p[0].style.display="",p[1].style.display="none",a.reliableHiddenOffsets=m&&0===p[0].offsetHeight,g.innerHTML="",I.defaultView&&I.defaultView.getComputedStyle&&(s=I.createElement("div"),s.style.width="0",s.style.marginRight="0",g.appendChild(s),a.reliableMarginRight=0===(parseInt((I.defaultView.getComputedStyle(s,null)||{marginRight:0}).marginRight,10)||0)),u.innerHTML="",c.removeChild(u),g.attachEvent)for(f in{submit:1,change:1,focusin:1})d="on"+f,m=d in g,m||(g.setAttribute(d,"return;"),m="function"==typeof g[d]),a[f+"Bubbles"]=m;return u=o=n=i=l=s=g=r=null,a}(),L.boxModel=L.support.boxModel;var z=/^(?:\{.*\}|\[.*\])$/,H=/([A-Z])/g;L.extend({cache:{},uuid:0,expando:"jQuery"+(L.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?L.cache[e[L.expando]]:e[L.expando],!!e&&!i(e)},data:function(e,n,i,r){if(L.acceptData(e)){var s,a,o=L.expando,l="string"==typeof n,c=e.nodeType,u=c?L.cache:e,h=c?e[L.expando]:e[L.expando]&&L.expando;if(!(!h||r&&h&&u[h]&&!u[h][o])||!l||i!==t)return h||(c?e[L.expando]=h=++L.uuid:h=L.expando),u[h]||(u[h]={},c||(u[h].toJSON=L.noop)),("object"==typeof n||"function"==typeof n)&&(r?u[h][o]=L.extend(u[h][o],n):u[h]=L.extend(u[h],n)),s=u[h],r&&(s[o]||(s[o]={}),s=s[o]),i!==t&&(s[L.camelCase(n)]=i),"events"!==n||s[n]?(l?(a=s[n],null==a&&(a=s[L.camelCase(n)])):a=s,a):s[o]&&s[o].events}},removeData:function(e,t,n){if(L.acceptData(e)){var r,s=L.expando,a=e.nodeType,o=a?L.cache:e,l=a?e[L.expando]:L.expando;if(o[l]&&!(t&&(r=n?o[l][s]:o[l],r&&(r[t]||(t=L.camelCase(t)),delete r[t],!i(r)))||n&&(delete o[l][s],!i(o[l])))){var c=o[l][s];L.support.deleteExpando||!o.setInterval?delete o[l]:o[l]=null,c?(o[l]={},a||(o[l].toJSON=L.noop),o[l][s]=c):a&&(L.support.deleteExpando?delete e[L.expando]:e.removeAttribute?e.removeAttribute(L.expando):e[L.expando]=null)}}},_data:function(e,t,n){return L.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=L.noData[e.nodeName.toLowerCase()];if(t)return!(t===!0||e.getAttribute("classid")!==t)}return!0}}),L.fn.extend({data:function(e,i){var r=null;if(e===t){if(this.length&&(r=L.data(this[0]),1===this[0].nodeType))for(var s,a=this[0].attributes,o=0,l=a.length;l>o;o++)s=a[o].name,0===s.indexOf("data-")&&(s=L.camelCase(s.substring(5)),n(this[0],s,r[s]));return r}if("object"==typeof e)return this.each(function(){L.data(this,e)});var c=e.split(".");return c[1]=c[1]?"."+c[1]:"",i===t?(r=this.triggerHandler("getData"+c[1]+"!",[c[0]]),r===t&&this.length&&(r=L.data(this[0],e),r=n(this[0],e,r)),r===t&&c[1]?this.data(c[0]):r):this.each(function(){var t=L(this),n=[c[0],i];t.triggerHandler("setData"+c[1]+"!",n),L.data(this,e,i),t.triggerHandler("changeData"+c[1]+"!",n)})},removeData:function(e){return this.each(function(){L.removeData(this,e)})}}),L.extend({_mark:function(e,n){e&&(n=(n||"fx")+"mark",L.data(e,n,(L.data(e,n,t,!0)||0)+1,!0))},_unmark:function(e,n,i){if(e!==!0&&(i=n,n=e,e=!1),n){i=i||"fx";var s=i+"mark",a=e?0:(L.data(n,s,t,!0)||1)-1;a?L.data(n,s,a,!0):(L.removeData(n,s,!0),r(n,i,"mark"))}},queue:function(e,n,i){if(e){n=(n||"fx")+"queue";var r=L.data(e,n,t,!0);return i&&(!r||L.isArray(i)?r=L.data(e,n,L.makeArray(i),!0):r.push(i)),r||[]}},dequeue:function(e,t){t=t||"fx";var n=L.queue(e,t),i=n.shift();"inprogress"===i&&(i=n.shift()),i&&("fx"===t&&n.unshift("inprogress"),i.call(e,function(){L.dequeue(e,t)})),n.length||(L.removeData(e,t+"queue",!0),r(e,t,"queue"))}}),L.fn.extend({queue:function(e,n){return"string"!=typeof e&&(n=e,e="fx"),n===t?L.queue(this[0],e):this.each(function(){var t=L.queue(this,e,n);"fx"===e&&"inprogress"!==t[0]&&L.dequeue(this,e)})},dequeue:function(e){return this.each(function(){L.dequeue(this,e)})},delay:function(e,t){return e=L.fx?L.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(){var n=this;setTimeout(function(){L.dequeue(n,t)},e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function i(){--l||s.resolveWith(a,[a])}"string"!=typeof e&&(n=e,e=t),e=e||"fx";for(var r,s=L.Deferred(),a=this,o=a.length,l=1,c=e+"defer",u=e+"queue",h=e+"mark";o--;)(r=L.data(a[o],c,t,!0)||(L.data(a[o],u,t,!0)||L.data(a[o],h,t,!0))&&L.data(a[o],c,L._Deferred(),!0))&&(l++,r.done(i));return i(),s.promise()}});var U,B,R=/[\n\t\r]/g,W=/\s+/,q=/\r/g,V=/^(?:button|input)$/i,Y=/^(?:button|input|object|select|textarea)$/i,K=/^a(?:rea)?$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i;L.fn.extend({attr:function(e,t){return L.access(this,e,t,!0,L.attr)},removeAttr:function(e){return this.each(function(){L.removeAttr(this,e)})},prop:function(e,t){return L.access(this,e,t,!0,L.prop)},removeProp:function(e){return e=L.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,r,s,a,o;if(L.isFunction(e))return this.each(function(t){L(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(W),n=0,i=this.length;i>n;n++)if(r=this[n],1===r.nodeType)if(r.className||1!==t.length){for(s=" "+r.className+" ",a=0,o=t.length;o>a;a++)~s.indexOf(" "+t[a]+" ")||(s+=t[a]+" ");r.className=L.trim(s)}else r.className=e;return this},removeClass:function(e){var n,i,r,s,a,o,l;if(L.isFunction(e))return this.each(function(t){L(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(W),i=0,r=this.length;r>i;i++)if(s=this[i],1===s.nodeType&&s.className)if(e){for(a=(" "+s.className+" ").replace(R," "),o=0,l=n.length;l>o;o++)a=a.replace(" "+n[o]+" "," ");s.className=L.trim(a)}else s.className="";return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return L.isFunction(e)?this.each(function(n){L(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var r,s=0,a=L(this),o=t,l=e.split(W);r=l[s++];)o=i?o:!a.hasClass(r),a[o?"addClass":"removeClass"](r);else("undefined"===n||"boolean"===n)&&(this.className&&L._data(this,"__className__",this.className),this.className=this.className||e===!1?"":L._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(R," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,i,r=this[0];if(!arguments.length)return r?(n=L.valHooks[r.nodeName.toLowerCase()]||L.valHooks[r.type],n&&"get"in n&&(i=n.get(r,"value"))!==t?i:(i=r.value,"string"==typeof i?i.replace(q,""):null==i?"":i)):t;var s=L.isFunction(e);return this.each(function(i){var r,a=L(this);1===this.nodeType&&(r=s?e.call(this,i,a.val()):e,null==r?r="":"number"==typeof r?r+="":L.isArray(r)&&(r=L.map(r,function(e){return null==e?"":e+""})),n=L.valHooks[this.nodeName.toLowerCase()]||L.valHooks[this.type],n&&"set"in n&&n.set(this,r,"value")!==t||(this.value=r))})}}),L.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n=e.selectedIndex,i=[],r=e.options,s="select-one"===e.type;if(0>n)return null;for(var a=s?n:0,o=s?n+1:r.length;o>a;a++){var l=r[a];if(!(!l.selected||(L.support.optDisabled?l.disabled:null!==l.getAttribute("disabled"))||l.parentNode.disabled&&L.nodeName(l.parentNode,"optgroup"))){if(t=L(l).val(),s)return t;i.push(t)}}return s&&!i.length&&r.length?L(r[n]).val():i},set:function(e,t){var n=L.makeArray(t);return L(e).find("option").each(function(){this.selected=L.inArray(L(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(e,n,i,r){var s=e.nodeType;if(!e||3===s||8===s||2===s)return t;if(r&&n in L.attrFn)return L(e)[n](i);if(!("getAttribute"in e))return L.prop(e,n,i);var a,o,l=1!==s||!L.isXMLDoc(e);return l&&(n=L.attrFix[n]||n,o=L.attrHooks[n],o||(X.test(n)?o=B:U&&(o=U))),i!==t?null===i?(L.removeAttr(e,n),t):o&&"set"in o&&l&&(a=o.set(e,i,n))!==t?a:(e.setAttribute(n,""+i),i):o&&"get"in o&&l&&null!==(a=o.get(e,n))?a:(a=e.getAttribute(n),null===a?t:a)},removeAttr:function(e,t){var n;1===e.nodeType&&(t=L.attrFix[t]||t,L.attr(e,t,""),e.removeAttribute(t),X.test(t)&&(n=L.propFix[t]||t)in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(V.test(e.nodeName)&&e.parentNode)L.error("type property can't be changed");else if(!L.support.radioValue&&"radio"===t&&L.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return U&&L.nodeName(e,"button")?U.get(e,t):t in e?e.value:null},set:function(e,n,i){return U&&L.nodeName(e,"button")?U.set(e,n,i):(e.value=n,t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var r=e.nodeType;if(!e||3===r||8===r||2===r)return t;var s,a,o=1!==r||!L.isXMLDoc(e);return o&&(n=L.propFix[n]||n,a=L.propHooks[n]),i!==t?a&&"set"in a&&(s=a.set(e,i,n))!==t?s:e[n]=i:a&&"get"in a&&null!==(s=a.get(e,n))?s:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Y.test(e.nodeName)||K.test(e.nodeName)&&e.href?0:t}}}}),L.attrHooks.tabIndex=L.propHooks.tabIndex,B={get:function(e,n){var i;return L.prop(e,n)===!0||(i=e.getAttributeNode(n))&&i.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var i;return t===!1?L.removeAttr(e,n):(i=L.propFix[n]||n,i in e&&(e[i]=!0),e.setAttribute(n,n.toLowerCase())),n}},L.support.getSetAttribute||(U=L.valHooks.button={get:function(e,n){var i;return i=e.getAttributeNode(n),i&&""!==i.nodeValue?i.nodeValue:t},set:function(e,t,n){var i=e.getAttributeNode(n);return i||(i=I.createAttribute(n),e.setAttributeNode(i)),i.nodeValue=t+""}},L.each(["width","height"],function(e,n){L.attrHooks[n]=L.extend(L.attrHooks[n],{set:function(e,i){return""===i?(e.setAttribute(n,"auto"),i):t}})})),L.support.hrefNormalized||L.each(["href","src","width","height"],function(e,n){L.attrHooks[n]=L.extend(L.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null===i?t:i}})}),L.support.style||(L.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),L.support.optSelected||(L.propHooks.selected=L.extend(L.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),L.support.checkOn||L.each(["radio","checkbox"],function(){L.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),L.each(["radio","checkbox"],function(){L.valHooks[this]=L.extend(L.valHooks[this],{set:function(e,n){return L.isArray(n)?e.checked=L.inArray(L(e).val(),n)>=0:t}})});var G=/\.(.*)$/,J=/^(?:textarea|input|select)$/i,Z=/\./g,Q=/ /g,et=/[^\w\s.|`]/g,tt=function(e){return e.replace(et,"\\$&")};L.event={add:function(e,n,i,r){if(3!==e.nodeType&&8!==e.nodeType){if(i===!1)i=s;else if(!i)return;var a,o;i.handler&&(a=i,i=a.handler),i.guid||(i.guid=L.guid++);var l=L._data(e);if(l){var c=l.events,u=l.handle;c||(l.events=c={}),u||(l.handle=u=function(e){return L===t||e&&L.event.triggered===e.type?t:L.event.handle.apply(u.elem,arguments)}),u.elem=e,n=n.split(" ");for(var h,p,d=0;h=n[d++];){o=a?L.extend({},a):{handler:i,data:r},h.indexOf(".")>-1?(p=h.split("."),h=p.shift(),o.namespace=p.slice(0).sort().join(".")):(p=[],o.namespace=""),o.type=h,o.guid||(o.guid=i.guid);var f=c[h],m=L.event.special[h]||{};f||(f=c[h]=[],m.setup&&m.setup.call(e,r,p,u)!==!1||(e.addEventListener?e.addEventListener(h,u,!1):e.attachEvent&&e.attachEvent("on"+h,u))),m.add&&(m.add.call(e,o),o.handler.guid||(o.handler.guid=i.guid)),f.push(o),L.event.global[h]=!0}e=null}}},global:{},remove:function(e,n,i,r){if(3!==e.nodeType&&8!==e.nodeType){i===!1&&(i=s);var a,o,l,c,u,h,p,d,f,m,g=0,v=L.hasData(e)&&L._data(e),b=v&&v.events;if(v&&b)if(n&&n.type&&(i=n.handler,n=n.type),!n||"string"==typeof n&&"."===n.charAt(0)){n=n||"";for(o in b)L.event.remove(e,o+n)}else{for(n=n.split(" ");o=n[g++];)if(m=o,f=null,c=0>o.indexOf("."),u=[],c||(u=o.split("."),o=u.shift(),h=RegExp("(^|\\.)"+L.map(u.slice(0).sort(),tt).join("\\.(?:.*\\.)?")+"(\\.|$)")),d=b[o])if(i){for(p=L.event.special[o]||{},l=r||0;d.length>l&&(f=d[l],i.guid!==f.guid||((c||h.test(f.namespace))&&(null==r&&d.splice(l--,1),p.remove&&p.remove.call(e,f)),null==r));l++);(0===d.length||null!=r&&1===d.length)&&(p.teardown&&p.teardown.call(e,u)!==!1||L.removeEvent(e,o,v.handle),a=null,delete b[o])}else for(l=0;d.length>l;l++)f=d[l],(c||h.test(f.namespace))&&(L.event.remove(e,m,f.handler,l),d.splice(l--,1));if(L.isEmptyObject(b)){var y=v.handle;
y&&(y.elem=null),delete v.events,delete v.handle,L.isEmptyObject(v)&&L.removeData(e,t,!0)}}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,i,r,s){var a,o=n.type||n,l=[];if(o.indexOf("!")>=0&&(o=o.slice(0,-1),a=!0),o.indexOf(".")>=0&&(l=o.split("."),o=l.shift(),l.sort()),r&&!L.event.customEvent[o]||L.event.global[o]){if(n="object"==typeof n?n[L.expando]?n:new L.Event(o,n):new L.Event(o),n.type=o,n.exclusive=a,n.namespace=l.join("."),n.namespace_re=RegExp("(^|\\.)"+l.join("\\.(?:.*\\.)?")+"(\\.|$)"),(s||!r)&&(n.preventDefault(),n.stopPropagation()),!r)return L.each(L.cache,function(){var e=L.expando,t=this[e];t&&t.events&&t.events[o]&&L.event.trigger(n,i,t.handle.elem)}),t;if(3!==r.nodeType&&8!==r.nodeType){n.result=t,n.target=r,i=null!=i?L.makeArray(i):[],i.unshift(n);var c=r,u=0>o.indexOf(":")?"on"+o:"";do{var h=L._data(c,"handle");n.currentTarget=c,h&&h.apply(c,i),u&&L.acceptData(c)&&c[u]&&c[u].apply(c,i)===!1&&(n.result=!1,n.preventDefault()),c=c.parentNode||c.ownerDocument||c===n.target.ownerDocument&&e}while(c&&!n.isPropagationStopped());if(!n.isDefaultPrevented()){var p,d=L.event.special[o]||{};if(!(d._default&&d._default.call(r.ownerDocument,n)!==!1||"click"===o&&L.nodeName(r,"a")||!L.acceptData(r))){try{u&&r[o]&&(p=r[u],p&&(r[u]=null),L.event.triggered=o,r[o]())}catch(f){}p&&(r[u]=p),L.event.triggered=t}}return n.result}}},handle:function(n){n=L.event.fix(n||e.event);var i=((L._data(this,"events")||{})[n.type]||[]).slice(0),r=!n.exclusive&&!n.namespace,s=Array.prototype.slice.call(arguments,0);s[0]=n,n.currentTarget=this;for(var a=0,o=i.length;o>a;a++){var l=i[a];if(r||n.namespace_re.test(l.namespace)){n.handler=l.handler,n.data=l.data,n.handleObj=l;var c=l.handler.apply(this,s);if(c!==t&&(n.result=c,c===!1&&(n.preventDefault(),n.stopPropagation())),n.isImmediatePropagationStopped())break}}return n.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(e){if(e[L.expando])return e;var n=e;e=L.Event(n);for(var i,r=this.props.length;r;)i=this.props[--r],e[i]=n[i];if(e.target||(e.target=e.srcElement||I),3===e.target.nodeType&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),null==e.pageX&&null!=e.clientX){var s=e.target.ownerDocument||I,a=s.documentElement,o=s.body;e.pageX=e.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}return null!=e.which||null==e.charCode&&null==e.keyCode||(e.which=null!=e.charCode?e.charCode:e.keyCode),!e.metaKey&&e.ctrlKey&&(e.metaKey=e.ctrlKey),e.which||e.button===t||(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e},guid:1e8,proxy:L.proxy,special:{ready:{setup:L.bindReady,teardown:L.noop},live:{add:function(e){L.event.add(this,c(e.origType,e.selector),L.extend({},e,{handler:l,guid:e.handler.guid}))},remove:function(e){L.event.remove(this,c(e.origType,e.selector),e)}},beforeunload:{setup:function(e,t,n){L.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}}},L.removeEvent=I.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},L.Event=function(e,n){return this.preventDefault?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?a:s):this.type=e,n&&L.extend(this,n),this.timeStamp=L.now(),this[L.expando]=!0,t):new L.Event(e,n)},L.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s};var nt=function(e){var t=e.relatedTarget,n=!1,i=e.type;e.type=e.data,t!==this&&(t&&(n=L.contains(this,t)),n||(L.event.handle.apply(this,arguments),e.type=i))},it=function(e){e.type=e.data,L.event.handle.apply(this,arguments)};if(L.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){L.event.special[e]={setup:function(n){L.event.add(this,t,n&&n.selector?it:nt,e)},teardown:function(e){L.event.remove(this,t,e&&e.selector?it:nt)}}}),L.support.submitBubbles||(L.event.special.submit={setup:function(){return L.nodeName(this,"form")?!1:(L.event.add(this,"click.specialSubmit",function(e){var t=e.target,n=L.nodeName(t,"input")||L.nodeName(t,"button")?t.type:"";"submit"!==n&&"image"!==n||!L(t).closest("form").length||o("submit",this,arguments)}),L.event.add(this,"keypress.specialSubmit",function(e){var t=e.target,n=L.nodeName(t,"input")||L.nodeName(t,"button")?t.type:"";"text"!==n&&"password"!==n||!L(t).closest("form").length||13!==e.keyCode||o("submit",this,arguments)}),t)},teardown:function(){L.event.remove(this,".specialSubmit")}}),!L.support.changeBubbles){var rt,st=function(e){var t=L.nodeName(e,"input")?e.type:"",n=e.value;return"radio"===t||"checkbox"===t?n=e.checked:"select-multiple"===t?n=e.selectedIndex>-1?L.map(e.options,function(e){return e.selected}).join("-"):"":L.nodeName(e,"select")&&(n=e.selectedIndex),n},at=function at(e){var n,i,r=e.target;J.test(r.nodeName)&&!r.readOnly&&(n=L._data(r,"_change_data"),i=st(r),("focusout"!==e.type||"radio"!==r.type)&&L._data(r,"_change_data",i),n!==t&&i!==n&&(null!=n||i)&&(e.type="change",e.liveFired=t,L.event.trigger(e,arguments[1],r)))};L.event.special.change={filters:{focusout:at,beforedeactivate:at,click:function(e){var t=e.target,n=L.nodeName(t,"input")?t.type:"";("radio"===n||"checkbox"===n||L.nodeName(t,"select"))&&at.call(this,e)},keydown:function(e){var t=e.target,n=L.nodeName(t,"input")?t.type:"";(13===e.keyCode&&!L.nodeName(t,"textarea")||32===e.keyCode&&("checkbox"===n||"radio"===n)||"select-multiple"===n)&&at.call(this,e)},beforeactivate:function(e){var t=e.target;L._data(t,"_change_data",st(t))}},setup:function(){if("file"===this.type)return!1;for(var e in rt)L.event.add(this,e+".specialChange",rt[e]);return J.test(this.nodeName)},teardown:function(){return L.event.remove(this,".specialChange"),J.test(this.nodeName)}},rt=L.event.special.change.filters,rt.focus=rt.beforeactivate}L.support.focusinBubbles||L.each({focus:"focusin",blur:"focusout"},function(e,t){function n(e){var n=L.event.fix(e);n.type=t,n.originalEvent={},L.event.trigger(n,null,n.target),n.isDefaultPrevented()&&e.preventDefault()}var i=0;L.event.special[t]={setup:function(){0===i++&&I.addEventListener(e,n,!0)},teardown:function(){0===--i&&I.removeEventListener(e,n,!0)}}}),L.each(["bind","one"],function(e,n){L.fn[n]=function(e,i,r){var s;if("object"==typeof e){for(var a in e)this[n](a,i,e[a],r);return this}if((2===arguments.length||i===!1)&&(r=i,i=t),"one"===n?(s=function(e){return L(this).unbind(e,s),r.apply(this,arguments)},s.guid=r.guid||L.guid++):s=r,"unload"===e&&"one"!==n)this.one(e,i,r);else for(var o=0,l=this.length;l>o;o++)L.event.add(this[o],e,s,i);return this}}),L.fn.extend({unbind:function(e,t){if("object"!=typeof e||e.preventDefault)for(var n=0,i=this.length;i>n;n++)L.event.remove(this[n],e,t);else for(var r in e)this.unbind(r,e[r]);return this},delegate:function(e,t,n,i){return this.live(t,n,i,e)},undelegate:function(e,t,n){return 0===arguments.length?this.unbind("live"):this.die(t,null,n,e)},trigger:function(e,t){return this.each(function(){L.event.trigger(e,t,this)})},triggerHandler:function(e,n){return this[0]?L.event.trigger(e,n,this[0],!0):t},toggle:function(e){var t=arguments,n=e.guid||L.guid++,i=0,r=function(n){var r=(L.data(this,"lastToggle"+e.guid)||0)%i;return L.data(this,"lastToggle"+e.guid,r+1),n.preventDefault(),t[r].apply(this,arguments)||!1};for(r.guid=n;t.length>i;)t[i++].guid=n;return this.click(r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var ot={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};L.each(["live","die"],function(e,n){L.fn[n]=function(e,i,r,a){var o,l,u,h,p=0,d=a||this.selector,f=a?this:L(this.context);if("object"==typeof e&&!e.preventDefault){for(var m in e)f[n](m,i,e[m],d);return this}if("die"===n&&!e&&a&&"."===a.charAt(0))return f.unbind(a),this;for((i===!1||L.isFunction(i))&&(r=i||s,i=t),e=(e||"").split(" ");null!=(o=e[p++]);)if(l=G.exec(o),u="",l&&(u=l[0],o=o.replace(G,"")),"hover"!==o)if(h=o,ot[o]?(e.push(ot[o]+u),o+=u):o=(ot[o]||o)+u,"live"===n)for(var g=0,v=f.length;v>g;g++)L.event.add(f[g],"live."+c(o,d),{data:i,selector:d,handler:r,origType:o,origHandler:r,preType:h});else f.unbind("live."+c(o,d),r);else e.push("mouseenter"+u,"mouseleave"+u);return this}}),L.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(e,t){L.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.bind(t,e,n):this.trigger(t)},L.attrFn&&(L.attrFn[t]=!0)}),function(){function e(e,t,n,i,r,s){for(var a=0,o=i.length;o>a;a++){var l=i[a];if(l){var c=!1;for(l=l[e];l;){if(l.sizcache===n){c=i[l.sizset];break}if(1!==l.nodeType||s||(l.sizcache=n,l.sizset=a),l.nodeName.toLowerCase()===t){c=l;break}l=l[e]}i[a]=c}}}function n(e,t,n,i,r,s){for(var a=0,o=i.length;o>a;a++){var l=i[a];if(l){var c=!1;for(l=l[e];l;){if(l.sizcache===n){c=i[l.sizset];break}if(1===l.nodeType)if(s||(l.sizcache=n,l.sizset=a),"string"!=typeof t){if(l===t){c=!0;break}}else if(u.filter(t,[l]).length>0){c=l;break}l=l[e]}i[a]=c}}}var i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=0,s=Object.prototype.toString,a=!1,o=!0,l=/\\/g,c=/\W/;[0,0].sort(function(){return o=!1,0});var u=function(e,t,n,r){n=n||[],t=t||I;var a=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return n;var o,l,c,d,f,g,v,b,x=!0,_=u.isXML(t),w=[],T=e;do if(i.exec(""),o=i.exec(T),o&&(T=o[3],w.push(o[1]),o[2])){d=o[3];break}while(o);if(w.length>1&&p.exec(e))if(2===w.length&&h.relative[w[0]])l=y(w[0]+w[1],t);else for(l=h.relative[w[0]]?[t]:u(w.shift(),t);w.length;)e=w.shift(),h.relative[e]&&(e+=w.shift()),l=y(e,l);else if(!r&&w.length>1&&9===t.nodeType&&!_&&h.match.ID.test(w[0])&&!h.match.ID.test(w[w.length-1])&&(f=u.find(w.shift(),t,_),t=f.expr?u.filter(f.expr,f.set)[0]:f.set[0]),t)for(f=r?{expr:w.pop(),set:m(r)}:u.find(w.pop(),1!==w.length||"~"!==w[0]&&"+"!==w[0]||!t.parentNode?t:t.parentNode,_),l=f.expr?u.filter(f.expr,f.set):f.set,w.length>0?c=m(l):x=!1;w.length;)g=w.pop(),v=g,h.relative[g]?v=w.pop():g="",null==v&&(v=t),h.relative[g](c,v,_);else c=w=[];if(c||(c=l),c||u.error(g||e),"[object Array]"===s.call(c))if(x)if(t&&1===t.nodeType)for(b=0;null!=c[b];b++)c[b]&&(c[b]===!0||1===c[b].nodeType&&u.contains(t,c[b]))&&n.push(l[b]);else for(b=0;null!=c[b];b++)c[b]&&1===c[b].nodeType&&n.push(l[b]);else n.push.apply(n,c);else m(c,n);return d&&(u(d,a,n,r),u.uniqueSort(n)),n};u.uniqueSort=function(e){if(v&&(a=o,e.sort(v),a))for(var t=1;e.length>t;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},u.matches=function(e,t){return u(e,null,null,t)},u.matchesSelector=function(e,t){return u(t,null,null,[e]).length>0},u.find=function(e,n,i){var r;if(!e)return[];for(var s=0,a=h.order.length;a>s;s++){var o,c=h.order[s];if(o=h.leftMatch[c].exec(e)){var u=o[1];if(o.splice(1,1),"\\"!==u.substr(u.length-1)&&(o[1]=(o[1]||"").replace(l,""),r=h.find[c](o,n,i),null!=r)){e=e.replace(h.match[c],"");break}}}return r||(r=n.getElementsByTagName!==t?n.getElementsByTagName("*"):[]),{set:r,expr:e}},u.filter=function(e,n,i,r){for(var s,a,o=e,l=[],c=n,p=n&&n[0]&&u.isXML(n[0]);e&&n.length;){for(var d in h.filter)if(null!=(s=h.leftMatch[d].exec(e))&&s[2]){var f,m,g=h.filter[d],v=s[1];if(a=!1,s.splice(1,1),"\\"===v.substr(v.length-1))continue;if(c===l&&(l=[]),h.preFilter[d])if(s=h.preFilter[d](s,c,i,l,r,p)){if(s===!0)continue}else a=f=!0;if(s)for(var b=0;null!=(m=c[b]);b++)if(m){f=g(m,s,b,c);var y=r^!!f;i&&null!=f?y?a=!0:c[b]=!1:y&&(l.push(m),a=!0)}if(f!==t){if(i||(c=l),e=e.replace(h.match[d],""),!a)return[];break}}if(e===o){if(null!=a)break;u.error(e)}o=e}return c},u.error=function(e){throw"Syntax error, unrecognized expression: "+e};var h=u.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n="string"==typeof t,i=n&&!c.test(t),r=n&&!i;i&&(t=t.toLowerCase());for(var s,a=0,o=e.length;o>a;a++)if(s=e[a]){for(;(s=s.previousSibling)&&1!==s.nodeType;);e[a]=r||s&&s.nodeName.toLowerCase()===t?s||!1:s===t}r&&u.filter(t,e,!0)},">":function(e,t){var n,i="string"==typeof t,r=0,s=e.length;if(i&&!c.test(t)){for(t=t.toLowerCase();s>r;r++)if(n=e[r]){var a=n.parentNode;e[r]=a.nodeName.toLowerCase()===t?a:!1}}else{for(;s>r;r++)n=e[r],n&&(e[r]=i?n.parentNode:n.parentNode===t);i&&u.filter(t,e,!0)}},"":function(t,i,s){var a,o=r++,l=n;"string"!=typeof i||c.test(i)||(i=i.toLowerCase(),a=i,l=e),l("parentNode",i,o,t,a,s)},"~":function(t,i,s){var a,o=r++,l=n;"string"!=typeof i||c.test(i)||(i=i.toLowerCase(),a=i,l=e),l("previousSibling",i,o,t,a,s)}},find:{ID:function(e,n,i){if(n.getElementById!==t&&!i){var r=n.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,n){if(n.getElementsByName!==t){for(var i=[],r=n.getElementsByName(e[1]),s=0,a=r.length;a>s;s++)r[s].getAttribute("name")===e[1]&&i.push(r[s]);return 0===i.length?null:i}},TAG:function(e,n){return n.getElementsByTagName!==t?n.getElementsByTagName(e[1]):t}},preFilter:{CLASS:function(e,t,n,i,r,s){if(e=" "+e[1].replace(l,"")+" ",s)return e;for(var a,o=0;null!=(a=t[o]);o++)a&&(r^(a.className&&(" "+a.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||i.push(a):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(l,"")},TAG:function(e){return e[1].replace(l,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||u.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&u.error(e[0]);return e[0]=r++,e},ATTR:function(e,t,n,i,r,s){var a=e[1]=e[1].replace(l,"");return!s&&h.attrMap[a]&&(e[1]=h.attrMap[a]),e[4]=(e[4]||e[5]||"").replace(l,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,r,s){if("not"===e[1]){if(!((i.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var a=u.filter(e[3],t,n,!0^s);return n||r.push.apply(r,a),!1}e[3]=u(e[3],null,null,t)}else if(h.match.POS.test(e[0])||h.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!u(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===n&&(t===n||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,i){return t===i.length-1},even:function(e,t){return 0===t%2},odd:function(e,t){return 1===t%2},lt:function(e,t,n){return n[3]-0>t},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,i){var r=t[1],s=h.filters[r];if(s)return s(e,n,t,i);if("contains"===r)return(e.textContent||e.innerText||u.getText([e])||"").indexOf(t[3])>=0;if("not"===r){for(var a=t[3],o=0,l=a.length;l>o;o++)if(a[o]===e)return!1;return!0}u.error(r)},CHILD:function(e,t){var n=t[1],i=e;switch(n){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===n)return!0;i=e;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0;case"nth":var r=t[2],s=t[3];if(1===r&&0===s)return!0;var a=t[0],o=e.parentNode;if(o&&(o.sizcache!==a||!e.nodeIndex)){var l=0;for(i=o.firstChild;i;i=i.nextSibling)1===i.nodeType&&(i.nodeIndex=++l);o.sizcache=a}var c=e.nodeIndex-s;return 0===r?0===c:0===c%r&&c/r>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],i=h.attrHandle[n]?h.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),r=i+"",s=t[2],a=t[4];return null==i?"!="===s:"="===s?r===a:"*="===s?r.indexOf(a)>=0:"~="===s?(" "+r+" ").indexOf(a)>=0:a?"!="===s?r!==a:"^="===s?0===r.indexOf(a):"$="===s?r.substr(r.length-a.length)===a:"|="===s?r===a||r.substr(0,a.length+1)===a+"-":!1:r&&i!==!1},POS:function(e,n,i,r){var s=n[2],a=h.setFilters[s];return a?a(e,i,n,r):t}}},p=h.match.POS,d=function(e,t){return"\\"+(t-0+1)};for(var f in h.match)h.match[f]=RegExp(h.match[f].source+/(?![^\[]*\])(?![^\(]*\))/.source),h.leftMatch[f]=RegExp(/(^(?:.|\r|\n)*?)/.source+h.match[f].source.replace(/\\(\d+)/g,d));var m=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(I.documentElement.childNodes,0)[0].nodeType}catch(g){m=function(e,t){var n=0,i=t||[];if("[object Array]"===s.call(e))Array.prototype.push.apply(i,e);else if("number"==typeof e.length)for(var r=e.length;r>n;n++)i.push(e[n]);else for(;e[n];n++)i.push(e[n]);return i}}var v,b;I.documentElement.compareDocumentPosition?v=function(e,t){return e===t?(a=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(v=function(e,t){if(e===t)return a=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,i,r=[],s=[],o=e.parentNode,l=t.parentNode,c=o;if(o===l)return b(e,t);if(!o)return-1;if(!l)return 1;for(;c;)r.unshift(c),c=c.parentNode;for(c=l;c;)s.unshift(c),c=c.parentNode;n=r.length,i=s.length;for(var u=0;n>u&&i>u;u++)if(r[u]!==s[u])return b(r[u],s[u]);return u===n?b(e,s[u],-1):b(r[u],t,1)},b=function(e,t,n){if(e===t)return n;for(var i=e.nextSibling;i;){if(i===t)return-1;i=i.nextSibling}return 1}),u.getText=function(e){for(var t,n="",i=0;e[i];i++)t=e[i],3===t.nodeType||4===t.nodeType?n+=t.nodeValue:8!==t.nodeType&&(n+=u.getText(t.childNodes));return n},function(){var e=I.createElement("div"),n="script"+(new Date).getTime(),i=I.documentElement;e.innerHTML="<a name='"+n+"'/>",i.insertBefore(e,i.firstChild),I.getElementById(n)&&(h.find.ID=function(e,n,i){if(n.getElementById!==t&&!i){var r=n.getElementById(e[1]);return r?r.id===e[1]||r.getAttributeNode!==t&&r.getAttributeNode("id").nodeValue===e[1]?[r]:t:[]}},h.filter.ID=function(e,n){var i=e.getAttributeNode!==t&&e.getAttributeNode("id");return 1===e.nodeType&&i&&i.nodeValue===n}),i.removeChild(e),i=e=null}(),function(){var e=I.createElement("div");e.appendChild(I.createComment("")),e.getElementsByTagName("*").length>0&&(h.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var i=[],r=0;n[r];r++)1===n[r].nodeType&&i.push(n[r]);n=i}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&e.firstChild.getAttribute!==t&&"#"!==e.firstChild.getAttribute("href")&&(h.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),I.querySelectorAll&&function(){var e=u,t=I.createElement("div"),n="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){u=function(t,i,r,s){if(i=i||I,!s&&!u.isXML(i)){var a=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(a&&(1===i.nodeType||9===i.nodeType)){if(a[1])return m(i.getElementsByTagName(t),r);if(a[2]&&h.find.CLASS&&i.getElementsByClassName)return m(i.getElementsByClassName(a[2]),r)}if(9===i.nodeType){if("body"===t&&i.body)return m([i.body],r);if(a&&a[3]){var o=i.getElementById(a[3]);if(!o||!o.parentNode)return m([],r);if(o.id===a[3])return m([o],r)}try{return m(i.querySelectorAll(t),r)}catch(l){}}else if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){var c=i,p=i.getAttribute("id"),d=p||n,f=i.parentNode,g=/^\s*[+~]/.test(t);p?d=d.replace(/'/g,"\\$&"):i.setAttribute("id",d),g&&f&&(i=i.parentNode);try{if(!g||f)return m(i.querySelectorAll("[id='"+d+"'] "+t),r)}catch(v){}finally{p||c.removeAttribute("id")}}}return e(t,i,r,s)};for(var i in e)u[i]=e[i];t=null}}(),function(){var e=I.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(I.createElement("div"),"div"),i=!1;try{t.call(I.documentElement,"[test!='']:sizzle")}catch(r){i=!0}u.matchesSelector=function(e,r){if(r=r.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!u.isXML(e))try{if(i||!h.match.PSEUDO.test(r)&&!/!=/.test(r)){var s=t.call(e,r);if(s||!n||e.document&&11!==e.document.nodeType)return s}}catch(a){}return u(r,null,null,[e]).length>0}}}(),function(){var e=I.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(h.order.splice(1,0,"CLASS"),h.find.CLASS=function(e,n,i){return n.getElementsByClassName===t||i?t:n.getElementsByClassName(e[1])},e=null))}(),u.contains=I.documentElement.contains?function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:I.documentElement.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(){return!1},u.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1};var y=function(e,t){for(var n,i=[],r="",s=t.nodeType?[t]:t;n=h.match.PSEUDO.exec(e);)r+=n[0],e=e.replace(h.match.PSEUDO,"");e=h.relative[e]?e+"*":e;for(var a=0,o=s.length;o>a;a++)u(e,s[a],i);return u.filter(r,i)};L.find=u,L.expr=u.selectors,L.expr[":"]=L.expr.filters,L.unique=u.uniqueSort,L.text=u.getText,L.isXMLDoc=u.isXML,L.contains=u.contains}();var lt=/Until$/,ct=/^(?:parents|prevUntil|prevAll)/,ut=/,/,ht=/^.[^:#\[\.,]*$/,pt=Array.prototype.slice,dt=L.expr.match.POS,ft={children:!0,contents:!0,next:!0,prev:!0};L.fn.extend({find:function(e){var t,n,i=this;if("string"!=typeof e)return L(e).filter(function(){for(t=0,n=i.length;n>t;t++)if(L.contains(i[t],this))return!0});var r,s,a,o=this.pushStack("","find",e);for(t=0,n=this.length;n>t;t++)if(r=o.length,L.find(e,this[t],o),t>0)for(s=r;o.length>s;s++)for(a=0;r>a;a++)if(o[a]===o[s]){o.splice(s--,1);break}return o},has:function(e){var t=L(e);return this.filter(function(){for(var e=0,n=t.length;n>e;e++)if(L.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(h(this,e,!1),"not",e)},filter:function(e){return this.pushStack(h(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?L.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,i,r=[],s=this[0];if(L.isArray(e)){var a,o,l={},c=1;if(s&&e.length){for(n=0,i=e.length;i>n;n++)o=e[n],l[o]||(l[o]=dt.test(o)?L(o,t||this.context):o);for(;s&&s.ownerDocument&&s!==t;){for(o in l)a=l[o],(a.jquery?a.index(s)>-1:L(s).is(a))&&r.push({selector:o,elem:s,level:c});s=s.parentNode,c++}}return r}var u=dt.test(e)||"string"!=typeof e?L(e,t||this.context):0;for(n=0,i=this.length;i>n;n++)for(s=this[n];s;){if(u?u.index(s)>-1:L.find.matchesSelector(s,e)){r.push(s);break}if(s=s.parentNode,!s||!s.ownerDocument||s===t||11===s.nodeType)break}return r=r.length>1?L.unique(r):r,this.pushStack(r,"closest",e)},index:function(e){return e?"string"==typeof e?L.inArray(this[0],L(e)):L.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?L(e,t):L.makeArray(e&&e.nodeType?[e]:e),i=L.merge(this.get(),n);return this.pushStack(u(n[0])||u(i[0])?i:L.unique(i))},andSelf:function(){return this.add(this.prevObject)}}),L.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return L.dir(e,"parentNode")},parentsUntil:function(e,t,n){return L.dir(e,"parentNode",n)},next:function(e){return L.nth(e,2,"nextSibling")},prev:function(e){return L.nth(e,2,"previousSibling")},nextAll:function(e){return L.dir(e,"nextSibling")},prevAll:function(e){return L.dir(e,"previousSibling")},nextUntil:function(e,t,n){return L.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return L.dir(e,"previousSibling",n)},siblings:function(e){return L.sibling(e.parentNode.firstChild,e)},children:function(e){return L.sibling(e.firstChild)},contents:function(e){return L.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:L.makeArray(e.childNodes)}},function(e,t){L.fn[e]=function(n,i){var r=L.map(this,t,n),s=pt.call(arguments);return lt.test(e)||(i=n),i&&"string"==typeof i&&(r=L.filter(i,r)),r=this.length>1&&!ft[e]?L.unique(r):r,(this.length>1||ut.test(i))&&ct.test(e)&&(r=r.reverse()),this.pushStack(r,e,s.join(","))}}),L.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?L.find.matchesSelector(t[0],e)?[t[0]]:[]:L.find.matches(e,t)},dir:function(e,n,i){for(var r=[],s=e[n];s&&9!==s.nodeType&&(i===t||1!==s.nodeType||!L(s).is(i));)1===s.nodeType&&r.push(s),s=s[n];return r},nth:function(e,t,n){t=t||1;for(var i=0;e&&(1!==e.nodeType||++i!==t);e=e[n]);return e},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var mt=/ jQuery\d+="(?:\d+|null)"/g,gt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,yt=/<tbody/i,xt=/<|&#?\w+;/,_t=/<(?:script|object|embed|option|style)/i,wt=/checked\s*(?:[^=]|=\s*.checked.)/i,Tt=/\/(java|ecma)script/i,kt=/^\s*<!(?:\[CDATA\[|\-\-)/,Ct={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Ct.optgroup=Ct.option,Ct.tbody=Ct.tfoot=Ct.colgroup=Ct.caption=Ct.thead,Ct.th=Ct.td,L.support.htmlSerialize||(Ct._default=[1,"div<div>","</div>"]),L.fn.extend({text:function(e){return L.isFunction(e)?this.each(function(t){var n=L(this);n.text(e.call(this,t,n.text()))}):"object"!=typeof e&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||I).createTextNode(e)):L.text(this)},wrapAll:function(e){if(L.isFunction(e))return this.each(function(t){L(this).wrapAll(e.call(this,t))});if(this[0]){var t=L(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return L.isFunction(e)?this.each(function(t){L(this).wrapInner(e.call(this,t))}):this.each(function(){var t=L(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){return this.each(function(){L(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){L.nodeName(this,"body")||L(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=L(arguments[0]);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,L(arguments[0]).toArray()),e}},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||L.filter(e,[n]).length)&&(t||1!==n.nodeType||(L.cleanData(n.getElementsByTagName("*")),L.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&L.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return L.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(mt,""):null;if("string"!=typeof e||_t.test(e)||!L.support.leadingWhitespace&&gt.test(e)||Ct[(bt.exec(e)||["",""])[1].toLowerCase()])L.isFunction(e)?this.each(function(t){var n=L(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);else{e=e.replace(vt,"<$1></$2>");try{for(var n=0,i=this.length;i>n;n++)1===this[n].nodeType&&(L.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(r){this.empty().append(e)}}return this},replaceWith:function(e){return this[0]&&this[0].parentNode?L.isFunction(e)?this.each(function(t){var n=L(this),i=n.html();n.replaceWith(e.call(this,t,i))}):("string"!=typeof e&&(e=L(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;L(this).remove(),t?L(t).before(e):L(n).append(e)})):this.length?this.pushStack(L(L.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){var r,s,a,o,l=e[0],c=[];if(!L.support.checkClone&&3===arguments.length&&"string"==typeof l&&wt.test(l))return this.each(function(){L(this).domManip(e,n,i,!0)});if(L.isFunction(l))return this.each(function(r){var s=L(this);e[0]=l.call(this,r,n?s.html():t),s.domManip(e,n,i)});if(this[0]){if(o=l&&l.parentNode,r=L.support.parentNode&&o&&11===o.nodeType&&o.childNodes.length===this.length?{fragment:o}:L.buildFragment(e,this,c),a=r.fragment,s=1===a.childNodes.length?a=a.firstChild:a.firstChild){n=n&&L.nodeName(s,"tr");for(var u=0,h=this.length,d=h-1;h>u;u++)i.call(n?p(this[u],s):this[u],r.cacheable||h>1&&d>u?L.clone(a,!0,!0):a)}c.length&&L.each(c,b)}return this
}}),L.buildFragment=function(e,t,n){var i,r,s,a;return t&&t[0]&&(a=t[0].ownerDocument||t[0]),a.createDocumentFragment||(a=I),1===e.length&&"string"==typeof e[0]&&512>e[0].length&&a===I&&"<"===e[0].charAt(0)&&!_t.test(e[0])&&(L.support.checkClone||!wt.test(e[0]))&&(r=!0,s=L.fragments[e[0]],s&&1!==s&&(i=s)),i||(i=a.createDocumentFragment(),L.clean(e,a,i,n)),r&&(L.fragments[e[0]]=s?i:1),{fragment:i,cacheable:r}},L.fragments={},L.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){L.fn[e]=function(n){var i=[],r=L(n),s=1===this.length&&this[0].parentNode;if(s&&11===s.nodeType&&1===s.childNodes.length&&1===r.length)return r[t](this[0]),this;for(var a=0,o=r.length;o>a;a++){var l=(a>0?this.clone(!0):this).get();L(r[a])[t](l),i=i.concat(l)}return this.pushStack(i,e,r.selector)}}),L.extend({clone:function(e,t,n){var i,r,s,a=e.cloneNode(!0);if(!(L.support.noCloneEvent&&L.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||L.isXMLDoc(e)))for(f(e,a),i=m(e),r=m(a),s=0;i[s];++s)r[s]&&f(i[s],r[s]);if(t&&(d(e,a),n))for(i=m(e),r=m(a),s=0;i[s];++s)d(i[s],r[s]);return i=r=null,a},clean:function(e,n,i,r){var s;n=n||I,n.createElement===t&&(n=n.ownerDocument||n[0]&&n[0].ownerDocument||I);for(var a,o,l=[],c=0;null!=(o=e[c]);c++)if("number"==typeof o&&(o+=""),o){if("string"==typeof o)if(xt.test(o)){o=o.replace(vt,"<$1></$2>");var u=(bt.exec(o)||["",""])[1].toLowerCase(),h=Ct[u]||Ct._default,p=h[0],d=n.createElement("div");for(d.innerHTML=h[1]+o+h[2];p--;)d=d.lastChild;if(!L.support.tbody){var f=yt.test(o),m="table"!==u||f?"<table>"!==h[1]||f?[]:d.childNodes:d.firstChild&&d.firstChild.childNodes;for(a=m.length-1;a>=0;--a)L.nodeName(m[a],"tbody")&&!m[a].childNodes.length&&m[a].parentNode.removeChild(m[a])}!L.support.leadingWhitespace&&gt.test(o)&&d.insertBefore(n.createTextNode(gt.exec(o)[0]),d.firstChild),o=d.childNodes}else o=n.createTextNode(o);var g;if(!L.support.appendChecked)if(o[0]&&"number"==typeof(g=o.length))for(a=0;g>a;a++)v(o[a]);else v(o);o.nodeType?l.push(o):l=L.merge(l,o)}if(i)for(s=function(e){return!e.type||Tt.test(e.type)},c=0;l[c];c++)if(!r||!L.nodeName(l[c],"script")||l[c].type&&"text/javascript"!==l[c].type.toLowerCase()){if(1===l[c].nodeType){var b=L.grep(l[c].getElementsByTagName("script"),s);l.splice.apply(l,[c+1,0].concat(b))}i.appendChild(l[c])}else r.push(l[c].parentNode?l[c].parentNode.removeChild(l[c]):l[c]);return l},cleanData:function(e){for(var t,n,i,r=L.cache,s=L.expando,a=L.event.special,o=L.support.deleteExpando,l=0;null!=(i=e[l]);l++)if((!i.nodeName||!L.noData[i.nodeName.toLowerCase()])&&(n=i[L.expando])){if(t=r[n]&&r[n][s],t&&t.events){for(var c in t.events)a[c]?L.event.remove(i,c):L.removeEvent(i,c,t.handle);t.handle&&(t.handle.elem=null)}o?delete i[L.expando]:i.removeAttribute&&i.removeAttribute(L.expando),delete r[n]}}});var St,Et,At,Nt=/alpha\([^)]*\)/i,Mt=/opacity=([^)]*)/,Dt=/([A-Z]|^ms)/g,$t=/^-?\d+(?:px)?$/i,It=/^-?\d/,Pt=/^([\-+])=([\-+.\de]+)/,Ot={position:"absolute",visibility:"hidden",display:"block"},Lt=["Left","Right"],Ft=["Top","Bottom"];L.fn.css=function(e,n){return 2===arguments.length&&n===t?this:L.access(this,e,n,!0,function(e,n,i){return i!==t?L.style(e,n,i):L.css(e,n)})},L.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=St(e,"opacity","opacity");return""===n?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":L.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,a,o=L.camelCase(n),l=e.style,c=L.cssHooks[o];if(n=L.cssProps[o]||o,i===t)return c&&"get"in c&&(s=c.get(e,!1,r))!==t?s:l[n];if(a=typeof i,"string"===a&&(s=Pt.exec(i))&&(i=+(s[1]+1)*+s[2]+parseFloat(L.css(e,n)),a="number"),!(null==i||"number"===a&&isNaN(i)||("number"!==a||L.cssNumber[o]||(i+="px"),c&&"set"in c&&(i=c.set(e,i))===t)))try{l[n]=i}catch(u){}}},css:function(e,n,i){var r,s;return n=L.camelCase(n),s=L.cssHooks[n],n=L.cssProps[n]||n,"cssFloat"===n&&(n="float"),s&&"get"in s&&(r=s.get(e,!0,i))!==t?r:St?St(e,n):t},swap:function(e,t,n){var i={};for(var r in t)i[r]=e.style[r],e.style[r]=t[r];n.call(e);for(r in t)e.style[r]=i[r]}}),L.curCSS=L.css,L.each(["height","width"],function(e,n){L.cssHooks[n]={get:function(e,i,r){var s;return i?0!==e.offsetWidth?y(e,n,r):(L.swap(e,Ot,function(){s=y(e,n,r)}),s):t},set:function(e,n){return $t.test(n)?(n=parseFloat(n),n>=0?n+"px":t):n}}}),L.support.opacity||(L.cssHooks.opacity={get:function(e,t){return Mt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=L.isNaN(t)?"":"alpha(opacity="+100*t+")",s=i&&i.filter||n.filter||"";n.zoom=1,t>=1&&""===L.trim(s.replace(Nt,""))&&(n.removeAttribute("filter"),i&&!i.filter)||(n.filter=Nt.test(s)?s.replace(Nt,r):s+" "+r)}}),L(function(){L.support.reliableMarginRight||(L.cssHooks.marginRight={get:function(e,t){var n;return L.swap(e,{display:"inline-block"},function(){n=t?St(e,"margin-right","marginRight"):e.style.marginRight}),n}})}),I.defaultView&&I.defaultView.getComputedStyle&&(Et=function(e,n){var i,r,s;return n=n.replace(Dt,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)?((s=r.getComputedStyle(e,null))&&(i=s.getPropertyValue(n),""!==i||L.contains(e.ownerDocument.documentElement,e)||(i=L.style(e,n))),i):t}),I.documentElement.currentStyle&&(At=function(e,t){var n,i=e.currentStyle&&e.currentStyle[t],r=e.runtimeStyle&&e.runtimeStyle[t],s=e.style;return!$t.test(i)&&It.test(i)&&(n=s.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left="fontSize"===t?"1em":i||0,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),""===i?"auto":i}),St=Et||At,L.expr&&L.expr.filters&&(L.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||!L.support.reliableHiddenOffsets&&"none"===(e.style.display||L.css(e,"display"))},L.expr.filters.visible=function(e){return!L.expr.filters.hidden(e)});var jt,zt,Ht=/%20/g,Ut=/\[\]$/,Bt=/\r?\n/g,Rt=/#.*$/,Wt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,qt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Vt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Yt=/^(?:GET|HEAD)$/,Kt=/^\/\//,Xt=/\?/,Gt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Jt=/^(?:select|textarea)/i,Zt=/\s+/,Qt=/([?&])_=[^&]*/,en=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,tn=L.fn.load,nn={},rn={},sn=["*/"]+["*"];try{jt=O.href}catch(an){jt=I.createElement("a"),jt.href="",jt=jt.href}zt=en.exec(jt.toLowerCase())||[],L.fn.extend({load:function(e,n,i){if("string"!=typeof e&&tn)return tn.apply(this,arguments);if(!this.length)return this;var r=e.indexOf(" ");if(r>=0){var s=e.slice(r,e.length);e=e.slice(0,r)}var a="GET";n&&(L.isFunction(n)?(i=n,n=t):"object"==typeof n&&(n=L.param(n,L.ajaxSettings.traditional),a="POST"));var o=this;return L.ajax({url:e,type:a,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),o.html(s?L("<div>").append(n.replace(Gt,"")).find(s):n)),i&&o.each(i,[n,t,e])}}),this},serialize:function(){return L.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?L.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Jt.test(this.nodeName)||qt.test(this.type))}).map(function(e,t){var n=L(this).val();return null==n?null:L.isArray(n)?L.map(n,function(e){return{name:t.name,value:e.replace(Bt,"\r\n")}}):{name:t.name,value:n.replace(Bt,"\r\n")}}).get()}}),L.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){L.fn[t]=function(e){return this.bind(t,e)}}),L.each(["get","post"],function(e,n){L[n]=function(e,i,r,s){return L.isFunction(i)&&(s=s||r,r=i,i=t),L.ajax({type:n,url:e,data:i,success:r,dataType:s})}}),L.extend({getScript:function(e,n){return L.get(e,t,n,"script")},getJSON:function(e,t,n){return L.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?w(e,L.ajaxSettings):(t=e,e=L.ajaxSettings),w(e,t),e},ajaxSettings:{url:jt,isLocal:Vt.test(zt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":sn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":L.parseJSON,"text xml":L.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:x(nn),ajaxTransport:x(rn),ajax:function(e,n){function i(e,n,i,a){if(2!==x){x=2,l&&clearTimeout(l),o=t,s=a||"",w.readyState=e>0?4:0;var c,h,b,y,_,T=n,S=i?k(p,w,i):t;if(e>=200&&300>e||304===e)if(p.ifModified&&((y=w.getResponseHeader("Last-Modified"))&&(L.lastModified[r]=y),(_=w.getResponseHeader("Etag"))&&(L.etag[r]=_)),304===e)T="notmodified",c=!0;else try{h=C(p,S),T="success",c=!0}catch(E){T="parsererror",b=E}else b=T,(!T||e)&&(T="error",0>e&&(e=0));w.status=e,w.statusText=""+(n||T),c?m.resolveWith(d,[h,T,w]):m.rejectWith(d,[w,T,b]),w.statusCode(v),v=t,u&&f.trigger("ajax"+(c?"Success":"Error"),[w,p,c?h:b]),g.resolveWith(d,[w,T]),u&&(f.trigger("ajaxComplete",[w,p]),--L.active||L.event.trigger("ajaxStop"))}}"object"==typeof e&&(n=e,e=t),n=n||{};var r,s,a,o,l,c,u,h,p=L.ajaxSetup({},n),d=p.context||p,f=d!==p&&(d.nodeType||d instanceof L)?L(d):L.event,m=L.Deferred(),g=L._Deferred(),v=p.statusCode||{},b={},y={},x=0,w={readyState:0,setRequestHeader:function(e,t){if(!x){var n=e.toLowerCase();e=y[n]=y[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return 2===x?s:null},getResponseHeader:function(e){var n;if(2===x){if(!a)for(a={};n=Wt.exec(s);)a[n[1].toLowerCase()]=n[2];n=a[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return x||(p.mimeType=e),this},abort:function(e){return e=e||"abort",o&&o.abort(e),i(0,e),this}};if(m.promise(w),w.success=w.done,w.error=w.fail,w.complete=g.done,w.statusCode=function(e){if(e){var t;if(2>x)for(t in e)v[t]=[v[t],e[t]];else t=e[w.status],w.then(t,t)}return this},p.url=((e||p.url)+"").replace(Rt,"").replace(Kt,zt[1]+"//"),p.dataTypes=L.trim(p.dataType||"*").toLowerCase().split(Zt),null==p.crossDomain&&(c=en.exec(p.url.toLowerCase()),p.crossDomain=!(!c||c[1]==zt[1]&&c[2]==zt[2]&&(c[3]||("http:"===c[1]?80:443))==(zt[3]||("http:"===zt[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=L.param(p.data,p.traditional)),_(nn,p,n,w),2===x)return!1;if(u=p.global,p.type=p.type.toUpperCase(),p.hasContent=!Yt.test(p.type),u&&0===L.active++&&L.event.trigger("ajaxStart"),!p.hasContent&&(p.data&&(p.url+=(Xt.test(p.url)?"&":"?")+p.data,delete p.data),r=p.url,p.cache===!1)){var T=L.now(),S=p.url.replace(Qt,"$1_="+T);p.url=S+(S===p.url?(Xt.test(p.url)?"&":"?")+"_="+T:"")}(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&w.setRequestHeader("Content-Type",p.contentType),p.ifModified&&(r=r||p.url,L.lastModified[r]&&w.setRequestHeader("If-Modified-Since",L.lastModified[r]),L.etag[r]&&w.setRequestHeader("If-None-Match",L.etag[r])),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+sn+"; q=0.01":""):p.accepts["*"]);for(h in p.headers)w.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(p.beforeSend.call(d,w,p)===!1||2===x))return w.abort(),!1;for(h in{success:1,error:1,complete:1})w[h](p[h]);if(o=_(rn,p,n,w)){w.readyState=1,u&&f.trigger("ajaxSend",[w,p]),p.async&&p.timeout>0&&(l=setTimeout(function(){w.abort("timeout")},p.timeout));try{x=1,o.send(b,i)}catch(E){2>x?i(-1,E):L.error(E)}}else i(-1,"No Transport");return w},param:function(e,n){var i=[],r=function(e,t){t=L.isFunction(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=L.ajaxSettings.traditional),L.isArray(e)||e.jquery&&!L.isPlainObject(e))L.each(e,function(){r(this.name,this.value)});else for(var s in e)T(s,e[s],n,r);return i.join("&").replace(Ht,"+")}}),L.extend({active:0,lastModified:{},etag:{}});var on=L.now(),ln=/(\=)\?(&|$)|\?\?/i;L.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return L.expando+"_"+on++}}),L.ajaxPrefilter("json jsonp",function(t,n,i){var r="application/x-www-form-urlencoded"===t.contentType&&"string"==typeof t.data;if("jsonp"===t.dataTypes[0]||t.jsonp!==!1&&(ln.test(t.url)||r&&ln.test(t.data))){var s,a=t.jsonpCallback=L.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o=e[a],l=t.url,c=t.data,u="$1"+a+"$2";return t.jsonp!==!1&&(l=l.replace(ln,u),t.url===l&&(r&&(c=c.replace(ln,u)),t.data===c&&(l+=(/\?/.test(l)?"&":"?")+t.jsonp+"="+a))),t.url=l,t.data=c,e[a]=function(e){s=[e]},i.always(function(){e[a]=o,s&&L.isFunction(o)&&e[a](s[0])}),t.converters["script json"]=function(){return s||L.error(a+" was not called"),s[0]},t.dataTypes[0]="json","script"}}),L.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return L.globalEval(e),e}}}),L.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),L.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=I.head||I.getElementsByTagName("head")[0]||I.documentElement;return{send:function(r,s){n=I.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,r){(r||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=t,r||s(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var cn,un=e.ActiveXObject?function(){for(var e in cn)cn[e](0,1)}:!1,hn=0;L.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&S()||E()}:S,function(e){L.extend(L.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(L.ajaxSettings.xhr()),L.support.ajax&&L.ajaxTransport(function(n){if(!n.crossDomain||L.support.cors){var i;return{send:function(r,s){var a,o,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(o in n.xhrFields)l[o]=n.xhrFields[o];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(o in r)l.setRequestHeader(o,r[o])}catch(c){}l.send(n.hasContent&&n.data||null),i=function(e,r){var o,c,u,h,p;try{if(i&&(r||4===l.readyState))if(i=t,a&&(l.onreadystatechange=L.noop,un&&delete cn[a]),r)4!==l.readyState&&l.abort();else{o=l.status,u=l.getAllResponseHeaders(),h={},p=l.responseXML,p&&p.documentElement&&(h.xml=p),h.text=l.responseText;try{c=l.statusText}catch(d){c=""}o||!n.isLocal||n.crossDomain?1223===o&&(o=204):o=h.text?200:404}}catch(f){r||s(-1,f)}h&&s(o,c,h,u)},n.async&&4!==l.readyState?(a=++hn,un&&(cn||(cn={},L(e).unload(un)),cn[a]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});var pn,dn,fn,mn,gn={},vn=/^(?:toggle|show|hide)$/,bn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,yn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];L.fn.extend({show:function(e,t,n){var i,r;if(e||0===e)return this.animate(M("show",3),e,t,n);for(var s=0,a=this.length;a>s;s++)i=this[s],i.style&&(r=i.style.display,L._data(i,"olddisplay")||"none"!==r||(r=i.style.display=""),""===r&&"none"===L.css(i,"display")&&L._data(i,"olddisplay",D(i.nodeName)));for(s=0;a>s;s++)i=this[s],i.style&&(r=i.style.display,(""===r||"none"===r)&&(i.style.display=L._data(i,"olddisplay")||""));return this},hide:function(e,t,n){if(e||0===e)return this.animate(M("hide",3),e,t,n);for(var i=0,r=this.length;r>i;i++)if(this[i].style){var s=L.css(this[i],"display");"none"===s||L._data(this[i],"olddisplay")||L._data(this[i],"olddisplay",s)}for(i=0;r>i;i++)this[i].style&&(this[i].style.display="none");return this},_toggle:L.fn.toggle,toggle:function(e,t,n){var i="boolean"==typeof e;return L.isFunction(e)&&L.isFunction(t)?this._toggle.apply(this,arguments):null==e||i?this.each(function(){var t=i?e:L(this).is(":hidden");L(this)[t?"show":"hide"]()}):this.animate(M("toggle",3),e,t,n),this},fadeTo:function(e,t,n,i){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=L.speed(t,n,i);return L.isEmptyObject(e)?this.each(r.complete,[!1]):(e=L.extend({},e),this[r.queue===!1?"each":"queue"](function(){r.queue===!1&&L._mark(this);var t,n,i,s,a,o,l,c,u,h=L.extend({},r),p=1===this.nodeType,d=p&&L(this).is(":hidden");h.animatedProperties={};for(i in e){if(t=L.camelCase(i),i!==t&&(e[t]=e[i],delete e[i]),n=e[t],L.isArray(n)?(h.animatedProperties[t]=n[1],n=e[t]=n[0]):h.animatedProperties[t]=h.specialEasing&&h.specialEasing[t]||h.easing||"swing","hide"===n&&d||"show"===n&&!d)return h.complete.call(this);!p||"height"!==t&&"width"!==t||(h.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===L.css(this,"display")&&"none"===L.css(this,"float")&&(L.support.inlineBlockNeedsLayout?(s=D(this.nodeName),"inline"===s?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)):this.style.display="inline-block"))}null!=h.overflow&&(this.style.overflow="hidden");for(i in e)a=new L.fx(this,h,i),n=e[i],vn.test(n)?a["toggle"===n?d?"show":"hide":n]():(o=bn.exec(n),l=a.cur(),o?(c=parseFloat(o[2]),u=o[3]||(L.cssNumber[i]?"":"px"),"px"!==u&&(L.style(this,i,(c||1)+u),l=(c||1)/a.cur()*l,L.style(this,i,l+u)),o[1]&&(c=("-="===o[1]?-1:1)*c+l),a.custom(l,c,u)):a.custom(l,n,""));return!0}))},stop:function(e,t){return e&&this.queue([]),this.each(function(){var e=L.timers,n=e.length;for(t||L._unmark(!0,this);n--;)e[n].elem===this&&(t&&e[n](!0),e.splice(n,1))}),t||this.dequeue(),this}}),L.each({slideDown:M("show",1),slideUp:M("hide",1),slideToggle:M("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){L.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),L.extend({speed:function(e,t,n){var i=e&&"object"==typeof e?L.extend({},e):{complete:n||!n&&t||L.isFunction(e)&&e,duration:e,easing:n&&t||t&&!L.isFunction(t)&&t};return i.duration=L.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in L.fx.speeds?L.fx.speeds[i.duration]:L.fx.speeds._default,i.old=i.complete,i.complete=function(e){L.isFunction(i.old)&&i.old.call(this),i.queue!==!1?L.dequeue(this):e!==!1&&L._unmark(this)},i},easing:{linear:function(e,t,n,i){return n+i*e},swing:function(e,t,n,i){return(-Math.cos(e*Math.PI)/2+.5)*i+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),L.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(L.fx.step[this.prop]||L.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=L.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,t,n){function i(e){return r.step(e)}var r=this,s=L.fx;this.startTime=mn||A(),this.start=e,this.end=t,this.unit=n||this.unit||(L.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,i.elem=this.elem,i()&&L.timers.push(i)&&!fn&&(fn=setInterval(s.tick,s.interval))},show:function(){this.options.orig[this.prop]=L.style(this.elem,this.prop),this.options.show=!0,this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),L(this.elem).show()},hide:function(){this.options.orig[this.prop]=L.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,i=mn||A(),r=!0,s=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(r=!1);if(r){if(null==a.overflow||L.support.shrinkWrapBlocks||L.each(["","X","Y"],function(e,t){s.style["overflow"+t]=a.overflow[e]}),a.hide&&L(s).hide(),a.hide||a.show)for(var o in a.animatedProperties)L.style(s,o,a.orig[o]);a.complete.call(s)}return!1}return 1/0==a.duration?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=L.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},L.extend(L.fx,{tick:function(){for(var e=L.timers,t=0;e.length>t;++t)e[t]()||e.splice(t--,1);e.length||L.fx.stop()},interval:13,stop:function(){clearInterval(fn),fn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){L.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=("width"===e.prop||"height"===e.prop?Math.max(0,e.now):e.now)+e.unit:e.elem[e.prop]=e.now}}}),L.expr&&L.expr.filters&&(L.expr.filters.animated=function(e){return L.grep(L.timers,function(t){return e===t.elem}).length});var xn=/^t(?:able|d|h)$/i,_n=/^(?:body|html)$/i;L.fn.offset="getBoundingClientRect"in I.documentElement?function(e){var t,n=this[0];if(e)return this.each(function(t){L.offset.setOffset(this,e,t)});if(!n||!n.ownerDocument)return null;if(n===n.ownerDocument.body)return L.offset.bodyOffset(n);try{t=n.getBoundingClientRect()}catch(i){}var r=n.ownerDocument,s=r.documentElement;if(!t||!L.contains(s,n))return t?{top:t.top,left:t.left}:{top:0,left:0};var a=r.body,o=$(r),l=s.clientTop||a.clientTop||0,c=s.clientLeft||a.clientLeft||0,u=o.pageYOffset||L.support.boxModel&&s.scrollTop||a.scrollTop,h=o.pageXOffset||L.support.boxModel&&s.scrollLeft||a.scrollLeft,p=t.top+u-l,d=t.left+h-c;return{top:p,left:d}}:function(e){var t=this[0];if(e)return this.each(function(t){L.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return L.offset.bodyOffset(t);L.offset.initialize();for(var n,i=t.offsetParent,r=t,s=t.ownerDocument,a=s.documentElement,o=s.body,l=s.defaultView,c=l?l.getComputedStyle(t,null):t.currentStyle,u=t.offsetTop,h=t.offsetLeft;(t=t.parentNode)&&t!==o&&t!==a&&(!L.offset.supportsFixedPosition||"fixed"!==c.position);)n=l?l.getComputedStyle(t,null):t.currentStyle,u-=t.scrollTop,h-=t.scrollLeft,t===i&&(u+=t.offsetTop,h+=t.offsetLeft,!L.offset.doesNotAddBorder||L.offset.doesAddBorderForTableAndCells&&xn.test(t.nodeName)||(u+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),r=i,i=t.offsetParent),L.offset.subtractsBorderForOverflowNotVisible&&"visible"!==n.overflow&&(u+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),c=n;return("relative"===c.position||"static"===c.position)&&(u+=o.offsetTop,h+=o.offsetLeft),L.offset.supportsFixedPosition&&"fixed"===c.position&&(u+=Math.max(a.scrollTop,o.scrollTop),h+=Math.max(a.scrollLeft,o.scrollLeft)),{top:u,left:h}},L.offset={initialize:function(){var e,t,n,i=I.body,r=I.createElement("div"),s=parseFloat(L.css(i,"marginTop"))||0,a="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";L.extend(r.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),r.innerHTML=a,i.insertBefore(r,i.firstChild),e=r.firstChild,t=e.firstChild,n=e.nextSibling.firstChild.firstChild,this.doesNotAddBorder=5!==t.offsetTop,this.doesAddBorderForTableAndCells=5===n.offsetTop,t.style.position="fixed",t.style.top="20px",this.supportsFixedPosition=20===t.offsetTop||15===t.offsetTop,t.style.position=t.style.top="",e.style.overflow="hidden",e.style.position="relative",this.subtractsBorderForOverflowNotVisible=-5===t.offsetTop,this.doesNotIncludeMarginInBodyOffset=i.offsetTop!==s,i.removeChild(r),L.offset.initialize=L.noop},bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return L.offset.initialize(),L.offset.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(L.css(e,"marginTop"))||0,n+=parseFloat(L.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var i=L.css(e,"position");"static"===i&&(e.style.position="relative");var r,s,a=L(e),o=a.offset(),l=L.css(e,"top"),c=L.css(e,"left"),u=("absolute"===i||"fixed"===i)&&L.inArray("auto",[l,c])>-1,h={},p={};u?(p=a.position(),r=p.top,s=p.left):(r=parseFloat(l)||0,s=parseFloat(c)||0),L.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(h.top=t.top-o.top+r),null!=t.left&&(h.left=t.left-o.left+s),"using"in t?t.using.call(e,h):a.css(h)}},L.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),i=_n.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(L.css(e,"marginTop"))||0,n.left-=parseFloat(L.css(e,"marginLeft"))||0,i.top+=parseFloat(L.css(t[0],"borderTopWidth"))||0,i.left+=parseFloat(L.css(t[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||I.body;e&&!_n.test(e.nodeName)&&"static"===L.css(e,"position");)e=e.offsetParent;return e})}}),L.each(["Left","Top"],function(e,n){var i="scroll"+n;L.fn[i]=function(n){var r,s;return n===t?(r=this[0])?(s=$(r),s?"pageXOffset"in s?s[e?"pageYOffset":"pageXOffset"]:L.support.boxModel&&s.document.documentElement[i]||s.document.body[i]:r[i]):null:this.each(function(){s=$(this),s?s.scrollTo(e?L(s).scrollLeft():n,e?n:L(s).scrollTop()):this[i]=n})}}),L.each(["Height","Width"],function(e,n){var i=n.toLowerCase();L.fn["inner"+n]=function(){var e=this[0];return e&&e.style?parseFloat(L.css(e,i,"padding")):null},L.fn["outer"+n]=function(e){var t=this[0];return t&&t.style?parseFloat(L.css(t,i,e?"margin":"border")):null},L.fn[i]=function(e){var r=this[0];if(!r)return null==e?null:this;if(L.isFunction(e))return this.each(function(t){var n=L(this);n[i](e.call(this,t,n[i]()))});if(L.isWindow(r)){var s=r.document.documentElement["client"+n],a=r.document.body;return"CSS1Compat"===r.document.compatMode&&s||a&&a["client"+n]||s}if(9===r.nodeType)return Math.max(r.documentElement["client"+n],r.body["scroll"+n],r.documentElement["scroll"+n],r.body["offset"+n],r.documentElement["offset"+n]);if(e===t){var o=L.css(r,i),l=parseFloat(o);return L.isNaN(l)?o:l}return this.css(i,"string"==typeof e?e:e+"px")}}),e.jQuery=e.$=L})(window),function(e,t){function n(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}function i(t,i){var r=t.nodeName.toLowerCase();if("area"===r){var s,a=t.parentNode,o=a.name;return t.href&&o&&"map"===a.nodeName.toLowerCase()?(s=e("img[usemap=#"+o+"]")[0],!!s&&n(s)):!1}return(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"==r?t.href||i:i)&&n(t)}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.8.18",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each(function(){var i=this;setTimeout(function(){e(i).focus(),n&&n.call(i)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,s=e(this[0]);s.length&&s[0]!==document;){if(i=s.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(s.css("zIndex"),10),!isNaN(r)&&0!==r))return r;s=s.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(n,i){function r(t,n,i,r){return e.each(s,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,i&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),r&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var s="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,r(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r=e.ui[t].prototype;for(var s in i)r.plugins[s]=r.plugins[s]||[],r.plugins[s].push([n,i[s]])},call:function(e,t,n){var i=e.plugins[t];if(i&&e.element[0].parentNode)for(var r=0;i.length>r;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)},isOverAxis:function(e,t,n){return e>t&&t+n>e},isOver:function(t,n,i,r,s,a){return e.ui.isOverAxis(t,i,s)&&e.ui.isOverAxis(n,r,a)}}))}(jQuery),function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var i,r=0;null!=(i=t[r]);r++)try{e(i).triggerHandler("remove")}catch(s){}n(t)}}else{var i=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),i.call(e(this),t,n)})}}e.widget=function(t,n,i){var r,s=t.split(".")[0];t=t.split(".")[1],r=s+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r]=function(n){return!!e.data(n,t)},e[s]=e[s]||{},e[s][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var a=new n;a.options=e.extend(!0,{},a.options),e[s][t].prototype=e.extend(!0,a,{namespace:s,widgetName:t,widgetEventPrefix:e[s][t].prototype.widgetEventPrefix||t,widgetBaseClass:r},i),e.widget.bridge(t,e[s][t])},e.widget.bridge=function(n,i){e.fn[n]=function(r){var s="string"==typeof r,a=Array.prototype.slice.call(arguments,1),o=this;return r=!s&&a.length?e.extend.apply(null,[!0,r].concat(a)):r,s&&"_"===r.charAt(0)?o:(s?this.each(function(){var i=e.data(this,n),s=i&&e.isFunction(i[r])?i[r].apply(i,a):i;return s!==i&&s!==t?(o=s,!1):void 0}):this.each(function(){var t=e.data(this,n);t?t.option(r||{})._init():e.data(this,n,new i(r,this))}),o)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);
var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(n,i){var r=n;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof n){if(i===t)return this.options[n];r={},r[n]=i}return this._setOptions(r),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,i){var r,s,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent,s)for(r in s)r in n||(n[r]=s[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.call(this.element[0],n,i)===!1||n.isDefaultPrevented())}}}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1==n.which,s="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return r&&!s&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget()[n?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var r=null,s=this;if(e(t.target).parents().each(function(){return e.data(this,i.widgetName+"-item")==s?(r=e(this),!1):void 0}),e.data(t.target,i.widgetName+"-item")==s&&(r=e(t.target)),!r)return!1;if(this.options.handle&&!n){var a=!1;if(e(this.options.handle,r).find("*").andSelf().each(function(){this==t.target&&(a=!0)}),!a)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,i){var r=this.options,s=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("activate",t,s._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var n=this.options,i=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),i!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var r=this.items.length-1;r>=0;r--){var s=this.items[r],a=s.item[0],o=this._intersectsWithPointer(s);if(o&&a!=this.currentItem[0]&&this.placeholder[1==o?"next":"prev"]()[0]!=a&&!e.ui.contains(this.placeholder[0],a)&&("semi-dynamic"==this.options.type?!e.ui.contains(this.element[0],a):!0)){if(this.direction=1==o?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=i.placeholder.offset();i.reverting=!0,e(this.helper).animate({left:r.left-this.offset.parent.left-i.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-i.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("deactivate",null,t._uiHash(this)),this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",null,t._uiHash(this)),this.containers[n].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,s=e.left,a=s+e.width,o=e.top,l=o+e.height,c=this.offset.click.top,u=this.offset.click.left,h=i+c>o&&l>i+c&&t+u>s&&a>t+u;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:t+this.helperProportions.width/2>s&&a>n-this.helperProportions.width/2&&i+this.helperProportions.height/2>o&&l>r-this.helperProportions.height/2},_intersectsWithPointer:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=n&&i,s=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return r?this.floating?a&&"right"==a||"down"==s?2:1:s&&("down"==s?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"==s&&i||"left"==s&&!i:r&&("down"==r&&n||"up"==r&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],i=[],r=this._connectWith();if(r&&t)for(var s=r.length-1;s>=0;s--)for(var a=e(r[s]),o=a.length-1;o>=0;o--){var l=e.data(a[o],this.widgetName);l&&l!=this&&!l.options.disabled&&i.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=i.length-1;s>=0;s--)i[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data("+this.widgetName+"-item)"),t=0;this.items.length>t;t++)for(var n=0;e.length>n;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],r=this._connectWith();if(r&&this.ready)for(var s=r.length-1;s>=0;s--)for(var a=e(r[s]),o=a.length-1;o>=0;o--){var l=e.data(a[o],this.widgetName);l&&l!=this&&!l.options.disabled&&(i.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var s=i.length-1;s>=0;s--)for(var c=i[s][1],u=i[s][0],o=0,h=u.length;h>o;o++){var p=e(u[o]);p.data(this.widgetName+"-item",c),n.push({item:p,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var i=this.items[n];if(i.instance==this.currentContainer||!this.currentContainer||i.item[0]==this.currentItem[0]){var r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item;t||(i.width=r.outerWidth(),i.height=r.outerHeight());var s=r.offset();i.left=s.left,i.top=s.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){var n=t||this,i=n.options;if(!i.placeholder||i.placeholder.constructor==String){var r=i.placeholder;i.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(r||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(t.style.visibility="hidden"),t},update:function(e,t){(!r||i.forcePlaceholderSize)&&(t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}}n.placeholder=e(i.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),i.placeholder.update(n,n.placeholder)},_contactContainers:function(t){for(var n=null,i=null,r=this.containers.length-1;r>=0;r--)if(!e.ui.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(n&&e.ui.contains(this.containers[r].element[0],n.element[0]))continue;n=this.containers[r],i=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(n)if(1===this.containers.length)this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1;else if(this.currentContainer!=this.containers[i]){for(var s=1e4,a=null,o=this.positionAbs[this.containers[i].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(e.ui.contains(this.containers[i].element[0],this.items[l].item[0])){var c=this.items[l][this.containers[i].floating?"left":"top"];s>Math.abs(c-o)&&(s=Math.abs(c-o),a=this.items[l])}if(!a&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[i],a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[i].element,!0),this._trigger("change",t,this._uiHash()),this.containers[i]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"==n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!=n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(""==i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],i=e(t.containment).offset(),r="hidden"!=e(n).css("overflow");this.containment=[i.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,i.left+(r?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(r?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"==t?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),s=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:r.scrollTop())*i),left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:r.scrollLeft())*i)}},_generatePosition:function(t){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,a=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid)){var o=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1];a=this.containment?o-this.offset.click.top<this.containment[1]||o-this.offset.click.top>this.containment[3]?o-this.offset.click.top<this.containment[1]?o+n.grid[1]:o-n.grid[1]:o:o;var l=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2]?l-this.offset.click.left<this.containment[0]?l+n.grid[0]:l-n.grid[0]:l:l}return{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this,s=this.counter;window.setTimeout(function(){s==r.counter&&r.refreshPositions(!i)},0)},_clear:function(t,n){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var r in this._storedCSS)("auto"==this._storedCSS[r]||"static"==this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&i.push(function(e){this._trigger("update",e,this._uiHash())}),!e.ui.contains(this.element[0],this.currentItem[0])){n||i.push(function(e){this._trigger("remove",e,this._uiHash())});for(var r=this.containers.length-1;r>=0;r--)e.ui.contains(this.containers[r].element[0],this.currentItem[0])&&!n&&(i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[r])),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[r])))}for(var r=this.containers.length-1;r>=0;r--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var r=0;i.length>r;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}if(n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(var r=0;i.length>r;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.18"})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var n=this,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=i.values&&i.values.length||1,o=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(i.range===!0&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:"")));for(var l=r.length;a>l;l+=1)o.push(s);this.handles=r.add(e(o.join("")).appendTo(n.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){i.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(i){var r,s,a,o,l=e(this).data("index.ui-slider-handle");if(!n.options.disabled){switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!n._keySliding&&(n._keySliding=!0,e(this).addClass("ui-state-active"),r=n._start(i,l),r===!1))return}switch(o=n.options.step,s=a=n.options.values&&n.options.values.length?n.values(l):n.value(),i.keyCode){case e.ui.keyCode.HOME:a=n._valueMin();break;case e.ui.keyCode.END:a=n._valueMax();break;case e.ui.keyCode.PAGE_UP:a=n._trimAlignValue(s+(n._valueMax()-n._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:a=n._trimAlignValue(s-(n._valueMax()-n._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===n._valueMax())return;a=n._trimAlignValue(s+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===n._valueMin())return;a=n._trimAlignValue(s-o)}n._slide(i,l,a)}}).keyup(function(t){var i=e(this).data("index.ui-slider-handle");n._keySliding&&(n._keySliding=!1,n._stop(t,i),n._change(t,i),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n,i,r,s,a,o,l,c,u,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,a=this,this.handles.each(function(t){var n=Math.abs(i-a.values(t));r>n&&(r=n,s=e(this),o=t)}),h.range===!0&&this.values(1)===h.min&&(o+=1,s=e(this.handles[o])),l=this._start(t,o),l===!1?!1:(this._mouseSliding=!0,a._handleIndex=o,s.addClass("ui-state-active").focus(),c=s.offset(),u=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:t.pageX-c.left-s.width()/2,top:t.pageY-c.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"
},_normValueFromMouse:function(e){var t,n,i,r,s;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),s=this._valueMin()+i*r,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,r,s;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(r=this.values(),r[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:r}),i=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,n){var i,r,s;if(arguments.length>1)this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);else{if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,r=arguments[0],s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(r[s]),this._change(null,s);this._refreshValue()}},_setOption:function(t,n){var i,r=0;switch(e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;r>i;i+=1)this._change(null,i);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(n=this.options.values.slice(),i=0;n.length>i;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,r,s,a=this.options.range,o=this.options,l=this,c=this._animateOff?!1:o.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(i){t=100*((l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[c?"animate":"css"](u,o.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:t+"%"},o.animate),1===i&&l.range[c?"animate":"css"]({width:t-n+"%"},{queue:!1,duration:o.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:t+"%"},o.animate),1===i&&l.range[c?"animate":"css"]({height:t-n+"%"},{queue:!1,duration:o.animate}))),n=t}):(i=this.value(),r=this._valueMin(),s=this._valueMax(),t=s!==r?100*((i-r)/(s-r)):0,u["horizontal"===l.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[c?"animate":"css"](u,o.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:t+"%"},o.animate),"max"===a&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:o.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:t+"%"},o.animate),"max"===a&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:o.animate}))}}),e.extend(e.ui.slider,{version:"1.8.18"})}(jQuery),function(e){var t=function(){var t=e.documentMode;return"onhashchange"in e&&(void 0===t||t>7)}();L.Hash=function(e){this.onHashChange=L.Util.bind(this.onHashChange,this),e&&this.init(e)},L.Hash.prototype={map:null,lastHash:null,parseHash:function(e){0===e.indexOf("#")&&(e=e.substr(1));var t=e.split("/");if(3==t.length){var n=parseInt(t[0],10),i=parseFloat(t[1]),r=parseFloat(t[2]);return isNaN(n)||isNaN(i)||isNaN(r)?!1:{center:new L.LatLng(i,r),zoom:n}}return!1},formatHash:function(e){var t=e.getCenter(),n=e.getZoom(),i=Math.max(0,Math.ceil(Math.log(n)/Math.LN2));return"#"+[n,t.lat.toFixed(i),t.lng.toFixed(i)].join("/")},init:function(e){this.map=e,this.lastHash=null,this.onHashChange(),this.isListening||this.startListening()},remove:function(){this.changeTimeout&&clearTimeout(this.changeTimeout),this.isListening&&this.stopListening(),this.map=null},onMapMove:function(){if(this.movingMap||!this.map._loaded)return!1;var e=this.formatHash(this.map);this.lastHash!=e&&(location.replace(e),this.lastHash=e)},movingMap:!1,update:function(){var e=location.hash;if(e!==this.lastHash){var t=this.parseHash(e);t?(this.movingMap=!0,this.map.setView(t.center,t.zoom),this.movingMap=!1):this.onMapMove(this.map)}},changeDefer:100,changeTimeout:null,onHashChange:function(){if(!this.changeTimeout){var e=this;this.changeTimeout=setTimeout(function(){e.update(),e.changeTimeout=null},this.changeDefer)}},isListening:!1,hashChangeInterval:null,startListening:function(){this.map.on("moveend",this.onMapMove,this),t?L.DomEvent.addListener(e,"hashchange",this.onHashChange):(clearInterval(this.hashChangeInterval),this.hashChangeInterval=setInterval(this.onHashChange,50)),this.isListening=!0},stopListening:function(){this.map.off("moveend",this.onMapMove,this),t?L.DomEvent.removeListener(e,"hashchange",this.onHashChange):clearInterval(this.hashChangeInterval),this.isListening=!1}},L.hash=function(e){return new L.Hash(e)},L.Map.prototype.addHash=function(){this._hash=L.hash(this)},L.Map.prototype.removeHash=function(){this._hash.remove()}}(window),function(){function e(e){return 10>e?"0"+e:e}function t(e){var t=0>e?"-":"+";return e=Math.abs(e),t+(10>e?"0"+e:e)}function n(e){return 10>e?"00"+e:100>e?"0"+e:e}function i(e){var t=0>e?"-":"+";return e=Math.abs(e),t+(10>e?"000"+e:100>e?"00"+e:1e3>e?"0"+e:e)}function r(e){if("number"==typeof e)return[e,e in s.offsetToTz?s.offsetToTz[e][0]:""];var t=parseInt(e,10);return isNaN(t)?[s.tzToOffset[e],e]:(e=(0>t?1:-1)*(60*Math.floor(Math.abs(t)/100)+Math.abs(t)%100),[e,e in s.offsetToTz?s.offsetToTz[e][0]:""])}var s="undefined"!=typeof exports?exports:{};s.tzToOffset={ACDT:-630,ACST:-570,ACT:-480,ADT:180,AEDT:-660,AEST:-600,AFT:-270,AKDT:480,AKST:540,AMST:-300,AMT:-240,ART:180,AST:-240,AWDT:-540,AWST:-480,AZOST:60,AZT:-240,BDT:-480,BIOT:-360,BIT:720,BOT:240,BRT:180,BST:-60,BTT:-360,CAT:-120,CCT:-390,CDT:300,CEDT:-120,CEST:-120,CET:-60,CHAST:-765,ChST:-600,CIST:480,CKT:600,CLST:180,CLT:240,COST:240,COT:300,CST:-480,CST:360,CVT:60,CXT:-420,DFT:-60,EAST:360,EAT:-180,ECT:240,ECT:300,EDT:240,EEDT:-180,EEST:-180,EET:-120,EST:300,FJT:-720,FKST:240,GALT:360,GET:-240,GFT:180,GILT:-720,GIT:540,GMT:0,GST:120,GYT:240,HADT:540,HAST:600,HKT:-480,HMT:-300,HST:600,IRKT:-480,IRST:-210,IST:-120,IST:-330,IST:-60,JST:-540,KRAT:-420,KST:-540,LHST:-630,LINT:-840,MAGT:-660,MDT:360,MIT:570,MSD:-240,MSK:-180,MST:-390,MST:-480,MST:420,MUT:-240,NDT:150,NFT:-690,NPT:-345,NST:210,NT:210,NZST:-720,NZDT:-780,OMST:-360,PDT:420,PETT:-720,PHOT:-780,PKT:-300,PST:-480,PST:480,RET:-240,SAMT:-240,SAST:-120,SBT:-660,SCT:-240,SLT:-330,SST:-480,SST:660,TAHT:600,THA:-420,UTC:0,UYST:120,UYT:180,VET:270,VLAT:-600,WAT:-60,WEDT:-60,WEST:-60,YAKT:-540,YEKT:-300},s.offsetToTz={720:["BIT"],660:["SST"],600:["HST","CKT","HAST","TAHT"],570:["MIT"],540:["AKST","GIT","HADT"],480:["PST","AKDT","CIST"],420:["MST","PDT"],360:["CST","EAST","GALT","MDT"],300:["EST","CDT","COT","ECT"],270:["VET"],240:["ECT","AST","BOT","CLT","COST","EDT","FKST","GYT"],210:["NT","NST"],180:["BRT","ADT","ART","CLST","GFT","UYT"],150:["NDT"],120:["GST","UYST"],60:["AZOST","CVT"],0:["UTC","GMT"],"-60":["CET","BST","DFT","IST","WAT","WEDT","WEST"],"-120":["EET","CAT","CEDT","CEST","IST","SAST"],"-180":["MSK","AST","AST","EAT","EEDT","EEST"],"-210":["IRST"],"-240":["AST","AMT","AZT","GET","MSD","MUT","RET","SAMT","SCT"],"-270":["AFT"],"-300":["AMST","HMT","PKT","YEKT"],"-330":["IST","SLT"],"-345":["NPT"],"-360":["BIOT","BST","BTT","OMST"],"-390":["CCT","MST"],"-420":["CXT","KRAT","THA"],"-480":["ACT","AWST","BDT","CST","HKT","IRKT","MST","PST","SST"],"-540":["AWDT","JST","KST","YAKT"],"-570":["ACST"],"-600":["AEST","ChST","VLAT"],"-630":["ACDT","LHST"],"-660":["AEDT","MAGT","SBT"],"-690":["NFT"],"-720":["FJT","GILT","PETT","NZST"],"-765":["CHAST"],"-780":["PHOT","NZDT"],"-840":["LINT"]},s.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s.months=["January","February","March","April","May","June","July","August","September","October","November","December"],s.monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s.intervals=[function(e){return 1!==e?"years":"year"},function(e){return 1!==e?"months":"month"},function(e){return 1!==e?"weeks":"week"},function(e){return 1!==e?"days":"day"},function(e){return 1!==e?"hours":"hour"},function(e){return 1!==e?"minutes":"minute"},function(e){return 1!==e?"seconds":"second"}],s.intervalFormats={ago:"% ago","in":"in %"},s.ordinals=function(e){switch(e%10){case 1:return 11!==e%100?"st":"th";case 2:return 12!==e%100?"nd":"th";case 3:return 13!==e%100?"rd":"th";default:return"th"}},Date.prototype.interval=function(e){var t=this,n=t>e;n&&(t=e,e=this);var i=[e.getUTCFullYear()-t.getUTCFullYear(),e.getUTCMonth()-t.getUTCMonth(),0,e.getUTCDate()-t.getUTCDate(),e.getUTCHours()-t.getUTCHours(),e.getUTCMinutes()-t.getUTCMinutes(),e.getUTCSeconds()-t.getUTCSeconds()];0>i[6]&&(i[5]--,i[6]+=60),0>i[5]&&(i[4]--,i[5]+=60),0>i[4]&&(i[3]--,i[4]+=24),0>i[3]&&(i[1]--,i[3]+=t.getUTCDaysOfMonth()),0>i[1]&&(i[0]--,i[1]+=12),i[2]=0|i[3]/7,i[3]-=7*i[2];for(var r=[],a=0;i.length>a;a++)i[a]&&r.push(i[a]+" "+s.intervals[a](i[a]));return r},Date.prototype.format=function(a,o){var l=this.getTime();if(void 0===o)o=this.getTimezone(),u=this.getTimezoneName();else{var c=r(o);o=c[0];var u=c[1]}this.setTime(l-6e4*o);for(var h="",p=0;a.length>p;p++)switch(a.charAt(p)){case"d":h+=e(this.getUTCDate());break;case"D":h+=s.weekdaysShort[this.getUTCDay()];break;case"j":h+=this.getUTCDate();break;case"l":h+=s.weekdays[this.getUTCDay()];break;case"N":h+=this.getUTCDay()||7;break;case"S":h+=s.ordinals(this.getUTCDate());break;case"w":h+=this.getUTCDay();break;case"z":h+=this.getUTCDayOfYear();break;case"W":h+=e(this.getUTCISOWeek());break;case"F":h+=s.months[this.getUTCMonth()];break;case"m":h+=e(this.getUTCMonth()+1);break;case"M":h+=s.monthsShort[this.getUTCMonth()];break;case"n":h+=this.getUTCMonth()+1;break;case"t":h+=this.getUTCDaysOfMonth();break;case"L":h+=this.isLeapYear()?1:0;break;case"o":h+=this.getUTCISOFullYear();break;case"Y":h+=this.getUTCFullYear();break;case"y":h+=e(this.getUTCFullYear()%100);break;case"a":h+=this.getUTCHours()>=12?"pm":"am";break;case"A":h+=this.getUTCHours()>=12?"PM":"AM";break;case"g":h+=this.getUTCHours()%12||12;break;case"G":h+=this.getUTCHours();break;case"h":h+=e(this.getUTCHours()%12||12);break;case"H":h+=e(this.getUTCHours());break;case"i":h+=e(this.getUTCMinutes());break;case"s":h+=e(this.getUTCSeconds());break;case"u":h+=n(this.getUTCMilliseconds());break;case"O":h+=i((0>o?1:-1)*(100*Math.floor(Math.abs(o)/60)+Math.abs(o)%60));break;case"P":h+=t((0>o?1:-1)*Math.floor(Math.abs(o)/60))+":"+e(Math.abs(o)%60);break;case"T":h+=u;break;case"Z":h+=60*-o;break;case"c":this.setTime(l),h+=this.format("Y-m-d\\TH:i:sP",o);break;case"r":this.setTime(l),h+=this.format("D, d M y H:i:s O",o);break;case"U":h+=Math.floor(this.getTime()/1e3);break;case"\\":void 0!==a.charAt(++p)&&(h+=a.charAt(p));break;default:h+=a.charAt(p)}return this.setTime(l),h},Date.prototype.isLeapYear=function(){var e=this.getUTCFullYear();return 0===e%400||0===e%4&&0!==e%100},Date.prototype.getUTCISOWeek=function(){var e=new Date(this);return e.setUTCDate(e.getUTCDate()-(e.getUTCDay()||7)+4),Math.ceil((e.getTime()-Date.UTC(e.getUTCFullYear(),0))/864e5/7)},Date.prototype.getUTCISOFullYear=function(){var e=new Date(this);return e.setUTCDate(e.getUTCDate()-(e.getUTCDay()||7)+4),e.getUTCFullYear()},Date.prototype.getUTCDaysOfMonth=function(){var e=new Date(this);return e.setUTCDate(1),e.setUTCMonth(e.getUTCMonth()+1),e.setUTCDate(0),e.getUTCDate()},Date.prototype.getUTCDayOfYear=function(){return Math.floor((this.getTime()-Date.UTC(this.getUTCFullYear(),0))/864e5)},Date.prototype.getTimezone=function(){if(!("_tz"in this)){var e=(""+new Date).match(/([A-Z]{3,4}|NT|ChST)(?![-\+])/);e&&e[1]?this.setTimezone(e[1]):this.setTimezone((new Date).getTimezoneOffset())}return this._tz},Date.prototype.getTimezoneName=function(){return this.getTimezone(),this._tzName},Date.prototype.setTimezone=function(e){var t=r(e);this._tz=t[0],this._tzName=t[1]}}(),require=function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var a="function"==typeof require&&require;if(!s&&a)return a(n,!0);if(r)return r(n,!0);throw Error("Cannot find module '"+n+"'")}var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var r=e[n][1][t];return i(r?r:t)},o,o.exports)}return t[n].exports}for(var r="function"==typeof require&&require,s=0;n.length>s;s++)i(n[s]);return i}({underscore:[function(e,t){t.exports=e("LtfbbI")},{}],LtfbbI:[function(e,t,n){(function(){(function(){var e=this,i=e._,r={},s=Array.prototype,a=Object.prototype,o=Function.prototype,l=s.push,c=s.slice,u=s.concat,h=a.toString,p=a.hasOwnProperty,d=s.forEach,f=s.map,m=s.reduce,g=s.reduceRight,v=s.filter,b=s.every,y=s.some,x=s.indexOf,_=s.lastIndexOf,w=Array.isArray,T=Object.keys,k=o.bind,C=function(e){return e instanceof C?e:this instanceof C?(this._wrapped=e,void 0):new C(e)};n!==void 0?(t!==void 0&&t.exports&&(n=t.exports=C),n._=C):e._=C,C.VERSION="1.4.4";var S=C.each=C.forEach=function(e,t,n){if(null!=e)if(d&&e.forEach===d)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(n,e[i],i,e)===r)return}else for(var a in e)if(C.has(e,a)&&t.call(n,e[a],a,e)===r)return};C.map=C.collect=function(e,t,n){var i=[];return null==e?i:f&&e.map===f?e.map(t,n):(S(e,function(e,r,s){i[i.length]=t.call(n,e,r,s)}),i)};var E="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),m&&e.reduce===m)return i&&(t=C.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(S(e,function(e,s,a){r?n=t.call(i,n,e,s,a):(n=e,r=!0)}),!r)throw new TypeError(E);return n},C.reduceRight=C.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),g&&e.reduceRight===g)return i&&(t=C.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var a=C.keys(e);s=a.length}if(S(e,function(o,l,c){l=a?a[--s]:--s,r?n=t.call(i,n,e[l],l,c):(n=e[l],r=!0)}),!r)throw new TypeError(E);return n},C.find=C.detect=function(e,t,n){var i;return A(e,function(e,r,s){return t.call(n,e,r,s)?(i=e,!0):void 0}),i},C.filter=C.select=function(e,t,n){var i=[];return null==e?i:v&&e.filter===v?e.filter(t,n):(S(e,function(e,r,s){t.call(n,e,r,s)&&(i[i.length]=e)}),i)},C.reject=function(e,t,n){return C.filter(e,function(e,i,r){return!t.call(n,e,i,r)},n)},C.every=C.all=function(e,t,n){t||(t=C.identity);var i=!0;return null==e?i:b&&e.every===b?e.every(t,n):(S(e,function(e,s,a){return(i=i&&t.call(n,e,s,a))?void 0:r}),!!i)};var A=C.some=C.any=function(e,t,n){t||(t=C.identity);var i=!1;return null==e?i:y&&e.some===y?e.some(t,n):(S(e,function(e,s,a){return i||(i=t.call(n,e,s,a))?r:void 0}),!!i)};C.contains=C.include=function(e,t){return null==e?!1:x&&e.indexOf===x?-1!=e.indexOf(t):A(e,function(e){return e===t})},C.invoke=function(e,t){var n=c.call(arguments,2),i=C.isFunction(t);return C.map(e,function(e){return(i?t:e[t]).apply(e,n)})},C.pluck=function(e,t){return C.map(e,function(e){return e[t]})},C.where=function(e,t,n){return C.isEmpty(t)?n?null:[]:C[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},C.findWhere=function(e,t){return C.where(e,t,!0)},C.max=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&C.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return S(e,function(e,r,s){var a=t?t.call(n,e,r,s):e;a>=i.computed&&(i={value:e,computed:a})}),i.value},C.min=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&C.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return S(e,function(e,r,s){var a=t?t.call(n,e,r,s):e;i.computed>a&&(i={value:e,computed:a})}),i.value},C.shuffle=function(e){var t,n=0,i=[];return S(e,function(e){t=C.random(n++),i[n-1]=i[t],i[t]=e}),i};var N=function(e){return C.isFunction(e)?e:function(t){return t[e]}};C.sortBy=function(e,t,n){var i=N(t);return C.pluck(C.map(e,function(e,t,r){return{value:e,index:t,criteria:i.call(n,e,t,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index<t.index?-1:1}),"value")};var M=function(e,t,n,i){var r={},s=N(t||C.identity);return S(e,function(t,a){var o=s.call(n,t,a,e);i(r,o,t)}),r};C.groupBy=function(e,t,n){return M(e,t,n,function(e,t,n){(C.has(e,t)?e[t]:e[t]=[]).push(n)})},C.countBy=function(e,t,n){return M(e,t,n,function(e,t){C.has(e,t)||(e[t]=0),e[t]++})},C.sortedIndex=function(e,t,n,i){n=null==n?C.identity:N(n);for(var r=n.call(i,t),s=0,a=e.length;a>s;){var o=s+a>>>1;r>n.call(i,e[o])?s=o+1:a=o}return s},C.toArray=function(e){return e?C.isArray(e)?c.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:c.call(e,0,t)},C.initial=function(e,t,n){return c.call(e,0,e.length-(null==t||n?1:t))},C.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var D=function(e,t,n){return S(e,function(e){C.isArray(e)?t?l.apply(n,e):D(e,t,n):n.push(e)}),n};C.flatten=function(e,t){return D(e,t,[])},C.without=function(e){return C.difference(e,c.call(arguments,1))},C.uniq=C.unique=function(e,t,n,i){C.isFunction(t)&&(i=n,n=t,t=!1);var r=n?C.map(e,n,i):e,s=[],a=[];return S(r,function(n,i){(t?i&&a[a.length-1]===n:C.contains(a,n))||(a.push(n),s.push(e[i]))}),s},C.union=function(){return C.uniq(u.apply(s,arguments))},C.intersection=function(e){var t=c.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.indexOf(t,e)>=0})})},C.difference=function(e){var t=u.apply(s,c.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=c.call(arguments),t=C.max(C.pluck(e,"length")),n=Array(t),i=0;t>i;i++)n[i]=C.pluck(e,""+i);return n},C.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},C.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return i=C.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,r+n):n}if(x&&e.indexOf===x)return e.indexOf(t,n);for(;r>i;i++)if(e[i]===t)return i;return-1},C.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(_&&e.lastIndexOf===_)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var r=i?n:e.length;r--;)if(e[r]===t)return r;return-1},C.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,s=Array(i);i>r;)s[r++]=e,e+=n;return s},C.bind=function(e,t){if(e.bind===k&&k)return k.apply(e,c.call(arguments,1));var n=c.call(arguments,2);return function(){return e.apply(t,n.concat(c.call(arguments)))}},C.partial=function(e){var t=c.call(arguments,1);return function(){return e.apply(this,t.concat(c.call(arguments)))}},C.bindAll=function(e){var t=c.call(arguments,1);return 0===t.length&&(t=C.functions(e)),S(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var n={};return t||(t=C.identity),function(){var i=t.apply(this,arguments);return C.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},C.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(c.call(arguments,1)))},C.throttle=function(e,t){var n,i,r,s,a=0,o=function(){a=new Date,r=null,s=e.apply(n,i)};return function(){var l=new Date,c=t-(l-a);return n=this,i=arguments,0>=c?(clearTimeout(r),r=null,a=l,s=e.apply(n,i)):r||(r=setTimeout(o,c)),s}},C.debounce=function(e,t,n){var i,r;return function(){var s=this,a=arguments,o=function(){i=null,n||(r=e.apply(s,a))},l=n&&!i;return clearTimeout(i),i=setTimeout(o,t),l&&(r=e.apply(s,a)),r}},C.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return function(){var n=[e];return l.apply(n,arguments),t.apply(this,n)}},C.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},C.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},C.keys=T||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)C.has(e,n)&&(t[t.length]=n);return t},C.values=function(e){var t=[];for(var n in e)C.has(e,n)&&t.push(e[n]);return t},C.pairs=function(e){var t=[];for(var n in e)C.has(e,n)&&t.push([n,e[n]]);return t},C.invert=function(e){var t={};for(var n in e)C.has(e,n)&&(t[e[n]]=n);return t},C.functions=C.methods=function(e){var t=[];for(var n in e)C.isFunction(e[n])&&t.push(n);return t.sort()},C.extend=function(e){return S(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},C.pick=function(e){var t={},n=u.apply(s,c.call(arguments,1));return S(n,function(n){n in e&&(t[n]=e[n])}),t},C.omit=function(e){var t={},n=u.apply(s,c.call(arguments,1));for(var i in e)C.contains(n,i)||(t[i]=e[i]);return t},C.defaults=function(e){return S(c.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var $=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var r=h.call(e);if(r!=h.call(t))return!1;switch(r){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return i[s]==t;n.push(e),i.push(t);var a=0,o=!0;if("[object Array]"==r){if(a=e.length,o=a==t.length)for(;a--&&(o=$(e[a],t[a],n,i)););}else{var l=e.constructor,c=t.constructor;if(l!==c&&!(C.isFunction(l)&&l instanceof l&&C.isFunction(c)&&c instanceof c))return!1;for(var u in e)if(C.has(e,u)&&(a++,!(o=C.has(t,u)&&$(e[u],t[u],n,i))))break;if(o){for(u in t)if(C.has(t,u)&&!a--)break;o=!a}}return n.pop(),i.pop(),o};C.isEqual=function(e,t){return $(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=w||function(e){return"[object Array]"==h.call(e)},C.isObject=function(e){return e===Object(e)},S(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return h.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,"callee"))}),C.isFunction=function(e){return"function"==typeof e},C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==h.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return p.call(e,t)},C.noConflict=function(){return e._=i,this},C.identity=function(e){return e},C.times=function(e,t,n){for(var i=Array(e),r=0;e>r;r++)i[r]=t.call(n,r);return i},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};I.unescape=C.invert(I.escape);var P={escape:RegExp("["+C.keys(I.escape).join("")+"]","g"),unescape:RegExp("("+C.keys(I.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(P[e],function(t){return I[e][t]})}}),C.result=function(e,t){if(null==e)return null;var n=e[t];return C.isFunction(n)?n.call(e):n},C.mixin=function(e){S(C.functions(e),function(t){var n=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),z.call(this,n.apply(C,e))}})};var O=0;C.uniqueId=function(e){var t=++O+"";return e?e+t:t},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(e,t,n){var i;n=C.defaults({},n,C.templateSettings);var r=RegExp([(n.escape||L).source,(n.interpolate||L).source,(n.evaluate||L).source].join("|")+"|$","g"),s=0,a="__p+='";e.replace(r,function(t,n,i,r,o){return a+=e.slice(s,o).replace(j,function(e){return"\\"+F[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),s=o+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=Function(n.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return i(t,C);var l=function(e){return i.call(this,e,C)};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l},C.chain=function(e){return C(e).chain()};var z=function(e){return this._chain?C(e).chain():e};C.mixin(C),S(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];C.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],z.call(this,n)}}),S(["concat","join","slice"],function(e){var t=s[e];C.prototype[e]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)})()},{}],backbone:[function(e,t){t.exports=e("UiMksK")},{}],UiMksK:[function(e,t,n){(function(){(function(){var t,i=this,r=i.Backbone;t=n!==void 0?n:i.Backbone={},t.VERSION="0.5.3";var s=i._;s||void 0===e||(s=e("underscore")._);var a=i.jQuery||i.Zepto;t.noConflict=function(){return i.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1,t.Events={bind:function(e,t,n){var i=this._callbacks||(this._callbacks={}),r=i[e]||(i[e]=[]);return r.push([t,n]),this},unbind:function(e,t){var n;if(e){if(n=this._callbacks)if(t){var i=n[e];if(!i)return this;for(var r=0,s=i.length;s>r;r++)if(i[r]&&t===i[r][0]){i[r]=null;break}}else n[e]=[]}else this._callbacks={};return this},trigger:function(e){var t,n,i,r,s,a=2;if(!(n=this._callbacks))return this;for(;a--;)if(i=a?e:"all",t=n[i])for(var o=0,l=t.length;l>o;o++)(r=t[o])?(s=a?Array.prototype.slice.call(arguments,1):arguments,r[0].apply(r[1]||this,s)):(t.splice(o,1),o--,l--);return this}},t.Model=function(e,t){var n;e||(e={}),(n=this.defaults)&&(s.isFunction(n)&&(n=n.call(this)),e=s.extend({},n,e)),this.attributes={},this._escapedAttributes={},this.cid=s.uniqueId("c"),this.set(e,{silent:!0}),this._changed=!1,this._previousAttributes=s.clone(this.attributes),t&&t.collection&&(this.collection=t.collection),this.initialize(e,t)},s.extend(t.Model.prototype,t.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return s.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.attributes[e];return this._escapedAttributes[e]=k(null==n?"":""+n)},has:function(e){return null!=this.attributes[e]},set:function(e,t){if(t||(t={}),!e)return this;e.attributes&&(e=e.attributes);var n=this.attributes,i=this._escapedAttributes;if(!t.silent&&this.validate&&!this._performValidation(e,t))return!1;this.idAttribute in e&&(this.id=e[this.idAttribute]);var r=this._changing;this._changing=!0;for(var a in e){var o=e[a];s.isEqual(n[a],o)||(n[a]=o,delete i[a],this._changed=!0,t.silent||this.trigger("change:"+a,this,o,t))}return r||t.silent||!this._changed||this.change(t),this._changing=!1,this},unset:function(e,t){if(!(e in this.attributes))return this;t||(t={}),this.attributes[e];var n={};return n[e]=void 0,t.silent||!this.validate||this._performValidation(n,t)?(delete this.attributes[e],delete this._escapedAttributes[e],e==this.idAttribute&&delete this.id,this._changed=!0,t.silent||(this.trigger("change:"+e,this,void 0,t),this.change(t)),this):!1},clear:function(e){e||(e={});var t,n=this.attributes,i={};for(t in n)i[t]=void 0;if(!e.silent&&this.validate&&!this._performValidation(i,e))return!1;if(this.attributes={},this._escapedAttributes={},this._changed=!0,!e.silent){for(t in n)this.trigger("change:"+t,this,void 0,e);this.change(e)}return this},fetch:function(e){e||(e={});var n=this,i=e.success;return e.success=function(t,r,s){return n.set(n.parse(t,s),e)?(i&&i(n,t),void 0):!1},e.error=T(e.error,n,e),(this.sync||t.sync).call(this,"read",this,e)},save:function(e,n){if(n||(n={}),e&&!this.set(e,n))return!1;var i=this,r=n.success;n.success=function(e,t,s){return i.set(i.parse(e,s),n)?(r&&r(i,e,s),void 0):!1},n.error=T(n.error,i,n);var s=this.isNew()?"create":"update";return(this.sync||t.sync).call(this,s,this,n)},destroy:function(e){if(e||(e={}),this.isNew())return this.trigger("destroy",this,this.collection,e);var n=this,i=e.success;return e.success=function(t){n.trigger("destroy",n,n.collection,e),i&&i(n,t)},e.error=T(e.error,n,e),(this.sync||t.sync).call(this,"delete",this,e)},url:function(){var e=_(this.collection)||this.urlRoot||w();return this.isNew()?e:e+("/"==e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this)},isNew:function(){return null==this.id},change:function(e){this.trigger("change",this,e),this._previousAttributes=s.clone(this.attributes),this._changed=!1},hasChanged:function(e){return e?this._previousAttributes[e]!=this.attributes[e]:this._changed
},changedAttributes:function(e){e||(e=this.attributes);var t=this._previousAttributes,n=!1;for(var i in e)s.isEqual(t[i],e[i])||(n=n||{},n[i]=e[i]);return n},previous:function(e){return e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},_performValidation:function(e,t){var n=this.validate(e);return n?(t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}}),t.Collection=function(e,t){t||(t={}),t.comparator&&(this.comparator=t.comparator),s.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),e&&this.reset(e,{silent:!0}),this.initialize.apply(this,arguments)},s.extend(t.Collection.prototype,t.Events,{model:t.Model,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(e,t){if(s.isArray(e))for(var n=0,i=e.length;i>n;n++)this._add(e[n],t);else this._add(e,t);return this},remove:function(e,t){if(s.isArray(e))for(var n=0,i=e.length;i>n;n++)this._remove(e[n],t);else this._remove(e,t);return this},get:function(e){return null==e?null:this._byId[null!=e.id?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(e){if(e||(e={}),!this.comparator)throw Error("Cannot sort a set without a comparator");return this.models=this.sortBy(this.comparator),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return s.map(this.models,function(t){return t.get(e)})},reset:function(e,t){return e||(e=[]),t||(t={}),this.each(this._removeReference),this._reset(),this.add(e,{silent:!0}),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e||(e={});var n=this,i=e.success;return e.success=function(t,r,s){n[e.add?"add":"reset"](n.parse(t,s),e),i&&i(n,t)},e.error=T(e.error,n,e),(this.sync||t.sync).call(this,"read",this,e)},create:function(e,t){var n=this;if(t||(t={}),e=this._prepareModel(e,t),!e)return!1;var i=t.success;return t.success=function(e,r,s){n.add(e,t),i&&i(e,r,s)},e.save(null,t),e},parse:function(e){return e},chain:function(){return s(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,n){if(e instanceof t.Model)e.collection||(e.collection=this);else{var i=e;e=new this.model(i,{collection:this}),e.validate&&!e._performValidation(i,n)&&(e=!1)}return e},_add:function(e,t){if(t||(t={}),e=this._prepareModel(e,t),!e)return!1;var n=this.getByCid(e);if(n)throw Error(["Can't add the same model to a set twice",n.id]);this._byId[e.id]=e,this._byCid[e.cid]=e;var i=null!=t.at?t.at:this.comparator?this.sortedIndex(e,this.comparator):this.length;return this.models.splice(i,0,e),e.bind("all",this._onModelEvent),this.length++,t.silent||e.trigger("add",e,this,t),e},_remove:function(e,t){return t||(t={}),(e=this.getByCid(e)||this.get(e))?(delete this._byId[e.id],delete this._byCid[e.cid],this.models.splice(this.indexOf(e),1),this.length--,t.silent||e.trigger("remove",e,this,t),this._removeReference(e),e):null},_removeReference:function(e){this==e.collection&&delete e.collection,e.unbind("all",this._onModelEvent)},_onModelEvent:function(e,t,n,i){("add"!=e&&"remove"!=e||n==this)&&("destroy"==e&&this._remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments))}});var o=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"];s.each(o,function(e){t.Collection.prototype[e]=function(){return s[e].apply(s,[this.models].concat(s.toArray(arguments)))}}),t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var l=/:([\w\d]+)/g,c=/\*([\w\d]+)/g,u=/[-[\]{}()+?.,\\^$|#\s]/g;s.extend(t.Router.prototype,t.Events,{initialize:function(){},route:function(e,n,i){t.history||(t.history=new t.History),s.isRegExp(e)||(e=this._routeToRegExp(e)),t.history.route(e,s.bind(function(t){var r=this._extractParameters(e,t);i.apply(this,r),this.trigger.apply(this,["route:"+n].concat(r))},this))},navigate:function(e,n){t.history.navigate(e,n)},_bindRoutes:function(){if(this.routes){var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,i=e.length;i>n;n++)this.route(e[n][0],e[n][1],this[e[n][1]])}},_routeToRegExp:function(e){return e=e.replace(u,"\\$&").replace(l,"([^/]*)").replace(c,"(.*?)"),RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}}),t.History=function(){this.handlers=[],s.bindAll(this,"checkUrl")};var h=/^#*/,p=/msie [\w.]+/,d=!1;s.extend(t.History.prototype,{interval:50,getFragment:function(e,t){if(null==e)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n),0==e.indexOf(this.options.root)&&(e=e.substr(this.options.root.length))}else e=window.location.hash;return decodeURIComponent(e.replace(h,""))},start:function(e){if(d)throw Error("Backbone.history has already been started");this.options=s.extend({},{root:"/"},this.options,e),this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),n=document.documentMode,i=p.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);i&&(this.iframe=a('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?a(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!i?a(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=t,d=!0;var r=window.location,o=r.pathname==this.options.root;return!this._wantsPushState||this._hasPushState||o?(this._wantsPushState&&this._hasPushState&&o&&r.hash&&(this.fragment=r.hash.replace(h,""),window.history.replaceState({},document.title,r.protocol+"//"+r.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl()):(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0)},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e==this.fragment&&this.iframe&&(e=this.getFragment(this.iframe.location.hash)),e==this.fragment||e==decodeURIComponent(this.fragment)?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(window.location.hash),void 0)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=s.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){var n=(e||"").replace(h,"");if(this.fragment!=n&&this.fragment!=decodeURIComponent(n)){if(this._hasPushState){var i=window.location;0!=n.indexOf(this.options.root)&&(n=this.options.root+n),this.fragment=n,window.history.pushState({},document.title,i.protocol+"//"+i.host+n)}else window.location.hash=this.fragment=n,this.iframe&&n!=this.getFragment(this.iframe.location.hash)&&(this.iframe.document.open().close(),this.iframe.location.hash=n);t&&this.loadUrl(e)}}}),t.View=function(e){this.cid=s.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var f=function(e){return a(e,this.el)},m=/^(\S+)\s*(.*)$/,g=["model","collection","el","id","attributes","className","tagName"];s.extend(t.View.prototype,t.Events,{tagName:"div",$:f,initialize:function(){},render:function(){return this},remove:function(){return a(this.el).remove(),this},make:function(e,t,n){var i=document.createElement(e);return t&&a(i).attr(t),n&&a(i).html(n),i},delegateEvents:function(e){if(e||(e=this.events)){s.isFunction(e)&&(e=e.call(this)),a(this.el).unbind(".delegateEvents"+this.cid);for(var t in e){var n=this[e[t]];if(!n)throw Error('Event "'+e[t]+'" does not exist');var i=t.match(m),r=i[1],o=i[2];n=s.bind(n,this),r+=".delegateEvents"+this.cid,""===o?a(this.el).bind(r,n):a(this.el).delegate(o,r,n)}}},_configure:function(e){this.options&&(e=s.extend({},this.options,e));for(var t=0,n=g.length;n>t;t++){var i=g[t];e[i]&&(this[i]=e[i])}this.options=e},_ensureElement:function(){if(this.el)s.isString(this.el)&&(this.el=a(this.el).get(0));else{var e=this.attributes||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.el=this.make(this.tagName,e)}}});var v=function(e,t){var n=x(this,e,t);return n.extend=this.extend,n};t.Model.extend=t.Collection.extend=t.Router.extend=t.View.extend=v;var b={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};t.sync=function(e,n,i){var r=b[e],o=s.extend({type:r,dataType:"json"},i);return o.url||(o.url=_(n)||w()),o.data||!n||"create"!=e&&"update"!=e||(o.contentType="application/json",o.data=JSON.stringify(n.toJSON())),t.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),t.emulateHTTP&&("PUT"===r||"DELETE"===r)&&(t.emulateJSON&&(o.data._method=r),o.type="POST",o.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r)}),"GET"===o.type||t.emulateJSON||(o.processData=!1),a.ajax(o)};var y=function(){},x=function(e,t,n){var i;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},s.extend(i,e),y.prototype=e.prototype,i.prototype=new y,t&&s.extend(i.prototype,t),n&&s.extend(i,n),i.prototype.constructor=i,i.__super__=e.prototype,i},_=function(e){return e&&e.url?s.isFunction(e.url)?e.url():e.url:null},w=function(){throw Error('A "url" property or function must be specified')},T=function(e,t,n){return function(i){e?e(t,i,n):t.trigger("error",t,i,n)}},k=function(e){return e.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}).call(this)})()},{underscore:"LtfbbI"}],1:[function(e,t){var n=n||{},i=e("underscore");t.exports=n,n.decode=function(e){return i((e.split("+")[1]||"").split("_")).reduce(function(e,t){var r=t,s="0x1;0x1;0x1;0x1";switch(-1!==t.indexOf("-")&&(r=t.substr(0,t.indexOf("-")),s=t.substr(t.indexOf("-")+1)),r){case"bg":if(!/^[0-f]{6}$/.test(s))break;e[r]=s;break;case"scale":if(s=parseInt(s,10),1!==s&&2!==s)break;e[r]=s;break;case"l10n":if(!/^(en|fr|de|es)$/.test(s))break;e[r]=s;break;case"water":case"streets":case"landuse":case"buildings":var a=n.parseTintString(s);if(!a.h)break;e[r]=i(a).defaults({h:[0,1],s:[0,1],l:[0,1],a:[0,1]})}return e},{bg:"",l10n:"",scale:1,landuse:{h:[0,1],s:[0,1],l:[0,1],a:[0,0]},water:{h:[0,1],s:[0,1],l:[0,1],a:[0,0]},buildings:{h:[0,1],s:[0,1],l:[0,1],a:[0,0]},streets:{h:[0,1],s:[0,1],l:[0,1],a:[0,0]}})},n.encode=function(e){var t=i(["bg","l10n","scale","water","streets","landuse","buildings"]).reduce(function(t,i){if(!e[i])return t;var r=e[i];switch(i){case"bg":if(!/^[0-f]{6}$/.test(r))break;t.push(i+"-"+r);break;case"l10n":if(!/^(en|fr|de|es)$/.test(r))break;t.push(i+"-"+r);break;case"scale":if(r=parseInt(r,10),1!==r&&2!==r)break;t.push(i+"-"+r);break;default:if(!r.h)break;t.push(i+"-"+n.hsl2tint(r))}return t},[]).join("_");return t},n.hsl2hex=function(e){for(var t=function(e,t,n){if(!t)return[255*n,255*n,255*n];var i,r,s=function(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(.66666-n):e};return r=.5>=n?n*(t+1):n+t-n*t,i=2*n-r,[255*s(i,r,e+.33333),255*s(i,r,e),255*s(i,r,e-.33333)]}(n.avg(e.h),n.avg(e.s),n.avg(e.l)),i=(t[0]<<16|t[1]<<8|t[2]).toString(16);6>i.length;)i="0"+i;return i},n.hsl2tint=function(e){return i("<%=h[0].toFixed(2)%>x<%=h[1].toFixed(2)%>;<%=s[0].toFixed(2)%>x<%=s[1].toFixed(2)%>;<%=l[0].toFixed(2)%>x<%=l[1].toFixed(2)%>;<%=a[0].toFixed(2)%>x<%=a[1].toFixed(2)%>").template(i(e).chain().reduce(function(e,t,n){return t&&"a"===n?e[n]=1===t.length?[0,t[0]]:t:t&&(e[n]=1===t.length?[t[0],t[0]]:t),e},{}).defaults({h:[0,1],s:[0,1],l:[0,1],a:[0,1]}).value())},n.rgb2hsl=function(e,t,n){e/=255,t/=255,n/=255;var i=Math.max(e,t,n),r=Math.min(e,t,n),s=i-r,a=i+r,o=0,l=0,c=a/2;return s&&(l=c>.5?s/(2-a):s/a,i==e&&i!=t&&(o=(t-n)/s+(n>t?6:0)),i==t&&i!=n&&(o=(n-e)/s+2),i==n&&i!=e&&(o=(e-t)/s+4),o/=6),o=o>1?1:0>o?0:o,l=l>1?1:0>l?0:l,c=c>1?1:0>c?0:c,[o,l,c]},n.parseTintString=function(e){if(!e||!e.length)return{};var t={},i=e.match(/^#?([0-9a-f]{6})$/i);if(i){var r=n.rgb2hsl(parseInt(i[1].substring(0,2),16),parseInt(i[1].substring(2,4),16),parseInt(i[1].substring(4,6),16));t.h=[r[0],r[0]],t.s=[r[1],r[1]];var s,a,o=r[2];o>.5?(s=0,a=2*o):(s=o-(1-o),a=1),t.l=[s,a]}else{var l=e.split(";"),c=function(e){if(e.indexOf("x")>-1){var t=e.split("x");return[parseFloat(t[0]),parseFloat(t[1])]}var n=parseFloat(e);return[n,n]};l.length>0&&(t.h=c(l[0])),l.length>1&&(t.s=c(l[1])),l.length>2&&(t.l=c(l[2])),l.length>3&&(t.a=c(l[3]))}return t},n.tint2hsl=function(e){if(!e)return!1;if(/^[0-9a-f]{6}$/i.test(e)){var t=n.parseTintString(e);return t.l=[n.avg(t.l),n.avg(t.l)],t}return 0>e.indexOf("+")?!1:n.parseTintString(e.split("+").pop())},n.avg=function(e){return i(e).reduce(function(e,t){return e+=t},0)/e.length},n.empty=function(e){return i(n.decode(e)).all(function(e,t){return"bg"===t?""===e:e.h?0>=e.a[0]&&0>=e.a[1]?!0:!1:!0})}},{underscore:"LtfbbI"}],2:[function(e){var t=e("underscore"),n=e("backbone");n.Collection.prototype.initialize=n.Model.prototype.initialize=function(e,n){this.options=this.collection&&this.collection.options?t(this.collection.options).clone():t(n||{}).clone(),this.models&&t(this.models).each(t(function(e){e.options=t(this.options).clone()}).bind(this))}},{underscore:"LtfbbI",backbone:"UiMksK"}],3:[function(e,t){e("underscore");var n=e("backbone"),i=n.Collection.extend({});t.exports=i,i.prototype.url="/api/Statement"},{underscore:"LtfbbI",backbone:"UiMksK"}],4:[function(e,t){e("underscore");var n=e("backbone"),i=n.Model.extend({});t.exports=i,i.prototype.get=function(e){return"account"===e?this.id?this.id.split(".")[0]:"":"handle"===e?this.id?this.id.split(".")[1]:"":this.attributes[e]}},{underscore:"LtfbbI",backbone:"UiMksK"}],5:[function(e,t){var n=e("underscore"),i=e("backbone"),r=i.Model.extend({});t.exports=r,r.prototype.urlRoot="/api/Subscription",r.prototype.get=function(e){return"backend"===e?this.isNew()?"stripe":this.id?this.id.split(".")[0]:"":"handle"===e?this.id?this.id.split(".")[1]:"":this.attributes[e]},r.prototype.validate=function(e){for(var t in e)if(!n(e[t]).isNull()){var i=e[t];switch(t){case"id":var r=i.split(".");if(!n(i).isString()||2!==r.length||!n(["chargify","stripe"]).contains(r[0]))return Error("Invalid subscription id.");break;case"planID":if(!n(i).isString()||!n(n(models.User.plans).keys()).include(i))return Error("Invalid plan.");break;case"cvv":var s=/^[0-9]{3,4}$/;if(!s.test(i))return Error("CVV must be three or four numbers.");break;case"couponCode":var s=/^[_A-Z0-9]+$/;if(!s.test(i))return Error("Invalid coupon code")}}}},{underscore:"LtfbbI",backbone:"UiMksK"}],6:[function(e,t){e("underscore");var n=e("backbone"),i=n.View.extend({});t.exports=i,i.prototype.events={"submit form.loading":"disabled","submit form.profile:not(.loading)":"account","submit form.email:not(.loading)":"account","submit form.contact:not(.loading)":"account","submit form.password:not(.loading)":"password","click a.revoke":"revoke"},i.prototype.disabled=function(){return!1},i.prototype.account=function(e){var t=$(e.currentTarget),n={};$("input[type=text], select, textarea",t).each(function(){n[$(this).attr("name")]=$(this).val()});var i=this.model.set(n,{error:views.Flash.err});return i&&this.model.id?(t.addClass("loading"),this.model.save(n,{success:function(){t.removeClass("loading"),new views.Flash("Account updated successfully")},error:views.Flash.err}),!1):!1},i.prototype.password=function(e){var t=$(e.currentTarget),n={},i=$("input[type=password]",t);i.each(function(){n[$(this).attr("name")]=$(this).val()}),n.password&&(n.passwordConfirm=n.passwordConfirm||"");var r=this.model.set(n,{error:views.Flash.err});return r&&this.model.id?(t.addClass("loading"),this.model.save(n,{success:function(){t.removeClass("loading"),i.val(""),new views.Flash("Password changed.")},error:views.Flash.err}),!1):!1},i.prototype.revoke=function(e){var t=$(e.currentTarget).parents("form"),n=$(e.currentTarget),i=n.attr("href").split("#").pop(),r=this.model.get("oauth");return delete r[i],t.addClass("loading"),this.model.save({oauth:r},{success:function(){t.removeClass("loading"),n.parents("tr").remove(),new views.Flash("Access revoked")},error:views.Flash.err}),!1}},{underscore:"LtfbbI",backbone:"UiMksK"}],7:[function(e,t){var n=e("underscore"),i=e("backbone"),r=i.View.extend({});t.exports=r,r.prototype.events={"submit form.loading":"disabled","submit form:not(.loading)":"password"},r.prototype.disabled=function(){return!1},r.prototype.password=function(e){var t=$(e.currentTarget),i={},r=$("input[type=text], input[type=password], select",t),s=app.user;r.each(function(){i[$(this).attr("name")]=$(this).val()}),i.password&&(i.passwordConfirm=i.passwordConfirm||"");var a=s.set(i,{error:views.Flash.err});return a&&s.id?(t.addClass("loading"),s.save(i,{success:n(function(){window.location="/"}).bind(this),error:views.Flash.err}),!1):!1}},{underscore:"LtfbbI",backbone:"UiMksK"}],8:[function(e,t){var n=e("underscore"),i=e("backbone"),r=i.View.extend({});t.exports=r,r.err=function(e,t){return $(".loading").removeClass("loading"),new r(t)},r.prototype.events={"click a[href=#close]":"close"},r.prototype._ensureElement=function(){this.el=this.el||$("#flash")},r.prototype.initialize=function(e){if(n(this).bindAll("render","close"),this.content="",this.type="message",e.responseText)try{this.content=JSON.parse(e.responseText).message,this.type="error"}catch(t){this.content=e.responseText,this.type="error"}else"error"==e.statusText?(this.content="An unknown error occured.",this.type="error"):e instanceof Error?(this.content=""+e,this.type="error"):"string"==typeof e&&(this.content=e);this.render()},r.prototype.render=function(){return $(this.el).addClass("active"),$(this.el).html(templates.Flash(this)),"message"===this.type&&setTimeout(n(function(){$(this.el).removeClass("active")}).bind(this),5e3),this},r.prototype.close=function(){return $(this.el).removeClass("active"),!1}},{underscore:"LtfbbI",backbone:"UiMksK"}],9:[function(e,t){var n=e("underscore"),i=e("backbone"),r=i.View.extend({});t.exports=r,r.prototype.events={"submit form.loading":"disabled","submit form.login:not(.loading)":"login"},r.prototype.initialize=function(e){this.origin=e.origin,this.success=e.success},r.prototype.disabled=function(){return!1},r.prototype.login=function(e){var t=$(e.currentTarget),i=this.success,r=this.origin;t.addClass("loading");var s={username:$("input[name=username]",t).val(),password:$("input[name=password]",t).val(),remember:$("input[name=remember]",t).is(":checked"),success:i||function(e){analytics.identify(e.id,{name:e.id,email:e.email,plan:e.accountLevel}),r&&"/"!=r||(r="/"+e.id),analytics.track("Logged In",function(){window.location=r}),setTimeout(function(){window.location=r},500)},error:function(e){t.removeClass("loading"),new views.Flash(e)}};if(!n.isUndefined(s.username)&&!n.isUndefined(s.password)){if(!s.username)return t.removeClass("loading"),new views.Flash(Error("Username is required.")),!1;if(!s.password)return t.removeClass("loading"),new views.Flash(Error("Password is required.")),!1}var a="/api/login?_="+$.now();return $.ajax({url:a,type:"POST",contentType:"application/json",processData:!1,data:JSON.stringify(s),dataType:"json",success:s.success,error:s.error}),!1}},{underscore:"LtfbbI",backbone:"UiMksK"}],10:[function(e,t){var n=e("underscore"),i=e("backbone"),r=i.View.extend({});t.exports=r,r.prototype.initialize=function(){n(this).bindAll("hud","attach","update","save","changed","popup","setCenter","spot"),this.model.bind("change:tiles",this.attach),this.model.bind("change:tiles",this.changed),this.model.bind("map:change",this.changed),this.options.markers&&(this.markers=new views.Markers({model:this.options.markers,view:this,el:$(".hud.markers")}));var e=$(".hudlinks",this.el);$(".hud",this.el).scroll(function(){$(this).scrollTop()>0?e.addClass("shadow"):e.removeClass("shadow")}),$(".hudactions a").click(function(){e.removeClass("shadow")}),this.attach()},r.prototype._getCenter3=function(){var e=this.map.getCenter().wrap();return[e.lng,e.lat,this.map.getZoom()]},r.prototype.events={"transitionend div.drawer":"drawerEnd","webkitTransitionEnd div.drawer":"drawerEnd","click a.drawer":"drawer","click .hudlinks a":"hud","change .hud.info .edit input":"update","change .hud.info .edit textarea":"update","keyup .hud.info .edit input":"update","keyup .hud.info .edit textarea":"update","click input.code, textarea.code":"selectInput","click a[href=#setCenter]":"setCenter","click a[href=#save]":"save","click a[href=#signup]":"popup","click a.button[href=#embed]":"popup","click .popup a.close":"popup","click a[href=#center-marker]":"centerMarker","click .presets a.preset":"setPreset","click .tabs a.tab":"tab","keypress .dimension input":"validateNumber","keyup .dimension input":"setSize","click .popup.embed input:not(.width, .height)":"trackPublish","click .popup.embed textarea":"trackPublish","click .popup.embed a.share":"trackPublish"},r.prototype.drawer=function(){return $("body").toggleClass("drawer"),!1},r.prototype.drawerEnd=function(){var e=this.map.getContainer();return this.map.dimensions={x:e.offsetWidth,y:e.offsetHeight},!1},r.prototype.hud=function(e){var t=$(e.currentTarget),n=t.is(".active")?!1:t.attr("href").split("#").pop();return n?(this.$(".hudlinks .active, .hud.active").removeClass("active"),this.$(".hudlinks a[href=#"+n+"], .hud."+n).addClass("active"),!1):!1},r.prototype.attach=function(e){this.map&&(this.mapEdited=!0,e.center=this._getCenter3(),this.map.hashControl.remove(),$(this.map.getContainer()).remove(),$(this.el).prepend(templates.MapClient(this.model.toJSON()))),this.map=app.utils.makeMap(this.model,e),this.map.on("zoomend",this.spot),this.map.on("moveend",this.spot),this.markers&&this.markers.attach(this.map)},r.prototype.centerMarker=function(e){var t,n=$(e.currentTarget).parents(".marker");return this.markers.model.markerLayer.setFilter(function(e){return e.properties.id===n.data("id")&&(t=e),!0}),t&&t.geometry.coordinates[0]&&t.geometry.coordinates[1]&&t.properties["marker-zoom"]&&this.map.setView([t.geometry.coordinates[1],t.geometry.coordinates[0]],t.properties["marker-zoom"]),!1},r.prototype.selectInput=function(e){e.target.select()},r.prototype.changed=function(){return $("body").addClass("unsaved"),this.confirmationAlert(!0),!1},r.prototype.save=function(){return $("body").is(".unsaved")?(this.model.set({created:+new Date}),this.model.save(this.model,{success:n(function(){document.title=this.model.escape("name")+" | MapBox",$(".map-header .name").html(this.model.escape("name")),$(".map-header .description").html(templates.sanitize(this.model.get("description")||"No description")),$("body").removeClass("unsaved"),this.confirmationAlert(!1),this.model.trigger("map:save"),analytics.track("Saved a Map")}).bind(this),error:views.Flash.err}),!1):!1},r.prototype.setCenter=function(){var e=this._getCenter3();return e?(this.$("input[name=lon]").val(e[0]),this.$("input[name=lat]").val(e[1]),this.$("input[name=zoom]").val(e[2]),this.model.set({center:e}),this.model.trigger("map:change"),this.spot("Center set to "+e[1].toFixed(2)+", "+e[0].toFixed(2),"centered"),!1):!1},r.prototype.spot=function(e,t){return this.$(".editor-spotlight").size()||this.$("#map").append("<div class='editor-spotlight'></div>"),e&&n(e).isString()?this.$(".editor-spotlight").attr("class","editor-spotlight active "+(t||"")).html("<label>"+e+"</label>"):this.$(".editor-spotlight").attr("class","editor-spotlight").empty(),!1},r.prototype.update=function(e){var t={},i=$(e.currentTarget),r=i.attr("name"),s=i.val();switch(r){case"name":case"description":t[r]=s,this.model.set(t),this.model.trigger("map:change"),i.toggleClass("empty",""===s||"Untitled map"===s);break;case"lon":case"lat":t.center=this.model.get("center"),t.center["lon"===r?0:1]=parseFloat(s)||0,this.model.set(t),this.model.trigger("map:change");break;case"zoom":t.center=this.model.get("center"),t.center[2]=parseInt(s,10)||0,this.model.set(t),this.model.trigger("map:change");break;case"private":t[r]=$("input#private-1").is(":checked"),this.model.set(t),this.model.trigger("map:change"),t[r]?(this.$('label[for="private-1"]').toggleClass("active",!0),this.$('label[for="private-0"]').toggleClass("active",!1)):(this.$('label[for="private-0"]').toggleClass("active",!0),this.$('label[for="private-1"]').toggleClass("active",!1));break;default:t.options=this.model.get("options"),t.options=i.is(":checked")?t.options.concat([r]):n(t.options).reject(function(e){return e===r}),t.options=n(t.options.concat(["zoombox","attribution"])).uniq(),this.model.set(t);var a=models.Map.combine(n({editing:!0}).defaults(this.model.options),this.model.attributes);this.model.clearTileJSON(),this.model.set(a),this.model.trigger("map:change"),this.$('label[for="'+r+'"]').toggleClass("active",i.is(":checked"))}},r.prototype.popup=function(e){var t=$(e.currentTarget).attr("href").split("#").pop();if(this.$(".popup."+t).toggleClass("active"),"embed"===t&&this.$(".popup."+t).hasClass("active")){var i=n.extend({},this.model.attributes,{center:this._getCenter3()});this.$("#webpage-url").val(this.model.get("webpage")),this.$("a.share.twitter").attr("href",this.model.urlTwitter()),this.$("a.share.facebook").attr("href",this.model.urlFacebook()),this.$("#codeEmbed").val(this.model.urlHTML(i,null,!0)),this.$("#codeStatic").val(this.model.urlStatic(i)),this.$("input.mapid").val(this.model.id),this.$("#htmlTemplate").val(this.$("#htmlTemplate").val().replace(/(mapbox\.auto\('map', ')(.+)('\);)/,"$1"+this.model.id+"$3")),this.$(".dimension input").val(""),analytics.track("Pressed Publish Button")}return!1},r.prototype.setPreset=function(e){var t=this.layers,i=$(e.currentTarget).attr("href").substr(1);return t.presets=models.Map.presets,t.baselayers=views.Layers.baselayers,t.presets[i]?(n(t.baselayers).each(n(function(){this.collection.remove(this.collection.find(function(e){return 0===e.id.indexOf("base.")}),{silent:!0})}).bind(t)),n(t.presets[i].split(",")).each(n(function(e){this.collection.add(new models.Map(n({id:e}).defaults(models.Map.defaultsBase(e))),{silent:!0})}).bind(t)),t.sync(),t.render(),this.$(".presets a.preset").toggleClass("active",!1),this.$('a.preset[href="#'+i+'"]').toggleClass("active",!0),!1):!1},r.prototype.tab=function(e){var t=$(e.currentTarget).attr("href").substr(1);return e.preventDefault(),this.$(".tabs .tab, .panel").toggleClass("active",!1),this.$(".panel."+t).toggleClass("active",!0),this.$(e.currentTarget).toggleClass("active",!0),!1},r.prototype.validateNumber=function(e){var t=[8,9,13,35,36,37,39],n=t.join(",").match(RegExp(e.which));!e.which||e.which>=49&&57>=e.which||48==e.which&&$(e.currentTarget).val()||n||e.preventDefault()},r.prototype.validateStaticSize=function(e){$(e).toggleClass("error",+$(e).val()>640),$("#static-error").toggleClass("error",$(".dimension input").hasClass("error"))},r.prototype.setSize=function(e){$(e.currentTarget).hasClass("width")&&(this.$(".dimension input.width").val($(e.currentTarget).val()),this.validateStaticSize(".dimension input.width.static")),$(e.currentTarget).hasClass("height")&&(this.$(".dimension input.height").val($(e.currentTarget).val()),this.validateStaticSize(".dimension input.height.static"));var t=[parseInt(this.$(".dimension input.width").val(),10)||500,parseInt(this.$(".dimension input.height").val(),10)||300],i=n.extend({},this.model.attributes,{center:this._getCenter3()});this.$("#codeEmbed").val(this.model.urlHTML(i,t,!0)),this.$("#codeStatic").val(this.model.urlStatic(i,t))},r.prototype.confirmationAlert=function(e){var t=function(){return"Your map has unsaved changes."};window.onbeforeunload=e?t:null},r.prototype.trackPublish=function(e){$(e.currentTarget)}},{underscore:"LtfbbI",backbone:"UiMksK"}],11:[function(e,t){e("underscore");var n=e("backbone"),i=n.View.extend({});t.exports=i,i.prototype.events={"click .stripeout":"popup","click a.close":"popup","click .toggle":"toggle","click .delete":"trash"},i.prototype.popup=function(e){var t=$(e.currentTarget).attr("href").split("#").pop();return this.$(".popup."+t).toggleClass("active"),!1},i.prototype.toggle=function(){return $("body").toggleClass("collapsed"),!1},i.prototype.trash=function(e){var t=$(e.currentTarget).is("span")?$(e.currentTarget).parents("a"):$(e.currentTarget),n=t.attr("href").split("/").pop(),i=this.collection.find(function(e){return e.get("handle")===n});return i?(confirm("Remove '"+i.escape("name")+"' permanently?")&&i.destroy({success:function(){t.addClass("deleted")},error:views.Flash.err}),!1):!1}},{underscore:"LtfbbI",backbone:"UiMksK"}],12:[function(e,t){var n=e("underscore"),i=e("backbone"),r=i.View.extend({});t.exports=r,r.prototype.events={"sortupdate ul":"sortUpdate","click a[href=#adding]":"add","click a[href=#metadata]":"edit","click a[href=#done]":"done","click a[href=#remove]":"remove","click a[href=#place]":"startPlace","click a[href=#size]":"size","click a[href=#color]":"color","click a[href=#symbol]":"symbol","keyup .hud.markers .editing input":"update","keyup .hud.markers .editing textarea":"update"},r.prototype.initialize=function(){n(this).bindAll("attach","render","mapRender","add","changed","save","size","color","symbol","update","sortUpdate","remove","startPlace","place","edit"),this.model.bind("change:features",this.changed),this.options.view.model.bind("map:save",this.save)},r.prototype.attach=function(){var e=this.options.view.map;this.selector&&this.selector.remove(e),$(".hudlinks .markers",this.options.view.el).click(n(function(){this.model.get("features")&&this.model.get("features").length||this.add(null,{silent:!0})}).bind(this)),this.render()},r.prototype.render=function(){this.mapRender();var e=["#f63a39","#ff793d","#ffc84e","#71bc4e","#505050","#00bcce","#5b8dd3","#b776bb","#f56098","#748288"];this.$("ul.markers").html(templates.Markers({markers:this.model,edit:!0,symbols:this.model.listIcons(),swatches:e})).sortable({axis:"y",handle:"span.handle",containment:"parent",tolerance:"pointer"}).sortable("refresh")},r.prototype.mapRender=function(){var e=this.options.view.map,t=n(this.model.get("features")).filter(function(e){return e.geometry.coordinates[0]&&e.geometry.coordinates[1]});this.model.markerLayer&&0==this.options.view.mapEdited?this.model.markerLayer.setGeoJSON(t):(this.model.markerLayer=L.mapbox.markerLayer(t).addTo(e),this.options.view.mapEdited=!1)},r.prototype.changed=function(){return $("body").addClass("unsaved"),!1},r.prototype.size=function(e){var t=$(e.currentTarget),n=t.parents(".marker");return $(".size .active",n).removeClass("active"),t.addClass("active"),this.update(e)},r.prototype.color=function(e){var t=$(e.currentTarget),n=t.parents(".marker"),i=$(e.currentTarget).data("color");return $(".color .active",n).removeClass("active"),t.addClass("active"),$("input[name=color]",n).val(i).keyup(),!1},r.prototype.symbol=function(e){var t=$(e.currentTarget),n=t.parents(".marker");return $(".symbols .active",n).removeClass("active"),t.addClass("active"),this.update(e)},r.prototype.update=function(e){var t=$(e.currentTarget).parents(".marker"),i=n.find(this.model.get("features"),function(t){return t.properties.id===$(e.currentTarget).parents(".marker").data("id")}),r=$("input[name=color]",t).val().replace("#","");r=r&&r.match(/^([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)?"#"+r:"",i.geometry.coordinates=[parseFloat($("input[name=lon]",t).val())||0,parseFloat($("input[name=lat]",t).val())||0],n.extend(i.properties,{title:$("input[name=title]",t).val(),description:$("textarea[name=description]",t).val(),"marker-size":$(".edit .size .active",t).data("size"),"marker-color":r,"marker-symbol":$(".edit .symbols .active",t).data("symbol"),"marker-zoom":$("input[name=zoom]",t).val()}),this.model.trigger("change:features",this.model,this.model.get("features"));
var s=templates.MarkerURL({host:this.model.host,style:this.model.getStyle(n({}).extend(i.properties,{"marker-size":"small"}))});return n($(".size a",t)).each(n(function(e){var t=templates.MarkerURL({host:this.model.host,style:this.model.getStyle(n({}).extend(i.properties,{"marker-size":$(e).data("size")}))});$(".marker-icon",e).css("background-image","url("+t+")")}).bind(this)),$(t).removeClass("unplaced"),i.geometry.coordinates[0]&&i.geometry.coordinates[1]||$(t).addClass("unplaced"),$(".marker-title .marker-icon",t).css("background-image","url("+s+")"),$("a.marker-title span.title",t).text(i.properties.title),this.brush={"marker-color":i.properties["marker-color"],"marker-size":i.properties["marker-size"],"marker-symbol":i.properties["marker-symbol"]},this.mapRender(),!1},r.prototype.sortUpdate=function(){var e=n(this.$("ul.markers li")).map(function(e){return $(e).data("id")});this.model.set({features:n(this.model.get("features")).sortBy(function(t){return n(e).indexOf(t.properties.id)})})},r.prototype.add=function(e,t){t=t||{};var i=this.model.generateId(),r={type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:n.extend({id:i,title:"",description:""},this.brush)};return this.model.set({features:[r].concat(this.model.get("features")||[])},t),this.render(),this.$("ul.markers li[data-id="+i+"] a[href=#metadata]").first().click(),!1},r.prototype.remove=function(e){if($(e.currentTarget).is(".confirm")&&!confirm("Delete this marker?"))return!1;var t=$(e.currentTarget).parents(".marker").data("id");return this.model.set({features:n(this.model.get("features")||[]).reject(function(e){return e.properties.id===t})}),this.render(),!1},r.prototype.edit=function(e){var t=$(e.currentTarget).parents(".marker");return t.addClass("editing"),$("input[name=title]",t).focus(),!1},r.prototype.done=function(){return this.$(".editing").removeClass("editing"),!1},r.prototype.save=function(){this.model.save(),this.render()},r.prototype.startPlace=function(e){var t=this.options.view.map,n=$(e.currentTarget).parent(),i=this.place;return n.addClass("editing"),$(this.options.view.el).addClass("adding"),this.options.view.spot("Click to place marker"),t.on("click",function(e){i(e)}),!1},r.prototype.place=function(e){var t=this.options.view.map,n=e.latlng.wrap();if(n&&$(this.options.view.el).hasClass("adding")){$(this.options.view.el).removeClass("adding"),this.options.view.spot();var i=$(".editing");$("input[name=lon]",i).val(n.lng),$("input[name=lat]",i).val(n.lat),$("input[name=zoom]",i).val(t.getZoom()).keyup(),this.model.trigger("change:features",this.model,this.model.get("features")),this.mapRender(),$(i).removeClass("editing"),analytics.track("Placed a Marker")}return!1},r.prototype.brush={"marker-symbol":"","marker-size":"medium","marker-color":"#7e7e7e"}},{underscore:"LtfbbI",backbone:"UiMksK"}],13:[function(e,t){var n=e("underscore"),i=e("backbone"),r=i.View.extend({});t.exports=r,r.prototype.events={"click a.period":"period","click .plan a.button.disabled":"disabled","click .plan a.button:not(.disabled)":"popup","click .payment-info a.button:not(.disabled)":"popup","click .coupon-info a.link":"popup","click .popup a.close":"popup","click a.cancel":"popup","click a.downgrade":"popup","click a.delete":"popup","click a.restore":"popup","click a.toform":"toform","submit form.loading":"disabled","submit form.payment-info:not(.loading)":"savePaymentInfo","submit form.coupon-info:not(.loading)":"saveCouponInfo","submit form.migrate:not(.loading)":"migrate","submit form.cancel:not(.loading)":"cancel","submit form.delete:not(.loading)":"destroy","submit form.restore:not(.loading)":"restore","submit form.signup:not(.loading)":"signup","submit form.login:not(.loading)":"login"},r.prototype.disabled=function(){return!1},r.prototype.popup=function(e){var t=$(e.currentTarget).attr("href").split("#").pop();return this.$(".popup."+t).toggleClass("active"),!1},r.prototype.toform=function(e){var t=$(e.currentTarget).attr("href").split("#").pop();return this.$("form.active").removeClass("active"),this.$("form."+t).toggleClass("active"),!1},r.prototype.initialize=function(e){return e.map&&(this.map=e.map),e.markers&&(this.markers=e.markers),this},r.prototype.migrate=function(e){var t=$(e.currentTarget);t.addClass("loading");var i=this.model.get("accountLevel"),r=this.options.subscription.get("backend"),s=n(function(){if("stripe"===r){var e=n(function(e,r){var s={user:this.options.model.id,planID:t.attr("id"),backend:"stripe"};if(r){if(r.error)return views.Flash.err(null,Error(r.error.message));if(!n(r.card.name).isString()||2>r.card.name.length)return views.Flash.err(null,Error("Invalid cardholder name"));s.token=r.id}$("input[name=couponCode]",t).val()&&(s.couponCode=$("input[name=couponCode]",t).val()),this.options.subscription.save(s,{success:n(function(){var e=n(function(){window.location="/"+this.model.id+"/plans"}).bind(this);"free2"===i?analytics.track("Created a Subscription",{plan:s.planID.replace("2","")},e):e()}).bind(this),error:views.Flash.err})}).bind(this);$(".stripe input[name=cardNumber]",t).val()?Stripe.card.createToken({name:$(".stripe input[name=name]",t).val(),number:$(".stripe input[name=cardNumber]",t).val(),cvc:$(".stripe input[name=cvv]",t).val(),exp_month:$(".stripe select[name=expirationMonth]",t).val(),exp_year:$(".stripe select[name=expirationYear]",t).val()},e):e()}else if("chargify"===r){var s={user:this.options.model.id,state:"active",planID:t.attr("id")};$("input[name=couponCode]",t).val()&&(s.couponCode=$("input[name=couponCode]",t).val()),this.options.subscription.save(s,{success:n(function(){var e=n(function(){window.location="/"+this.model.id+"/plans"}).bind(this);"free2"===i?analytics.track("Created a Subscription",{plan:s.planID.replace("2","")},e):e()}).bind(this),error:function(e){views.Flash.err(e,Error('Unable to update subscription. Please email <a href="mailto:billing@mapbox.com">billing@mapbox.com</a>.'))}})}}).bind(this);return this.model.get("destroyed")?this.model.save({destroyed:null},{success:n(function(){s()}).bind(this),error:views.Flash.err}):s(),!1},r.prototype.savePaymentInfo=function(e){var t=$(e.currentTarget);return t.addClass("loading"),"stripe"===this.options.subscription.get("backend")?Stripe.card.createToken({name:$(".stripe input[name=name]",t).val(),number:$(".stripe input[name=cardNumber]",t).val(),cvc:$(".stripe input[name=cvv]",t).val(),exp_month:$(".stripe select[name=expirationMonth]",t).val(),exp_year:$(".stripe select[name=expirationYear]",t).val()},n(function(e,t){return t.error?views.Flash.err(null,Error(t.error.message)):!n(t.card.name).isString()||2>t.card.name.length?views.Flash.err(null,Error("Invalid cardholder name")):(this.options.subscription.save({token:t.id},{success:n(function(){window.location="/"+this.model.id+"/account/plan"}).bind(this),error:views.Flash.err}),void 0)}).bind(this)):"chargify"===this.options.subscription.get("backend")&&this.options.subscription.save({cardNumber:$("input[name=cardNumber]",t).val(),expirationMonth:$("select[name=expirationMonth]",t).val(),expirationYear:$("select[name=expirationYear]",t).val(),cvv:$("input[name=cvv]",t).val()||null,firstName:$("input[name=firstName]",t).val(),lastName:$("input[name=lastName]",t).val(),name:$("input[name=name]",t).val()},{success:n(function(){window.location="/"+this.model.id+"/account/plan"}).bind(this),error:views.Flash.err}),!1},r.prototype.saveCouponInfo=function(e){var t=$(e.currentTarget);return t.addClass("loading"),this.options.subscription.save({couponCode:$("input[name=couponCode]",t).val()},{success:n(function(){window.location="/"+this.model.id+"/account/plan"}).bind(this),error:views.Flash.err}),!1},r.prototype.cancel=function(e){var t=$(e.currentTarget);return t.addClass("loading"),this.options.subscription.destroy({success:n(function(){analytics.track("Canceled a Subscription",n(function(){window.location="/"+this.model.id+"/plans"}).bind(this))}).bind(this),error:views.Flash.err}),!1},r.prototype.destroy=function(e){var t=$(e.currentTarget);t.addClass("loading");var i=n(function(){this.model.destroy({success:function(){analytics.track("Deleted an Account"),t.removeClass("loading"),$(".popup.active a.close").hide(),$(".predelete").hide(),$(".postdelete").show()},error:views.Flash.err})}).bind(this);return this.options.subscription.id?this.options.subscription.destroy({success:n(function(){analytics.track("Canceled a Subscription"),i()}).bind(this),error:views.Flash.err}):i(),!1},r.prototype.restore=function(e){var t=$(e.currentTarget);return t.addClass("loading"),this.model.save({destroyed:null},{success:n(function(){window.location="/"+this.model.id+"/plans"}).bind(this),error:views.Flash.err}),!1},r.prototype.signup=function(e){var t=$(e.currentTarget);return t.addClass("loading"),this.model.save({id:this.$("input[name=username]").val(),email:this.$("input[name=email]").val(),password:this.$("input[name=password]").val(),passwordConfirm:this.$("input[name=passwordConfirm]").val(),signup:!0},{success:n(function(e){analytics.identify(e.id,{firstName:this.$("input[name=firstName]").val(),lastName:this.$("input[name=lastName]").val(),name:e.get("name")||e.id,email:e.get("email"),plan:"free"}),analytics.track("Created an Account",n(function(){this.saveMap(e.id,n(this.afterLogin).bind(this,e))}).bind(this))}).bind(this),error:function(e,n){t.removeClass("loading"),new views.Flash(n)}}),!1},r.prototype.login=function(e){var t=new views.Login({success:n(function(e){this.saveMap(e.id,n(this.afterLogin).bind(this,e))}).bind(this)});return t.login(e)},r.prototype.saveMap=function(e,t){if(!this.map||!this.markers)return t();var n=this.map,i=this.markers;n.save({id:e+"."+n.get("handle")},{success:function(){i.save({id:e+"."+n.get("handle")},{success:function(){return t()},error:function(e,n){return t(n)}})},error:function(e,n){return t(n)}})},r.prototype.period=function(e){var t=$(e.currentTarget).attr("href").split("#").pop();return $(this.el).attr("class",t),!1},r.prototype.afterLogin=function(e){return this.map?(this.map.fetch({success:function(){$(".popup.signup, #flash").removeClass("active").removeClass("loading"),$('a[href="#signup"]').attr("href","#save"),$("div.auth.anon").removeClass("anon").load("/snippets/user.txt .auth > *"),$("body").removeClass("unsaved").removeClass("tour"),$(".byline a").attr("href","/"+e.id).text(e.name||e.id),window.onbeforeunload=null,$('.publish a[href="#embed"]').click(),window.mapboxHome="/"+e.id}}),void 0):(window.location="/"+e.id,void 0)}},{underscore:"LtfbbI",backbone:"UiMksK"}],14:[function(e,t){var n=e("underscore"),i=e("backbone"),r=i.View.extend({});t.exports=r,r.prototype.events={"submit form.loading":"disabled","submit form:not(.loading)":"reauth"},r.prototype.disabled=function(){return!1},r.prototype.reauth=function(){var e=this.$("form");this.origin,e.addClass("loading");var t={username:this.$("input[name=username]").val(),password:this.$("input[name=password]").val(),success:function(){window.location.reload(!0)},error:function(t){e.removeClass("loading"),new views.Flash(t)}};if(!n.isUndefined(t.username)&&!n.isUndefined(t.password)){if(!t.username)return e.removeClass("loading"),new views.Flash(Error("Username is required.")),!1;if(!t.password)return e.removeClass("loading"),new views.Flash(Error("Password is required.")),!1}var i="/api/login?_="+$.now();return $.ajax({url:i,type:"POST",contentType:"application/json",processData:!1,data:JSON.stringify(t),dataType:"json",success:t.success,error:t.error}),!1}},{underscore:"LtfbbI",backbone:"UiMksK"}],15:[function(e,t){e("underscore");var n=e("backbone"),i=n.View.extend({});t.exports=i,i.prototype.events={"submit form.loading":"disabled","submit form:not(.loading)":"submit"},i.prototype.initialize=function(){-1!==window.location.search.indexOf("invalid-token")&&new views.Flash(Error("Invalid login token. Please enter your email again."))},i.prototype.disabled=function(){return!1},i.prototype.submit=function(){var e=this.$("form");e.addClass("loading");var t={email:this.$("input[name=email]").val(),success:function(t){e.removeClass("loading"),new views.Flash(t.message)},error:function(t){e.removeClass("loading"),new views.Flash(t)}},n="/api/reset-password?_="+$.now();return $.ajax({url:n,type:"POST",contentType:"application/json",processData:!1,data:JSON.stringify(t),dataType:"json",success:t.success,error:t.error}),!1}},{underscore:"LtfbbI",backbone:"UiMksK"}],16:[function(e,t){var n=e("underscore"),i=e("backbone"),r=i.View.extend({});t.exports=r,r.prototype.events={"click .button.disabled":"disabled","click .button:not(.disabled)":"page"},r.prototype.initialize=function(){n(this).bindAll("disabled","page","render"),this.current=this.collection.last(),this.render()},r.prototype.disabled=function(){return!1},r.prototype.page=function(e){var t=$(e.currentTarget).attr("href").split("#").pop(),n="prev"===t?-1:1;return this.current=this.collection.models[this.collection.indexOf(this.current)+n],this.render(),!1},r.prototype.render=function(){var e=this.collection.indexOf(this.current);if($(".statement .payload",this.el).html(""),$(".statement",this.el).addClass("loading"),$(".button.prev",this.el).removeClass("disabled"),$(".button.next",this.el).removeClass("disabled"),-1===e)return $(".button.prev",this.el).addClass("disabled"),$(".statement",this.el).removeClass("loading"),$(".statement",this.el).prepend(templates.ContactBilling()),void 0;$(".contact-billing").remove(),e==this.collection.size()-1&&$(".button.next",this.el).addClass("disabled");var t=this.model.get("subscriptionID")?this.model.get("subscriptionID").split(".")[0]:"chargify";"stripe"===t?this.current.get("lines")?($(".statement",this.el).removeClass("loading"),$(".statement .payload",this.el).html(templates.Invoice({invoice:this.current,user:this.model}))):this.current.fetch({success:n(function(){$(".statement",this.el).removeClass("loading"),$(".statement .payload",this.el).html(templates.Invoice({invoice:this.current,user:this.model}))}).bind(this),error:function(){$(".statement",this.el).removeClass("loading"),$(this.el).append("Failed to load statement.")}}):this.current.get("html_view")?($(".statement",this.el).removeClass("loading"),$(".statement .payload",this.el).html(this.current.get("html_view"))):this.current.fetch({success:n(function(){$(".statement",this.el).removeClass("loading"),$(".statement .payload",this.el).html(this.current.get("html_view")),$(".statement .payload #billing_statement_account_information_section .billing_statement_section_content").append($("<pre>").text(this.model.get("contact")))}).bind(this),error:function(){$(".statement",this.el).removeClass("loading"),$(this.el).append("Failed to load statement.")}})}},{underscore:"LtfbbI",backbone:"UiMksK"}],17:[function(e,t){e("underscore");var n=e("backbone"),i=n.View.extend({});t.exports=i,i.prototype.events={"change select":"select","submit form.loading":"disabled","submit form:not(.loading)":"submit"},i.prototype.select=function(e){var t=$(e.currentTarget).val();return t?this.$(".newmap").attr("disabled",!0):this.$(".newmap").attr("disabled",!1),!1},i.prototype.disabled=function(){return!1},i.prototype.submit=function(){var e,t,n=this.$("select").val();if(n?(e=this.collection.get(n),e&&"tileset"===e.get("_type")||(t=Error("Map "+n+" was not found.")),e.set({status:"pending",url:this.model.get("url"),created:this.model.get("created")})):(n=this.model.get("account")+"."+this.$("input.newmap").val(),t=this.model.validate({id:n})||(this.collection.get(n)?Error("A map with this ID already exists."):!1),e=this.model,e.set({id:n})),t)new views.Flash(t);else{var i="/"+e.get("account")+"/edit/"+e.get("handle")+"?updated="+e.get("created");e.save(e.attributes,{success:function(){analytics.track("Finished an Upload",function(){window.location=i})},error:views.Flash.err})}return!1}},{underscore:"LtfbbI",backbone:"UiMksK"}],18:[function(e,t){e("underscore");var n=e("backbone"),i=n.View.extend({});t.exports=i,i.prototype.initialize=function(e){window.onmessage=function(t){(t.origin==="http://"+e.bucket+".s3.amazonaws.com"||t.origin==="https://"+e.bucket+".s3.amazonaws.com")&&("error"===t.data||(window.location=e.redirect))}}},{underscore:"LtfbbI",backbone:"UiMksK"}],19:[function(require,module,exports){var _=require("underscore"),Backbone=require("backbone"),model=Backbone.Model.extend({}),app=require("../lib/app");module.exports=model,model.prototype.initialize=_(model.prototype.initialize).wrap(function(e,t,n){e.call(this,t,n),!this.options.version&&t.embed&&(this.options.version=parseInt(t.embed.match(/\/v([0-9])\//)[1],10)),!this.options.hosts&&t.embed&&t.tiles&&(this.options.hosts={tileHost:[t.embed.split(/\/v[0-9]\//).shift()],sessHost:_(t.tiles).map(function(e){return e.split(/\/v[0-9]\//).shift()})})}),model.prototype.defaults={api:"mm",center:[0,0,0],options:["share","zoompan","zoomwheel","legend","tooltips","zoombox","attribution","geocoder"],status:"available"},model.defaultsBase=model.prototype.defaultsBase=function(e){var t={minzoom:0,maxzoom:19,bounds:[-180,-85.0511,180,85.0511],center:[0,0,3],attribution:"<a href='http://mapbox.com/about/maps' target='_blank'>Terms & Feedback</a>"};return e.indexOf("-streets")>=0?_({_carmen:!0}).extend(t):t},model.prototype.valid={api:["mm","g"],options:["share","zoompan","zoomwheel","legend","tooltips","zoombox","attribution","bwdetect","geocoder","streetlevel"]},model.prototype.url=function(){return"/api/Map/"+this.id},model.prototype.urlHTML=function(e,t,n){e=e||this.attributes,t=t||[500,300];var i=e.embed+"#"+[e.center[2],e.center[1],e.center[0]].join("/"),r=_("<iframe width='<%=w%>' height='<%=h%>' frameBorder='0' src='<%=src%>'></iframe>").template();return n?r({src:i,w:t[0],h:t[1]}):i},model.prototype.urlStatic=function(e,t){return e=e||this.attributes,t=t||[500,300],(e["static"]||"").replace("{lon}",e.center[0]).replace("{lat}",e.center[1]).replace("{z}",e.center[2]).replace("{w}",t[0]).replace("{h}",t[1])},model.prototype.urlTwitter=function(){return"http://twitter.com/intent/tweet?status="+this.escape("name")+": "+this.get("webpage")+" via @mapbox"},model.prototype.urlFacebook=function(){return"http://www.facebook.com/sharer.php?u="+this.get("webpage")},model.thumb=model.prototype.thumb=function(e){return e=e||this.attributes,e.thumb},model.prototype.get=function(e){return"account"===e?this.id?this.id.split(".")[0]:"":"handle"===e?this.id?this.id.split(".")[1]:"":0===e.indexOf("base.")?_(this.attributes.layers).find(function(t){return 0===t.indexOf(e)}):this.attributes[e]},model.prototype.validate=function(e){for(var t in e)if(!_(e[t]).isNull()&&!_(e[t]).isUndefined()){var n=e[t];switch(t){case"id":if(!_(n).isString())return Error("Invalid id.");if(!(0===n.indexOf("base.")||n.match(/^[\w-]+\.[\w-]+$/)||n.match(/^map_[\d]+$/)&&n.match(/^map-[a-z0-9]{8}$/)))return Error("ID may only contain letters, numbers and dashes.");if(0===n.indexOf("base.")&&!n.match(/^[\w-]+\.[\w-\.+;]+$/))return Error("Invalid id.");break;case"name":if(!_(n).isString())return Error("Invalid name.");break;case"api":if(!_(n).isString()||!_(this.valid.api.concat(["ol"])).include(n))return Error("Invalid api.");break;case"center":if(!_(n).isArray()||3!==n.length)return Error("Invalid center.");break;case"options":if(!_(n).isArray())return Error("Invalid options.");if(n.length&&!_(this.valid.options).intersection(n).length)return Error("Invalid options.");break;case"private":if(!_(n).isBoolean())return Error("Invalid privacy flag.")}}},model.prototype.clearTileJSON=function(e){return e=e||{silent:!0},this.unset("minzoom",e),this.unset("maxzoom",e),this.unset("bounds",e),this.unset("formatter",e),this.unset("legend",e),this.unset("attribution",e),this.unset("tiles",e),this.unset("grids",e),this.unset("data",e),this.unset("geocoder",e),this},model.combine=function(options,parent,children){function formatterToTemplate(formatter){var varname;if(/obj\.\w+/.test(formatter))varname="obj";else{var params=formatter.match(/function[\s]*\([\s]*(\w+),[\s]*(\w+)[\s]*\)/);if(!params)return"";varname=params[2]}for(var args={},a,mbtiles_formatter,r=RegExp(varname+"(\\[\"|\\['|.)(\\w+)","g"),formats=[{format:"teaser"},{format:"full"},{format:"location"}],template_string="";null!==(a=r.exec(formatter));)args[a[2]]="{{{"+a[2]+"}}}";try{eval("mbtiles_formatter ="+formatter)}catch(e){return""}return _(formats).each(function(e){template_string+="{{#__"+e.format+"__}}",template_string+=mbtiles_formatter(e,args)||"",template_string+="{{/__"+e.format+"__}}"}),template_string}function templateToFormatter(e){return function(e,t){if("undefined"!=typeof Mustache){var n={};for(var i in t)n[i]=t[i];return n["__"+e.format+"__"]=!0,Mustache.to_html("TEMPLATE",n)}if(!document.getElementById("mustache-script")){var r=document.createElement("script");r.id="mustache-script",document.body.appendChild(r),r.src="HOST/lib/mustache.js"}}.toString(-1).replace("TEMPLATE",e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")).replace("HOST",hosts.sessHost[0])}var combined=_(parent).clone(),editing=options.editing||!1;if(!options.version)throw Error("no version found");if(!options.hosts)throw Error("no hosts found");var version=options.version,hosts=options.hosts,v="/v"+version+"/";if(combined.scheme=1===version?"tms":"xyz",combined.tilejson=version>2?"2.0.0":"1.0.0",children&&children.length){var outside=function(e,t,n){return t>e||e>n},minzoom=_(children).chain().pluck("minzoom").filter(_.isNumber).min().value(),maxzoom=_(children).chain().pluck("maxzoom").filter(_.isNumber).max().value(),bounds=_(children).chain().pluck("bounds").filter(_.isArray).max(function(e){return(e[2]-e[0])*(e[3]-e[1])}).value()||[-180,-85.0511,180,85.0511],center=_(children).chain().min(function(e){return e.bounds?(e.bounds[2]-e.bounds[0])*(e.bounds[3]-e.bounds[1]):1e20}).value().center||[0,0,0];combined._data=combined._data||_(children).any(function(e){return e._data}),_(children).any(function(e){return e._carmen})?combined._carmen=!0:delete combined._carmen,1/0===minzoom&&(minzoom=0),maxzoom===-1/0&&(maxzoom=22),bounds===-1/0&&(bounds=[-180,-85.0511,180,85.0511]),(editing||!_(combined.minzoom).isNumber()||outside(combined.minzoom,minzoom,maxzoom))&&(combined.minzoom=minzoom),(editing||!_(combined.maxzoom).isNumber()||outside(combined.maxzoom,minzoom,maxzoom))&&(combined.maxzoom=maxzoom),(editing||!_(combined.bounds).isArray()||outside(combined.bounds[0],bounds[0],bounds[2])||outside(combined.bounds[2],bounds[0],bounds[2])||outside(combined.bounds[1],bounds[1],bounds[3])||outside(combined.bounds[3],bounds[1],bounds[3]))&&(combined.bounds=bounds),(!_(combined.center).isArray()||outside(combined.center[2],combined.minzoom,combined.maxzoom)||outside(combined.center[0],combined.bounds[0],combined.bounds[2])||outside(combined.center[1],combined.bounds[1],combined.bounds[3]))&&(combined.center=center),_(["attribution","legend"]).each(function(e){var t=_(children).chain().pluck(e).compact().uniq().reverse().value();t.length?combined[e]=t.join(" "):"composite"===combined._type&&delete combined[e]});var any=!1,taf=_(children).chain().map(function(e){return any=any||e.template||e.formatter,e.template?{formatter:templateToFormatter(e.template),template:e.template}:e.formatter?{formatter:e.formatter,template:formatterToTemplate(e.formatter)}:{}}).reverse().value();any&&3===version?(combined.template=1===taf.length?taf[0].template:_(taf).chain().pluck("template").map(function(e,t){return e?_("{{#__l<%=i%>__}}<%=t%>{{/__l<%=i%>__}}").template({t:e,i:t}):""}).compact().value().join(""),delete combined.formatter):any?(combined.formatter=1===taf.length?taf[0].formatter:_("function(o,d) { return [<%=obj%>][(d.__layer__)](o,d) }").template(_(taf).chain().pluck("formatter").map(function(e){return e?e:function(){}}).value()),delete combined.template):(delete combined.formatter,delete combined.template)}var id=function(e){if(!editing||"tileset"===e._type)return e.id;var t=_(e.layers||[]).clone();return t.join(",")};return-1===combined.id.indexOf(",")?(combined["static"]=hosts.tileHost[0]+v+combined.id+"/{lon},{lat},{z}/{w}x{h}.png",combined.embed=hosts.tileHost[0]+v+combined.id+".html",combined.thumb=hosts.sessHost[0]+v+combined.id+"/thumb.png"):(delete combined["static"],delete combined.embed,delete combined.thumb),(parent.url&&0===parent.url.indexOf("s3://")||parent.basename&&parent.basename.match(/\.mbtiles$/))&&1e10>parent.filesize?combined.download=hosts.tileHost[0]+v+combined.id+".mbtiles":delete combined.download,combined.formatter||combined.template?combined.grids=_(hosts.sessHost).map(function(e){return e+v+id(combined)+"/{z}/{x}/{y}.grid.json"}):delete combined.grids,editing&&delete combined._data,combined._data&&(combined.data=[hosts.sessHost[0]+v+id(combined)+"/markers.geojsonp"]),combined._carmen?combined.geocoder=hosts.sessHost[0]+v+id(combined)+"/geocode/{query}.jsonp":delete combined.geocoder,delete combined.tiles,combined=_(combined).clone(),combined.tiles=_(hosts.sessHost).map(function(e){return e+v+id(combined)+"/{z}/{x}/{y}.png"}),combined.id.indexOf(",")>0&&delete combined.id,model.streetlevel(combined),combined},model.streetlevel=function(e){var t="Â© <a href='http://www.mapquest.com'>MapQuest</a>. Map data Â© <a href='http://www.openstreetmap.org/'>OpenStreetMap</a> and contributors, CC-BY-SA.",n="g"!==e.api&&_(e.options||[]).include("streetlevel");e.attribution=(e.attribution||"").replace(t,""),n&&(e.attribution=t+" "+e.attribution),e.attribution||delete e.attribution,_(["tiles","grids"]).each(function(t){e[t]&&n&&(e[t]=_(e[t]).map(function(e){return-1!==e.indexOf("base.")?e:e.replace("externals.streetlevel,","").replace(/\/v\d\//,"$&externals.streetlevel,")}))})},model.presets={Streets:"base.mapbox-streets+bg-e8e0d8_landuse_water_buildings_streets",Terrain:"base.live-land-tr,base.live-landuse-tr,base.mapbox-streets+bg-e8e0d8_water_buildings_streets",Straightedge:"base.mapbox-streets+bg-ffffff_landuse-0.16x0.16;1.00x1.00;0.68x0.73;0.00x0.43_water_buildings-0.00x0.00;0.00x0.00;0.89x0.91;0.00x1.00_streets-0.58x0.58;0.60x0.60;1.00x0.50;0.00x1.00",Sherbert:"base.mapbox-streets+bg-f5bab2_landuse-0.43x0.43;0.56x0.56;0.00x1.00;0.00x0.79_water-0.86x0.86;0.60x0.60;0.67x0.67;0.00x1.00_buildings-0.92x0.92;0.88x0.88;0.00x0.37;0.00x0.19_streets-0.05x0.05;0.10x0.10;0.00x1.00;0.00x0.73",Citron:"base.mapbox-streets+bg-f4ad43_landuse-0.28x0.28;1.00x1.00;0.00x1.00;0.00x0.42_water-0.06x0.06;0.87x0.87;0.62x0.62;0.00x1.00_buildings-0.12x0.12;1.00x1.00;0.58x1.00;0.00x0.28_streets-0.00x0.00;0.48x0.48;1.00x0.50;0.00x0.74",Lime:"base.mapbox-streets+bg-d9e183_landuse-0.30x0.30;1.00x1.00;0.00x0.27;0.00x0.28_water-0.27x0.27;0.87x0.87;1.00x1.00;0.00x1.00_buildings-0.55x0.55;0.00x0.00;0.00x0.00;0.00x0.16_streets-0.43x0.43;0.24x0.24;0.16x1.00;0.00x1.00",Cucumber:"base.live-land-tr+0.19x0.19;0.44x0.44;0.27x0.99;0.00x1.00,base.live-landuse-tr+0.36x0.36;0.22x0.22;0.00x0.72;0.00x0.20,base.mapbox-streets+bg-e5e9c7_water-0.58x0.58;0.43x0.43;0.63x0.63;0.00x1.00_buildings-0.56x0.56;0.20x0.20;0.00x0.58;0.00x0.30_streets-0.00x0.00;0.00x0.00;0.00x1.00;0.00x0.73","Sun hat":"base.mapbox-streets+bg-ca588f_landuse-0.02x0.02;1.00x1.00;0.68x0.75;0.00x0.44_water-0.17x0.17;0.76x0.76;0.76x0.76;0.00x1.00_buildings-0.16x0.16;0.70x0.70;0.83x0.89;0.00x0.45_streets-0.00x0.00;0.00x0.00;1.00x0.20;0.00x0.80",Windbreaker:"base.mapbox-streets+bg-f8bc62_landuse-0.42x0.42;0.52x0.52;0.00x0.35;0.00x0.30_water-0.49x0.49;0.09x0.09;0.50x0.50;0.00x1.00_buildings-0.00x0.00;0.00x0.00;0.90x1.00;0.00x0.71_streets-0.68x0.68;0.10x0.10;0.15x1.00;0.00x0.80",Melon:"base.mapbox-streets+bg-c2db99_landuse-0.17x0.17;0.66x0.66;0.31x1.00;0.00x0.59_water-0.43x0.43;0.44x0.44;0.63x0.63;0.00x1.00_buildings-0.12x0.12;1.00x1.00;0.00x0.95;0.00x1.00_streets-0.65x0.65;0.00x0.00;0.24x1.00;0.00x1.00",Snowball:"base.mapbox-streets+bg-deecf6_landuse-0.37x0.37;0.43x0.43;0.17x0.93;0.00x0.55_water-0.60x0.60;0.51x0.51;0.65x0.65;0.00x1.00_buildings-0.95x0.95;1.00x1.00;0.00x1.00;0.00x0.26_streets-0.58x0.58;0.39x0.39;0.00x1.00;0.00x1.00",Printshop:"base.mapbox-streets+bg-e06a95_landuse-0.00x0.00;0.70x0.70;0.00x0.90;0.00x0.80_water-0.53x0.53;0.30x0.30;0.60x0.60;0.00x1.00_streets-0.00x0.00;0.00x0.00;1.00x0.00;0.00x0.50",Jumpsuit:"base.mapbox-streets+bg-37382d_water-0.12x0.12;0.75x0.75;0.63x0.63;0.00x1.00_streets-0.00x0.00;0.00x0.00;1.00x0.30;0.00x1.00",Lichen:"base.mapbox-streets+bg-7e8376_landuse-0.25x0.25;0.51x0.51;0.00x0.90;0.00x0.50_water-0.41x0.41;0.39x0.39;0.71x0.71;0.00x1.00_buildings-0.23x0.23;0.10x0.10;0.00x0.80;0.00x1.00_streets-0.00x0.00;0.00x0.00;1.00x0.00;0.00x0.75","Grape soda":"base.live-land-tr+0.62x0.62;0.41x0.41;-0.05x0.71;0.00x1.00,base.live-landuse-tr+0.90x0.90;0.58x0.58;0.24x1.00;0.00x0.37,base.mapbox-streets+bg-607abc_water-0.68x0.68;0.19x0.19;0.26x0.26;0.00x1.00_buildings-0.62x0.62;0.50x0.50;1.00x0.00;0.00x0.17_streets-0.72x0.72;0.15x0.15;1.00x0.38;0.00x0.84","Leisure suit":"base.mapbox-streets+bg-eaf5f5_landuse-0.43x0.43;0.74x0.74;0.00x1.00;0.00x0.24_water-0.56x0.56;0.82x0.82;0.91x0.91;0.00x1.00_streets-0.93x0.93;0.58x0.58;0.41x1.00;0.00x1.00","Map Boy":"base.mapbox-streets+bg-b4bc57_landuse-0.27x0.27;0.25x0.25;0.32x0.40;0.00x0.82_water-0.14x0.14;0.75x0.75;0.70x0.70;0.00x1.00_buildings-0.16x0.16;0.47x0.47;0.60x0.65;0.00x1.00_streets-0.22x0.22;0.30x0.30;1.00x0.30;0.00x0.80",Mayonnaise:"base.mapbox-streets+bg-91d8c3_landuse-0.24x0.24;0.60x0.60;0.00x1.00;0.00x0.75_water-0.18x0.18;0.63x0.63;0.86x0.86;0.00x1.00_streets-0.33x0.33;0.32x0.32;0.16x1.00;0.00x1.00",Doug:"base.mapbox-streets+bg-7378a5_landuse-0.23x0.23;0.40x0.40;0.00x0.86;0.00x0.75_water-0.54x0.54;0.59x0.59;0.69x0.69;0.00x1.00_buildings-0.11x0.11;1.00x1.00;0.00x1.00;0.00x0.46_streets-0.00x0.00;0.00x0.00;1.00x0.00;0.00x0.51",Underworld:"base.mapbox-streets+bg-311a25_landuse-0.93x0.93;1.00x1.00;0.29x0.72;0.00x0.15_water-0.00x0.00;0.75x0.75;0.60x0.60;0.00x1.00_streets-0.00x0.00;0.00x0.00;1.00x0.00;0.00x0.64","Night drive":"base.mapbox-streets+bg-5a584d_landuse-0.22x0.22;0.60x0.60;0.18x0.83;0.00x0.45_water-0.53x0.53;0.09x0.09;0.17x0.17;0.00x1.00_buildings-0.13x0.13;0.06x0.06;0.00x0.26;0.00x0.45_streets-0.16x0.16;0.48x0.48;0.00x0.72;0.00x1.00",Basics:"base.mapbox-streets+bg-ffffff_landuse-0.20x0.20;0.50x0.50;0.00x1.00;0.00x1.00_water-0.52x0.52;0.56x0.56;0.66x0.66;0.00x1.00_buildings-0.13x0.13;0.91x0.91;0.30x1.00;0.00x1.00_streets-0.00x0.00;0.00x0.00;0.00x0.90;0.00x0.80",Light:"base.mapbox-streets+bg-e8e8e8_landuse-0.10x0.10;0.00x0.00;0.76x0.98_water-0.13x0.13;0.00x0.00;0.81x0.81_buildings-0.08x0.08;0.00x0.00;0.11x1.00_streets-0.08x0.08;0.00x0.00;0.11x1.00",Inert:"base.mapbox-streets+bg-666666_landuse-0.00x0.00;0.00x0.00;0.17x0.42;0.00x1.00_water-0.00x0.00;0.00x0.00;0.50x0.50;0.00x1.00_buildings-0.00x0.00;0.00x0.00;0.27x0.51;0.00x1.00_streets-0.08x0.08;0.00x0.00;0.85x0.24;0.00x1.00",Graphite:"base.mapbox-streets+bg-232323_landuse-0.00x0.00;0.00x0.00;0.05x0.15_water-0.00x0.00;0.00x0.00;0.11x0.11_buildings-0.00x0.00;0.00x0.00;0.57x0.09_streets-0.00x0.00;0.00x0.00;0.57x0.09",Stencil:"base.mapbox-streets+water-0.00x0.00;0.00x0.00;0.90x0.90;0.00x1.00_streets",Satellite:"base.live-satellite,base.mapbox-streets+streets-0.00x0.00;0.00x0.00;1.00x0.00;0x0.80",Afternoon:"base.live-satellite+0.00x0.74;0.10x1.00;0.10x1.00;0.00x1.00,base.mapbox-streets+bg-000000_streets-0.00x0.00;0.00x0.00;1.00x0.00;0.00x0.70",Friendly:"base.live-satellite+0.05x0.93;0.00x0.65;0.25x1.00;0.00x1.00,base.mapbox-streets+bg-000000_streets-0.59x0.59;0.36x0.36;0.05x1.00;0.00x0.75","Rainy day":"base.live-satellite+0.25x0.82;0.00x0.40;0.15x1.00;0.00x1.00,base.mapbox-streets+bg-000000_streets-0.59x0.59;0.25x0.25;1.00x0.05;0.00x0.65",Lightsaber:"base.live-satellite+1.00x0.43;1.00x0.00;0.00x1.00;0.00x1.00,base.mapbox-streets+bg-000000_streets-0.00x0.00;0.00x0.00;1.00x0.00;0.00x1.00",Technicolor:"base.live-satellite+0.00x0.67;0.85x0.25;0.75x0.00;0.00x1.00,base.mapbox-streets+bg-6c8aa7_streets",Spycam:"base.live-satellite+0.37x0.81;0.00x0.45;0.00x0.35;0.00x1.00,base.mapbox-streets+bg-6c8aa7_streets-0.50x0.50;0.50x0.50;1.00x0.35;0.00x0.75",Daguerreotype:"base.live-satellite+0.00x0.23;0.00x0.10;0.55x1.00;0.00x1.00,base.mapbox-streets+bg-6c8aa7_streets-0.00x0.00;0.00x0.00;0.00x1.00;0.00x0.75"}
},{underscore:"LtfbbI",backbone:"UiMksK","../lib/app":"1W5Dag"}],20:[function(e,t){var n=e("underscore"),i=e("backbone"),r=i.Collection.extend({});t.exports=r,r.prototype.model=e("./Map"),r.prototype.filters=["_type","status","private"],r.prototype.url=function(){if(this.options.ids)return"/api/Map/"+this.options.ids;var e="/api/Map?account="+this.options.account,t=[];return n(this.filters).each(n(function(e){this.options[e]&&t.push(e+"="+this.options[e])}).bind(this)),t.length&&(e=[e].concat(t).join("&")),e},r.prototype.comparator=function(e){var t="composite"===e.get("_type")?0:1;return t+(e.get("name")||e.get("handle")).toLowerCase()},r.prototype.parse=function(e){return n(e).isArray()||(e=[e]),e}},{underscore:"LtfbbI",backbone:"UiMksK","./Map":19}],21:[function(e,t){var n=e("underscore"),i=e("backbone"),r=i.Model.extend({});e("../lib/app"),t.exports=r,r.prototype.initialize=function(e,t){this.host=t.hosts.sessHost[0],this.options=t},r.prototype.url=function(){return"/api/Markers/"+this.id},r.prototype.save=function(e,t){this.attributes.features=n(this.attributes.features).filter(function(e){return e.properties.title||e.properties.description||e.geometry.coordinates[0]&&e.geometry.coordinates[1]}),i.Model.prototype.save.call(this,e,t)},r.prototype.getStyle=function(e){e=e||{};var t="pin";return t+=e["marker-size"]?"-"+e["marker-size"][0]:"-m",e["marker-symbol"]&&(t+="-"+e["marker-symbol"]),e["marker-color"]&&(t+="+"+e["marker-color"].replace(/#/,"")),t},r.prototype.parseStyle=function(e){var t=/^pin-(s|m|l)(?:-([a-z0-9-]+))?(?:\+([0-9a-fA-F]{6}|[0-9a-fA-F]{3}))?$/,n=e.match(t);return{"marker-size":{s:"small",m:"medium",l:"large"}[n[1]],"marker-symbol":n[2],"marker-color":n[3]?"#"+n[3]:""}},r.prototype.generateId=function(e){e||(e=8);for(var t="abcdefghijklmnopqrstuvwxyz0123456789",n="",i=0;e>i;i++)n+=t[0|36*Math.random()];return n},r.prototype.listIcons=function(){var e=n([{name:"Blank",icon:""}].concat(r.maki));return n(26).times(function(t){e.push({name:String.fromCharCode(65+t),icon:String.fromCharCode(97+t)})}),n(9).times(function(t){e.push({name:"Number"+t+1,icon:""+(t+1)})}),e.map(function(e){return{title:e.name,"marker-symbol":e.icon}})},r.maki=[{name:"Circle stroked",tags:["circle","disc","shape","shapes","geometric","stroke","round"],icon:"circle-stroked"},{name:"Circle solid",tags:["circle","shape","shapes","geometric","round"],icon:"circle"},{name:"Square stroked",tags:["box","square","shapes","shape","geometric","stroke"],icon:"square-stroked"},{name:"Square solid",tags:["box","square","shape","shapes","geometric"],icon:"square"},{name:"Triangle stroked",tags:["triangle","shape","shapes","geometric","stroke"],icon:"triangle-stroked"},{name:"Triangle solid",tags:["triangle","shape","shapes","geometric"],icon:"triangle"},{name:"Star stroked",tags:["star","shape","shapes","geometric","stroke"],icon:"star-stroked"},{name:"Star solid",tags:["star","shape","shapes","geometric"],icon:"star"},{name:"cross",tags:["cross","x","ex","shape","shapes","geometric"],icon:"cross"},{name:"Marker Stroke",tags:["marker","point","shape","shapes","stroke"],icon:"marker-stroked"},{name:"Marker Solid",tags:["marker","point","shape","shapes"],icon:"marker"},{name:"Religious Jewish",tags:["jewish","judaism","hebrew","star","david","religious","religion","temple","synagogue"],icon:"religious-jewish"},{name:"Religious Christian",tags:["christian","cross","religious","religion","church","cathedral"],icon:"religious-christian"},{name:"Religious Muslim",tags:["muslim","crescent","star","religious","religion","mosque"],icon:"religious-muslim"},{name:"Cemetery",tags:["cemetery","graveyard","funeral","religious","religion","memorial"],icon:"cemetery"},{name:"Airport",tags:["airplane","plane","airport","transportation"],icon:"airport"},{name:"Heliport",tags:["heliport","helicopter","transportation"],icon:"heliport"},{name:"Rail",tags:["rail","train","transportation"],icon:"rail"},{name:"Rail Underground",tags:["rail","train","transportation","subway","underground"],icon:"rail-underground"},{name:"Rail Above",tags:["rail","train","transportation"],icon:"rail-above"},{name:"Bus",tags:["vehicle","bus","transportation"],icon:"bus"},{name:"Fuel",tags:["petrol","fuel","gas","transportation","station"],icon:"fuel"},{name:"Parking",tags:["parking","transportation"],icon:"parking"},{name:"Parking Garage",tags:["parking","transportation","garage"],icon:"parking-garage"},{name:"London Underground",tags:["subway","metro","london","public","mass","underground","rail"],icon:"london-underground"},{name:"Airfield",tags:["airfield","airport","plane","landing strip"],icon:"airfield"},{name:"Roadblock",tags:["roadblock","stop","warning","dead end"],icon:"roadblock"},{name:"Ferry",tags:["ship","boat","water","ferry","transportation"],icon:"ferry"},{name:"Harbor",tags:["marine","dock","water","warf"],icon:"harbor"},{name:"Bicycle",tags:["cycling","cycle","transportation"],icon:"bicycle"},{name:"Park",tags:["recreation","park","forest","tree","green","woods","nature"],icon:"park"},{name:"Park 2",tags:["recreation","park","forest","tree","green","woods","nature"],icon:"park2"},{name:"Museum",tags:["recreation","museum","tourism"],icon:"museum"},{name:"Lodging",tags:["lodging","hotel","recreation","motel","tourism"],icon:"lodging"},{name:"Monument",tags:["recreation","statue","monument","tourism"],icon:"monument"},{name:"Zoo",tags:["recreation","zoo","animal","giraffe"],icon:"zoo"},{name:"Garden",tags:["recreation","garden","park","flower","nature"],icon:"garden"},{name:"Campsite",tags:["recreation","campsite","camp","camping","tent","nature"],icon:"campsite"},{name:"Theatre",tags:["recreation","theatre","theater","entertainment","play","performance"],icon:"theatre"},{name:"Art gallery",tags:["art","center","museum","gallery","creative","recreation","entertainment","studio"],icon:"art-gallery"},{name:"Pitch",tags:["pitch","track","athletic","sports","field"],icon:"pitch"},{name:"Soccer",tags:["soccer","sports"],icon:"soccer"},{name:"American Football",tags:["football","sports"],icon:"america-football"},{name:"Tennis",tags:["tennis","court","ball","sports"],icon:"tennis"},{name:"Basketball",tags:["basketball","ball","sports"],icon:"basketball"},{name:"Baseball",tags:["baseball","softball","ball","sports"],icon:"baseball"},{name:"Golf",tags:["golf","sports","course"],icon:"golf"},{name:"Swimming",tags:["swimming","water","swim","sports"],icon:"swimming"},{name:"Cricket",tags:["cricket","sports"],icon:"cricket"},{name:"Skiing",tags:["winter","skiing","ski","sports"],icon:"skiing"},{name:"School",tags:["school","highschool","elementary","children","amenity","middle"],icon:"school"},{name:"College",tags:["college","school","amenity","university"],icon:"college"},{name:"Library",tags:["library","books","amenity"],icon:"library"},{name:"Post",tags:["post","office","amenity","mail","letter"],icon:"post"},{name:"Fire station",tags:["fire","station","amenity"],icon:"fire-station"},{name:"Town hall",tags:["townhall","mayor","building","amenity","government"],icon:"town-hall"},{name:"Police",tags:["police","jail","arrest","amenity","station"],icon:"police"},{name:"Prison",tags:["prison","jail","amenity"],icon:"prison"},{name:"Embassy",tags:["embassy","diplomacy","consulate","amenity","flag"],icon:"embassy"},{name:"Bar 2",tags:["bar","beer","drink","commercial","biergarten"],icon:"beer"},{name:"Restaurant",tags:["restaurant","commercial"],icon:"restaurant"},{name:"Cafe",tags:["cafe","coffee","commercial","tea"],icon:"cafe"},{name:"Shop",tags:["shop","mall","commercial","store"],icon:"shop"},{name:"Fast Food",tags:["food","fast","commercial","burger","drive-through"],icon:"fast-food"},{name:"Bar",tags:["bar","drink","commercial","club","martini","lounge"],icon:"bar"},{name:"Bank",tags:["bank","atm","commercial","money"],icon:"bank"},{name:"Grocery",tags:["food","grocery","commercial","store","market"],icon:"grocery"},{name:"Cinema",tags:["cinema","theatre","film","movie","commercial","theater","entertainment"],icon:"cinema"},{name:"Pharmacy",tags:["pharmacy","drugs","medication","social","medicine","prescription"],icon:"pharmacy"},{name:"Hospital",tags:["hospital","health","medication","social","medicine","medical","clinic"],icon:"hospital"},{name:"Minefield",tags:["minefield","landmine","disaster"],icon:"minefield"},{name:"Industrial",tags:["industrial","factory","building"],icon:"industrial"},{name:"Warehouse",tags:["warehouse","storage","building"],icon:"warehouse"},{name:"Commercial",tags:["commercial","business","building"],icon:"commercial"}]},{underscore:"LtfbbI",backbone:"UiMksK","../lib/app":"1W5Dag"}],22:[function(e,t){var n=e("underscore"),i=e("backbone"),r=i.Model.extend({});e("../lib/app"),t.exports=r,r.prototype.urlRoot="/api/User",r.prototype.isNew=n(r.prototype.isNew).wrap(function(e){return this.get("signup")||e.call(this)}),r.prototype.defaults={group:"",oauth:{}},r.prototype.initialize=function(e,t){t=t||{},this.options=this.collection&&this.collection.options?this.collection.options:t,this.models&&n(this.models).each(n(function(e){e.options=this.options}).bind(this))},r.prototype.parse=function(e){return n(e.group).isArray()&&(e.group=n(e.group).include("admin")?"admin":""),e},r.prototype.validate=function(e){if(!n.isUndefined(e.password)&&!n.isUndefined(e.passwordConfirm)){if(!e.password)return Error("Password is required.");if(!e.passwordConfirm)return Error("Password confirmation is required.");if(e.password!==e.passwordConfirm)return Error("Passwords do not match.")}for(var t in e)if(!n(e[t]).isNull()){var i=e[t];switch(t){case"id":var s=/^[a-z0-9-]+$/;if(!n(i).isString())return Error("Invalid username.");if(2>i.length)return Error("Username must be at least two characters long.");if(!s.test(i))return Error("Username may contain lowercase letters, numbers and dashes only.");var a=["support","help","login","logout","about","tos","terms","privacy","upload","public","api","oauth","base","texture","signup"];if(n.include(a,i))return Error("Username not allowed.");break;case"name":if(!n(i).isString())return Error("Invalid name.");break;case"website":var s=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(!n(i).isString()||i&&!s.test(i))return Error("Invalid website URL.");break;case"description":if(!n(i).isString())return Error("Invalid description.");break;case"chargifySubscriptionID":if(!n(i).isString()&&!n(i).isNumber())return Error("Invalid Chargify subscription ID.");break;case"chargifyCustomerID":if(!n(i).isString()&&!n(i).isNumber())return Error("Invalid Chargify customer ID.");break;case"group":if(!n(i).isString())return Error("Invalid group.");if(!n(["admin","user",""]).include(i))return Error("Invalid group.");break;case"accountLevel":if(!n(i).isString()||!n(n(r.plans).keys()).include(i))return Error("Invalid account level.");break;case"email":var s=/^[A-Z0-9._%+-]+@([A-Z0-9.-]+\.[A-Z]{2,4})$/i;if(!s.test(i))return Error("Email address is invalid.");var o=i.match(s),a=["mailinator.com","login","trashymail.com","maileater.com","spambox.us","spamhole.com","pookmail.com","spam.la"];if(n.include(a,o[1]))return Error("Email address not allowed.");break;case"cvv":if(3>i.length||i.length>4)return Error("CVV must be three or four numbers.");if(!n(parseInt(i)).isNumber())return Error("CVV may only contain numbers.");break;case"couponCode":var s=/^[_A-Z0-9]+$/;if(!s.test(i))return Error("Invalid coupon code")}}},r.plans={staff:{restricted:!0,hidden:!0,name:"Staff",period:"month",price:0,views:1/0,storage:25*Math.pow(1024,3),transfer:1/0,support:"online",watermark:!1,satellite:!0},free2:{name:"Free",handle:"free",period:"month",price:0,views:3e3,storage:50*Math.pow(1024,2),support:"online",watermark:!0,satellite:!1,group:"free"},basic2:{name:"Basic",handle:"basic",period:"month",price:5,overage:.5,views:1e4,storage:250*Math.pow(1024,2),mapviewComponent:"mapViews",support:"online",watermark:!0,satellite:!0},standard2:{name:"Standard",handle:"standard",period:"month",price:49,overage:.5,views:1e5,storage:3*Math.pow(1024,3),mapviewComponent:"mapViews",support:"online",watermark:!1,satellite:!0},plus2:{name:"Plus",handle:"plus",period:"month",price:149,overage:.5,views:3e5,storage:10*Math.pow(1024,3),mapviewComponent:"mapViews",support:"online",watermark:!1,satellite:!0},premium2:{name:"Premium",handle:"premium",period:"month",price:499,overage:.5,views:1e6,storage:30*Math.pow(1024,3),mapviewComponent:"mapViews",support:"dedicated",watermark:!1,satellite:!0,staffhelp:!0,fastresponse:!0},"basic-annual2":{name:"Basic",handle:"basic-annual",period:"year",price:60,overage:.5,views:12e4,storage:250*Math.pow(1024,2),mapviewComponent:"mapViews",support:"online",watermark:!0,satellite:!0},"standard-annual2":{name:"Standard",handle:"standard-annual",period:"year",price:588,overage:.5,views:12e5,storage:3*Math.pow(1024,3),mapviewComponent:"mapViews",support:"online",watermark:!1,satellite:!0},"plus-annual2":{name:"Plus",handle:"plus-annual",period:"year",price:1788,overage:.5,views:36e5,storage:10*Math.pow(1024,3),mapviewComponent:"mapViews",support:"online",watermark:!1,satellite:!0},"premium-annual2":{name:"Premium",handle:"premium-annual",period:"year",price:5988,overage:.5,views:12e6,storage:30*Math.pow(1024,3),mapviewComponent:"mapViews",support:"dedicated",watermark:!1,satellite:!0,staffhelp:!0,fastresponse:!0},foursquare:{hidden:!0,name:"foursquare",handle:"foursquare",period:"month",price:0,views:5e3,storage:100*Math.pow(1024,2),support:"online",watermark:!1,satellite:!1,group:"free"}};for(var s in r.plans)r.plans[s].id=s;r.components={mapViews:{id:"9698",key:"componentMapViews"}},r.prototype.acl=function(){var e={};return"admin"===this.get("group")?{"*":"all"}:this.get("_oauth")?function(e,t,n){return t.destroyed?{}:(n["/api/Map"]="get",n["/api/Map/"+e+".*"]="all",n)}(this.id,this.attributes,e):(this.id&&function(e,t,n){return n["/account"]="get",n["/account/*"]="get",t.destroyed?(n["/"+e+"/account"]="get",n["/"+e+"/account/*"]="get",n["/"+e+"/plans"]="get",n["/api/User/"+e]="put",n["/api/Subscription/"+e]="put",void 0):(n["/"+e+"/account/statements"]="free"===t.plan.group?"":"get",n["/"+e+"/*"]="get",n["/api/Statistics"]="get",n["/api/Statistics/*"]="get",n["/api/Statement/"+e+".*"]="get",n["/api/User/"+e]="all",n["/api/Subscription/"+e]="all",n["/api/Map/"+e+".*"]="all",n["/api/Markers/"+e+".*"]="all",void 0)}(this.id,this.attributes,e),e["/upload/create/*"]="get",e["/assets/*"]="get",e["/v[0-9]/*"]="get",e["/lib/*"]="get",e["/:domain?/download/*"]="get",e["/:domain?/(1|2).0.0/*"]="get",e["/api/Album"]="get",e["/api/Map"]="get",e["/api/Map/*"]="get",e["/api/User"]="post",e["/api/UserInfo/*"]="get",e["/:account?/api/:v?/:m(exists|Album|Tileset|Map|embed.js)"]="get",e["/:account?/api/:v?/:m(exists|Album|Tileset|Map)/*"]="get",e["/"]="get",e["/login"]="get",e["/login/token/:hash"]="get",e["/logout/*"]="get",e["/reset-password"]="get",e["/change-password"]="get",e["/robots.txt"]="get",e["/snippets/*"]="get",e["/signup"]="get",e["/signup/*"]="get",e["/account"]=e["/account"]||"",e["/:account"]="get",e["/:account/map/:id"]="get",e)},r.prototype.access=function(e,t){t=t.toLowerCase();var n=this.acl();for(var i in n)if(this.normalizePath(i,[]).test(e))return"all"===n[i]?!0:-1!==n[i].indexOf(t)?!0:!1;return!1},r.prototype.normalizePath=function(e){return e=e.concat("/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,t,n,i,r,s){return t=t||"",""+(s?"":t)+"(?:"+(s?t:"")+(n||"")+(r||"([^/]+?)")+")"+(s||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.+)"),RegExp("^"+e+"$","i")},r.prototype.isOver=function(){return"free"===this.get("plan").group&&this.get("alerted")&&this.get("alerted")<Date.now()-1728e5}},{underscore:"LtfbbI",backbone:"UiMksK","../lib/app":"1W5Dag"}],23:[function(e,t){function n(e){this.id=e.id,this.name=e.name,this.opts=e.opts||[],this.toggles=e.toggles||[],this.h=e.h||!0,this.s=e.s||!0,this.l=e.l||!0,this.a=e.a||!1}function i(e){this.id=e.id,this.name=e.name,this.opts=e.opts||[],this.toggles=e.toggles||[],this.h=e.h||!0,this.s=e.s||!0,this.l=e.l||!0,this.a=e.a||!1,this.hex=e.hex||""}var r=e("underscore"),s=e("backbone"),a=s.View.extend({}),o=e("../lib/app").models,l=e("../lib/streets-util");t.exports=a,a.prototype.events={"click a[href=#add]":"add","click ul.layers li .purge":"remove","sortupdate ul":"sortUpdate","click a[href=#selecting]":"selecting","click .selector .close":"close","click .modes a":"modes","click a[href=#baseconf]":"baseconf","click a[href=#tint]":"tint","click a.invert":"invert","change .baseconf input":"conf","change .base li[id] input[type=checkbox]":"base","submit form":"selecting"},a.prototype.initialize=function(){r(this).bindAll("add","close","base","render","remove","sortUpdate","sync","selecting"),this.collection.comparator=function(e){return-1===e.id.indexOf("base.")?0:0===e.id.indexOf("base.live-land-")?-4:0===e.id.indexOf("base.live-landuse-")?-3:0===e.id.indexOf("base.live-satellite")?-2:0===e.id.indexOf("base.mapbox-streets")?-1:0},this.collection.bind("add",this.sync),this.collection.bind("remove",this.sync),this.collection.bind("change",this.sync),this.render()},a.prototype.render=function(e){this.$("ul.layers").html(templates.Layers(this.collection)).sortable({axis:"y",handle:"span.thumb",containment:"parent",tolerance:"pointer"}).sortable("refresh");var t="streets";(this.model.get("base.live-land-tr")||this.model.get("base.live-landuse-tr"))&&(t="terrain"),this.model.get("base.live-satellite")&&(t="satellite"),this.$(".base").removeClass("streets terrain satellite").addClass(t),this.$(".modes a.active").removeClass("active"),this.$(".modes a[href=#"+t+"]").addClass("active");var n=this.model;e||r(this.$(".base li[id]")).each(r(function(e){var t=a.baselayers[$(e).attr("id")],i=t.id,s=t.on(n),o=t.tint(n);$(e).attr("class",t.classes(n).join(" ")),$("#"+i+"-on").attr("checked",!!s),r($(".slider",e)).each(r(function(n){var i=$(n).attr("id").split("-").pop(),s=o&&o[i]&&o[i][1]<o[i][0],a="range"===t[i],l=a?[0,1]:["la".indexOf(i)>=0?1:0];o&&o[i]&&(l=a?r(o[i]).chain().clone().sort().value():[r(o[i]).clone().pop()]),$(n).slider({min:0,max:1,step:.01,range:a,values:l,change:this.base}),$(".aspect."+i,e)[a&&s?"addClass":"removeClass"]("invert")}).bind(this)),this.renderValues(e,t)}).bind(this))},a.prototype.renderValues=function(e,t){var n=t.id;r(["h","s","l","a"]).each(function(t){if($(".val-"+t,e).size()){var i=r($("#"+n+"-"+t).slider("values")).map(function(e){return("h"===t?360*e:100*e).toFixed(0)}).join("-");$(".val-"+t,e).text(i)}})},a.prototype.selecting=function(){$(this.el).addClass("selecting"),this.$(".selector").addClass("active");var e=this.$(".selector input").val()||app.user.id,t=e,n=r({account:e,_type:"tileset",status:"available"}).defaults(this.model.options);return app.user.id===e&&(n.private=1,t="My maps"),new o.Maps([],n).fetch({success:r(function(n){this.tilesets=n,this.$(".selector label.album").text(t),this.$(".selector input").val(""),this.$(".maps").html(templates.LayersMaps({owner:app.user.id===e,maps:n,model:this.model}))}).bind(this)}),!1},a.prototype.close=function(){return $(this.el).removeClass("selecting"),this.$(".selector").removeClass("active"),!1},a.prototype.add=function(e){if($(e.currentTarget).is(".selected"))return!1;if(this.collection.length>=15)return alert("Up to 15 layers are allowed on a single map."),!1;var t=$(e.currentTarget),n=t.attr("id").split("-").slice(1).join("-");return this.collection.add(this.tilesets.get(n)),this.render(),t.addClass("selected"),!1},a.prototype.remove=function(e){var t=$(e.currentTarget).parent(),n=t.attr("id").split("-").slice(1).join("-");return this.collection.remove(this.collection.get(n)),this.render(),t.remove(),!1},a.prototype.sortUpdate=function(){var e=r(this.$("ul.layers li")).map(function(e){return $(e).attr("id").split("-").slice(1).join("-")}),t=[];this.collection.each(function(n){var i=r(e).indexOf(n.id);t[i]=n}),this.collection.models=t.concat(this.collection.filter(function(e){return"base"===e.get("account")})).reverse(),this.sync(),this.render()},a.prototype.modes=function(e){if($(e.currentTarget).is(".stripeout"))return!1;var t=$(e.currentTarget).attr("href").split("#").pop(),n=r(function(t,n){return t.size()?(t.attr("checked",n),this.base({originalEvent:e,currentTarget:t.get(0)}),void 0):!1}).bind(this);return n($("#live-land-tr-on"),"terrain"===t),n($("#live-landuse-tr-on"),"terrain"===t),n($("#live-satellite-on"),"satellite"===t),this.render(!0),!1},a.prototype.tint=function(e){var t=$(e.currentTarget),n=t.attr("href").split("#").pop(),i=t.parents("li");return i.hasClass("active")?(i.toggleClass(n),this.base(e),!1):(i.removeClass(n),!1)},a.prototype.baseconf=function(e){return this.$(".base").toggleClass("baseconf"),$(e.currentTarget).toggleClass("active"),!1},a.prototype.invert=function(e){return $(e.currentTarget).parents(".aspect").toggleClass("invert"),this.base(e),!1},a.prototype.conf=function(e){var t=l.decode(this.model.get("base.mapbox-streets")||"");if(!t)return!1;this.collection.remove(this.collection.find(function(e){return 0===e.id.indexOf("base.mapbox-streets")}),{silent:!0});var n=$(e.currentTarget),i=n.attr("name");t[i]=n.is("[type=checkbox]")?n.is(":checked")?n.val():null:t[i]=n.val()||null,this.collection.add(new o.Map(r({id:"base.mapbox-streets+"+l.encode(t)}).defaults(o.Map.defaultsBase("base-mapbox-streets")))),this.render(!0)},a.prototype.base=function(e,t){if(e.originalEvent){var n=$(t?t.handle:e.currentTarget).parents("li"),i=a.baselayers[n.attr("id")],s=n.attr("id"),c=$("#"+s+"-on").is(":checked")?s:"",u=n.hasClass("tint")?r(["h","s","l","a"]).reduce(function(e,t){if(i[t]){var n=$("#"+s+"-"+t).slider("values"),r=$("#"+s+"-"+t).parent().hasClass("invert");e[t]=r?[n[1],n[0]]:n}return e},{}):!1;u=i.hex?u?l.hsl2hex(u):i.hex:u||{h:[0,1],s:[0,1],l:[0,1],a:[0,1]},n[c?"addClass":"removeClass"]("active");var h=l.decode(this.model.get("base.mapbox-streets")||"");s in h?(this.collection.remove(this.collection.find(function(e){return 0===e.id.indexOf("base.mapbox-streets")}),{silent:c}),h[s]=u,c||delete h[s],this.collection.add(new o.Map(r({id:"base.mapbox-streets+"+l.encode(h)}).defaults(o.Map.defaultsBase(c)))),this.renderValues(n,i)):(this.collection.remove(this.collection.filter(function(e){return 0===e.id.indexOf("base."+s)}),{silent:c}),c&&this.collection.add(new o.Map(r({id:"base."+s+(u?"+"+l.hsl2tint(u):"")}).defaults(o.Map.defaultsBase(c)))),this.renderValues(n,i)),this.render(!0)}},a.prototype.sync=function(){var e=this.collection.reduce(function(e,t){return e[t.id.split("+").shift()]=t.id,e},{});e["base.live-land-tr"]&&delete e["base.live-satellite"],e["base.live-landuse-tr"]&&delete e["base.live-satellite"],e["base.live-satellite"]&&delete e["base.live-land-tr"],e["base.live-satellite"]&&delete e["base.live-landuse-tr"],e["base.mapbox-streets"]&&l.empty(e["base.mapbox-streets"])&&delete e["base.mapbox-streets"],e=r(e).toArray(),this.model.set({layers:r(e).toArray()});var t=o.Map.combine(r({editing:!0}).defaults(this.model.options),this.model.attributes,this.collection.toJSON());t.created=+new Date,this.model.clearTileJSON({silent:"tiles"in t}),this.model.set(t)},a.presets=e("../models/Map").presets,a.getPreset=function(e){var t=r({editing:!0}).defaults(e.options),n=o.Map.combine(t,e.attributes);return n.tiles?r(a.presets).chain().map(function(e,t){var i=n.tiles[0];return i.indexOf(e)>0&&"-"!==i.split(e)[1].charAt(0)?t:!1}).compact().value()[0]||"":""},a.languages={"":"Local",en:"English",es:"EspaÃ±ol",fr:"FranÃ§ais"},a.baselayers={streets:new i({id:"streets",name:"Streets",suffixes:["en","2x"],toggles:["en","2x"],l:"range",a:!0}),"live-satellite":new n({id:"live-satellite",name:"Satellite",h:"range",s:"range",l:"range"}),buildings:new i({id:"buildings",name:"Buildings",l:"range",a:!0}),landuse:new i({id:"landuse",name:"Areas",l:"range",a:!0}),"live-landuse-tr":new n({id:"live-landuse-tr",name:"Areas",h:"range",s:"range",l:"range",a:!0}),water:new i({id:"water",name:"Water"}),"live-land-tr":new n({id:"live-land-tr",name:"Terrain",h:"range",s:"range",l:"range"}),bg:new i({id:"bg",name:"Land",hex:"e8e0d8"})},n.prototype.on=function(e){return e.get("base."+this.id)},n.prototype.tint=function(e){var t=e.get("base."+this.id);if(!t)return!1;var n={h:[0,1],s:[0,1],l:[0,1],a:[0,1]},i=t.indexOf("+")>0?l.parseTintString(t.split("+").pop()):n;return r(i).isEqual(n)?!1:i},i.prototype.on=function(e){var t=e.get("base.mapbox-streets");return t?(t=l.decode(t),this.hex?!!t[this.id]&&this.id:t[this.id]&&t[this.id].a[1]&&this.id):!1},i.prototype.tint=function(e){var t=e.get("base.mapbox-streets");if(!t)return!1;t=l.decode(t);var n=this.hex||{h:[0,1],s:[0,1],l:[0,1],a:[0,1]};if(this.hex){if(t[this.id]&&t[this.id]!==n){var i=l.parseTintString(t[this.id]);return i.l=[l.avg(i.l),l.avg(i.l)],i}return!1}return t[this.id]&&!r(t[this.id]).isEqual(n)?t[this.id]:!1},n.prototype.classes=i.prototype.classes=function(e){var t=this.on(e),n=this.tint(e),i=[];return t&&i.push("active"),n&&i.push("tint"),i}},{underscore:"LtfbbI",backbone:"UiMksK","../lib/app":"1W5Dag","../lib/streets-util":1,"../models/Map":19}],app:[function(e,t){t.exports=e("1W5Dag")},{}],"1W5Dag":[function(e,t){var n=e("underscore");e("backbone");var i=e("numeral"),r={};t.exports=r,r.models={},r.models.Base=e("../models/Base"),r.models.Map=e("../models/Map"),r.models.Maps=e("../models/Maps"),r.models.Markers=e("../models/Markers"),r.models.Statements=e("../models/Statements"),r.models.Statistics=e("../models/Statistics"),r.models.Subscription=e("../models/Subscription"),r.models.User=e("../models/User"),r.views={},r.views.Account=e("../views/Account"),r.views.ChangePassword=e("../views/ChangePassword"),r.views.Flash=e("../views/Flash"),r.views.Layers=e("../views/Layers"),r.views.Login=e("../views/Login"),r.views.MapEditor=e("../views/MapEditor"),r.views.Maps=e("../views/Maps"),r.views.Markers=e("../views/Markers"),r.views.Plan=e("../views/Plan"),r.views.Reauth=e("../views/Reauth"),r.views.ResetPassword=e("../views/ResetPassword"),r.views.Statements=e("../views/Statements"),r.views.UploadCreate=e("../views/UploadCreate"),r.views.UploadForm=e("../views/UploadForm"),r.utils={},r.utils.thousands=function(e){e=e||0;var t;for(e=""+parseInt(e,10),t=e.length-3;t>0;t-=3)e=e.substring(0,t)+","+e.substring(t);return e},r.utils.currency=function(e){var t=r.utils.thousands(e/100),n=(e%100).toString(10);return 1==n.length&&(n="0"+n),"$"+t+"."+n},r.utils.requests=function(e,t){return e=e||0,e>=1e6?(e/1e6).toFixed(1)+(t?" million":"m"):e>=1e3?(e/1e3).toFixed(1)+(t?" thousand":"k"):e.toFixed(0)},r.utils.bytes=function(e){return e=e||0,i(e).format("0.0 b")},r.utils.total=function(e,t,i){return n(e).chain().filter(function(e){return t||i?e[0]>=t&&i>=e[0]:!0}).reduce(function(e,t){return e+=t[1]},0).value()},r.utils.avg=function(e,t,n){var i=r.utils.total(e,t,n),s=t&&n?0|(n-t)/864e5:e.length;return 0|i/s},r.utils.max=function(e,t,i){return n(e).chain().filter(function(e){return t||i?e[0]>=t&&i>=e[0]:!0}).pluck("1").tap(function(e){e.push(0)}).max().value()},r.utils.applyFilters=function(e,t,i){return n(i).chain().compact().filter(function(i){return n(e).all(function(e){if("private"===e)return!i[e]||t[e];if(!t[e])return!0;var r=t[e].split(",");return n(r).include(i[e])})}).sortBy(function(e){return("composite"===e._type?"0":"1")+e.id}).value()},r.utils.makeMap=function(e,t){function i(e,t){return n(r.options).include(e)&&(!t||r[t])}t=t||{};var r=e.toJSON();t.center&&t.center[2]<=r.maxzoom&&t.center[2]>=r.minzoom&&t.center[0]>=r.bounds[0]&&t.center[0]<=r.bounds[2]&&t.center[1]>=r.bounds[1]&&t.center[1]<=r.bounds[3]&&(r.center=t.center);var s;if(s=n(r.layers||[]).all(function(e){return 0===e.indexOf("base.")})&&r.tiles&&-1!==r.tiles[0].indexOf("base.")?100:r.created,s&&(r.tiles&&(r.tiles=n(r.tiles).map(function(e){return e+"?updated="+s})),r.grids&&(r.grids=n(r.grids).map(function(e){return e+"?updated="+s})),r.geocoder&&(r.geocoder=r.geocoder+"?updated="+s)),r.tiles){var a=L.mapbox.map("map",r,{minZoom:r.minzoom,maxZoom:r.maxzoom,attributionControl:!0,gridLayer:!!r.grids,gridControl:!!r.grids,scrollWheelZoom:i("zoomwheel"),legendControl:i("legend"),zoomControl:i("zoompan")}).setView([r.center[1],r.center[0]],r.center[2]);return a.hashControl=L.hash(a),r.data&&a.addLayer(L.mapbox.markerLayer(r.data)),i("attribution","attribution")&&a.attributionControl.addAttribution(r.attribution),i("geocoder","geocoder")&&a.addControl(L.mapbox.geocoderControl(r)),i("share")&&a.addControl(L.mapbox.shareControl(r)),a}},r.templates={},r.templates.stringify=function(e,t,n){return JSON.stringify(e,t,n).replace(RegExp("/","g"),"\\/").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},r.templates.toControls=function(e){var t=[];e.legend||t.push("legend"),e.formatter||e.template||t.push("tooltips"),e.attribution||t.push("attribution");var i=n(e.options||[]).difference(t);return e._watermark&&i.push("watermark"),i},r.templates.sanitize=function(t){var n=e("sanitizer").sanitize;return n(t,function(e){return/^(https?:\/\/|data:image)/.test(e)?e:void 0},function(e){return e})},r.templates.strip=function(e){return e.replace(/<(?:.|\n)*?>/gm,"")}},{underscore:"LtfbbI",backbone:"UiMksK","../models/Base":2,"../models/Map":19,"../models/Maps":20,"../models/Markers":21,"../models/Statements":3,"../models/Statistics":4,"../models/Subscription":5,"../models/User":22,"../views/Account":6,"../views/ChangePassword":7,"../views/Flash":8,"../views/Layers":23,"../views/Login":9,"../views/MapEditor":10,"../views/Maps":11,"../views/Markers":12,"../views/Plan":13,"../views/Reauth":14,"../views/ResetPassword":15,"../views/Statements":16,"../views/UploadCreate":17,"../views/UploadForm":18,numeral:24,sanitizer:25}],24:[function(e,t){(function(){(function(){function e(e){this._value=e}function n(e,t,n){var i,r,s=Math.pow(10,t);return r=(Math.round(e*s)/s).toFixed(t),n&&(i=RegExp("0{1,"+n+"}$"),r=r.replace(i,"")),r}function i(e,t){var n;return n=t.indexOf("$")>-1?s(e,t):t.indexOf("%")>-1?a(e,t):t.indexOf(":")>-1?o(e,t):c(e._value,t)}function r(e,t){var n,i,r,s,a,o=t,c=["KB","MB","GB","TB","PB","EB","ZB","YB"],u=!1;if(t.indexOf(":")>-1)e._value=l(t);else if(t===m)e._value=0;else{for("."!==d[f].delimiters.decimal&&(t=t.replace(/\./g,"").replace(d[f].delimiters.decimal,".")),n=RegExp("[^a-zA-Z]"+d[f].abbreviations.thousand+"(?:\\)|(\\"+d[f].currency.symbol+")?(?:\\))?)?$"),i=RegExp("[^a-zA-Z]"+d[f].abbreviations.million+"(?:\\)|(\\"+d[f].currency.symbol+")?(?:\\))?)?$"),r=RegExp("[^a-zA-Z]"+d[f].abbreviations.billion+"(?:\\)|(\\"+d[f].currency.symbol+")?(?:\\))?)?$"),s=RegExp("[^a-zA-Z]"+d[f].abbreviations.trillion+"(?:\\)|(\\"+d[f].currency.symbol+")?(?:\\))?)?$"),a=0;c.length>=a&&!(u=t.indexOf(c[a])>-1?Math.pow(1024,a+1):!1);a++);e._value=(u?u:1)*(o.match(n)?Math.pow(10,3):1)*(o.match(i)?Math.pow(10,6):1)*(o.match(r)?Math.pow(10,9):1)*(o.match(s)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=u?Math.ceil(e._value):e._value}return e._value}function s(e,t){var n,i=1>=t.indexOf("$")?!0:!1,r="";return t.indexOf(" $")>-1?(r=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(r=" ",t=t.replace("$ ","")):t=t.replace("$",""),n=c(e._value,t),i?n.indexOf("(")>-1||n.indexOf("-")>-1?(n=n.split(""),n.splice(1,0,d[f].currency.symbol+r),n=n.join("")):n=d[f].currency.symbol+r+n:n.indexOf(")")>-1?(n=n.split(""),n.splice(-1,0,r+d[f].currency.symbol),n=n.join("")):n=n+r+d[f].currency.symbol,n}function a(e,t){var n,i="",r=100*e._value;return t.indexOf(" %")>-1?(i=" ",t=t.replace(" %","")):t=t.replace("%",""),n=c(r,t),n.indexOf(")")>-1?(n=n.split(""),n.splice(-1,0,i+"%"),n=n.join("")):n=n+i+"%",n}function o(e){var t=Math.floor(e._value/60/60),n=Math.floor((e._value-60*60*t)/60),i=Math.round(e._value-60*60*t-60*n);return t+":"+(10>n?"0"+n:n)+":"+(10>i?"0"+i:i)}function l(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*60*Number(t[0]),n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)
}function c(e,t){var i,r,s,a,o,l,c=!1,u=!1,h=!1,p="",g="",v="",b=Math.abs(e),y=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],x="",_=!1;if(0===e&&null!==m)return m;if(t.indexOf("(")>-1?(c=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(u=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1&&(t.indexOf(" a")>-1?(p=" ",t=t.replace(" a","")):t=t.replace("a",""),b>=Math.pow(10,12)?(p+=d[f].abbreviations.trillion,e/=Math.pow(10,12)):Math.pow(10,12)>b&&b>=Math.pow(10,9)?(p+=d[f].abbreviations.billion,e/=Math.pow(10,9)):Math.pow(10,9)>b&&b>=Math.pow(10,6)?(p+=d[f].abbreviations.million,e/=Math.pow(10,6)):Math.pow(10,6)>b&&b>=Math.pow(10,3)&&(p+=d[f].abbreviations.thousand,e/=Math.pow(10,3))),t.indexOf("b")>-1)for(t.indexOf(" b")>-1?(g=" ",t=t.replace(" b","")):t=t.replace("b",""),s=0;y.length>=s;s++)if(i=Math.pow(1024,s),r=Math.pow(1024,s+1),e>=i&&r>e){g+=y[s],i>0&&(e/=i);break}return t.indexOf("o")>-1&&(t.indexOf(" o")>-1?(v=" ",t=t.replace(" o","")):t=t.replace("o",""),v+=d[f].ordinal(e)),t.indexOf("[.]")>-1&&(h=!0,t=t.replace("[.]",".")),a=(""+e).split(".")[0],o=t.split(".")[1],l=t.indexOf(","),o?(o.indexOf("[")>-1?(o=o.replace("]",""),o=o.split("["),x=n(e,o[0].length+o[1].length,o[1].length)):x=n(e,o.length),a=x.split(".")[0],x=x.split(".")[1].length?d[f].delimiters.decimal+x.split(".")[1]:"",h&&0===Number(x.slice(1))&&(x="")):a=n(e,null),a.indexOf("-")>-1&&(a=a.slice(1),_=!0),l>-1&&(a=(""+a).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+d[f].delimiters.thousands)),0===t.indexOf(".")&&(a=""),(c&&_?"(":"")+(!c&&_?"-":"")+(!_&&u?"+":"")+a+x+(v?v:"")+(p?p:"")+(g?g:"")+(c&&_?")":"")}function u(e,t){d[e]=t}var h,p="1.5.1",d={},f="en",m=null,g="0,0",v=t!==void 0&&t.exports;h=function(t){return h.isNumeral(t)?t=t.value():0===t||t===void 0?t=0:Number(t)||(t=h.fn.unformat(t)),new e(Number(t))},h.version=p,h.isNumeral=function(t){return t instanceof e},h.language=function(e,t){if(!e)return f;if(e&&!t){if(!d[e])throw Error("Unknown language : "+e);f=e}return(t||!d[e])&&u(e,t),h},h.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),h.zeroFormat=function(e){m="string"==typeof e?e:null},h.defaultFormat=function(e){g="string"==typeof e?e:"0.0"},h.fn=e.prototype={clone:function(){return h(this)},format:function(e){return i(this,e?e:g)},unformat:function(e){return r(this,e?e:g)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){return this._value=this._value+Number(e),this},subtract:function(e){return this._value=this._value-Number(e),this},multiply:function(e){return this._value=this._value*Number(e),this},divide:function(e){return this._value=this._value/Number(e),this},difference:function(e){var t=this._value-Number(e);return 0>t&&(t=-t),t}},v&&(t.exports=h),"undefined"==typeof ender&&(this.numeral=h),"function"==typeof define&&define.amd&&define([],function(){return h})}).call(this)})()},{}],25:[function(e,t,n){function i(e,t,n){var i=[];return r.makeHtmlSanitizer(function(e,i){for(var r=0;i.length>r;r+=2){var a,o=i[r],l=i[r+1],c=null;if(a=e+"::"+o,(s.ATTRIBS.hasOwnProperty(a)||(a="*::"+o,s.ATTRIBS.hasOwnProperty(a)))&&(c=s.ATTRIBS[a]),null!==c)switch(c){case s.atype.NONE:break;case s.atype.SCRIPT:case s.atype.STYLE:l=null;break;case s.atype.ID:case s.atype.IDREF:case s.atype.IDREFS:case s.atype.GLOBAL_NAME:case s.atype.LOCAL_NAME:case s.atype.CLASSES:l=n?n(l):l;break;case s.atype.URI:l=t&&t(l);break;case s.atype.URI_FRAGMENT:l&&"#"===l.charAt(0)?(l=n?n(l):l,l&&(l="#"+l)):l=null;break;default:l=null}else l=null;i[r+1]=l}return i})(e,i),i.join("")}var r=function(){function e(e){if(e=l(e),c.hasOwnProperty(e))return c[e];var t=e.match(u);return t?String.fromCharCode(parseInt(t[1],10)):(t=e.match(h))?String.fromCharCode(parseInt(t[1],16)):""}function t(t,n){return e(n)}function n(e){return e.replace(p,"")}function i(e){return e.replace(d,t)}function r(e){return e.replace(f,"&amp;").replace(g,"&lt;").replace(v,"&gt;").replace(b,"&#34;").replace(y,"&#61;")}function a(e){return e.replace(m,"&amp;$1").replace(g,"&lt;").replace(v,"&gt;")}function o(e){return function(t,r){t+="";var o=null,c=!1,u=[],h=void 0,p=void 0,d=void 0;for(e.startDoc&&e.startDoc(r);t;){var f=t.match(c?x:_);if(t=t.substring(f[0].length),c){if(f[1]){var m,g=l(f[1]);if(f[2]){var v=f[3];switch(v.charCodeAt(0)){case 34:case 39:v=v.substring(1,v.length-1)}m=i(n(v))}else m=g;u.push(g,m)}else if(f[4]){if(void 0!==p&&(d?e.startTag&&e.startTag(h,u,r):e.endTag&&e.endTag(h,r)),d&&p&(s.eflags.CDATA|s.eflags.RCDATA)){o=null===o?l(t):o.substring(o.length-t.length);var b=o.indexOf("</"+h);0>b&&(b=t.length),p&s.eflags.CDATA?e.cdata&&e.cdata(t.substring(0,b),r):e.rcdata&&e.rcdata(a(t.substring(0,b)),r),t=t.substring(b)}h=p=d=void 0,u.length=0,c=!1}}else if(f[1])e.pcdata&&e.pcdata(f[0],r);else if(f[3])d=!f[2],c=!0,h=l(f[3]),p=s.ELEMENTS.hasOwnProperty(h)?s.ELEMENTS[h]:void 0;else if(f[4])e.pcdata&&e.pcdata(f[4],r);else if(f[5]&&e.pcdata)switch(f[5]){case"<":e.pcdata("&lt;",r);break;case">":e.pcdata("&gt;",r);break;default:e.pcdata("&amp;",r)}}e.endDoc&&e.endDoc(r)}}var l;l="script"==="SCRIPT".toLowerCase()?function(e){return e.toLowerCase()}:function(e){return e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))})};var c={lt:"<",gt:">",amp:"&",nbsp:"Â ",quot:'"',apos:"'"},u=/^#(\d+)$/,h=/^#x([0-9A-Fa-f]+)$/,p=/\0/g,d=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,f=/&/g,m=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,g=/</g,v=/>/g,b=/\"/g,y=/\=/g,x=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|.[^a-z\\s>]*)","i"),_=RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<!--[\\s\\S]*?-->|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");return{normalizeRCData:a,escapeAttrib:r,unescapeEntities:i,makeSaxParser:o}}();r.makeHtmlSanitizer=function(e){var t,n;return r.makeSaxParser({startDoc:function(){t=[],n=!1},startTag:function(i,a,o){if(!n&&s.ELEMENTS.hasOwnProperty(i)){var l=s.ELEMENTS[i];if(!(l&s.eflags.FOLDABLE)){if(l&s.eflags.UNSAFE)return n=!(l&s.eflags.EMPTY),void 0;if(a=e(i,a)){l&s.eflags.EMPTY||t.push(i),o.push("<",i);for(var c=0,u=a.length;u>c;c+=2){var h=a[c],p=a[c+1];null!==p&&void 0!==p&&o.push(" ",h,'="',r.escapeAttrib(p),'"')}o.push(">")}}}},endTag:function(e,i){if(n)return n=!1,void 0;if(s.ELEMENTS.hasOwnProperty(e)){var r=s.ELEMENTS[e];if(!(r&(s.eflags.UNSAFE|s.eflags.EMPTY|s.eflags.FOLDABLE))){var a;if(r&s.eflags.OPTIONAL_ENDTAG)for(a=t.length;--a>=0;){var o=t[a];if(o===e)break;if(!(s.ELEMENTS[o]&s.eflags.OPTIONAL_ENDTAG))return}else for(a=t.length;--a>=0&&t[a]!==e;);if(0>a)return;for(var l=t.length;--l>a;){var o=t[l];s.ELEMENTS[o]&s.eflags.OPTIONAL_ENDTAG||i.push("</",o,">")}t.length=a,i.push("</",e,">")}}},pcdata:function(e,t){n||t.push(e)},rcdata:function(e,t){n||t.push(e)},cdata:function(e,t){n||t.push(e)},endDoc:function(e){for(var n=t.length;--n>=0;)e.push("</",t[n],">");t.length=0}})};var s={};s.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10},s.ATTRIBS={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0},s.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128},s.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:4,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:84,select:0,small:0,span:0,strike:0,strong:0,style:148,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},n.escape=r.escapeAttrib,n.makeSaxParser=r.makeSaxParser,n.normalizeRCData=r.normalizeRCData,n.sanitize=i,n.unescapeEntities=r.unescapeEntities},{}]},{},["1W5Dag","LtfbbI","UiMksK",1]);var _=require("underscore"),Backbone=require("backbone"),app=require("app");app.templates=app.templates||{},app.templates.ContactBilling=function(obj){var __p="";with(Array.prototype.join,obj||{})__p+='<p class="contact-billing">Please contact <a href="mailto:billing@mapbox.com">billing@mapbox.com</a> to request older statements.</p>\n';return __p},app.templates.Flash=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+="<div class='flash pad3h "+(null==(__t=type)?"":__t)+"'>\n  <a class='icon reverse close' href='#close'>Close</a>\n  "+(null==(__t=content)?"":__t)+"\n</div>\n";return __p},app.templates.Invoice=function(obj){var __t,__p="";with(Array.prototype.join,obj||{}){__p+="";var d=new Date(1e3*invoice.get("period_start"));if(d!=d)throw Error("invoice period_start is "+invoice.get("period_start"));__p+="\n<div class='account-information'>\n    <h2>Account information</h2>\n    <div>\n        <span>"+(null==(__t=user.get("name")||user.id)?"":__t)+"</span>\n    </div>\n    <div>\n        <span>"+(null==(__t=user.get("email"))?"":__t)+"</span>\n    </div>\n    <pre>"+(null==(__t=user.get("contact")||"")?"":__t)+"</pre>\n</div>\n<div class='invoice-summary'>\n    <h2>Statement summary</h2>\n    <div>\n        <span>"+(null==(__t=invoice.id)?"":__t)+"</span>\n    </div>\n    <div>\n        <span>Statement date:</span>\n        <span>"+(null==(__t=new Date(1e3*invoice.get("date")).format("m/d/Y"))?"":__t)+"</span>\n    </div>\n    <div>\n        <span>Billing period:</span>\n        <span>"+(null==(__t=new Date(1e3*invoice.get("period_start")).format("m/d/Y"))?"":__t)+" -\n              "+(null==(__t=new Date(1e3*invoice.get("period_end")).format("m/d/Y"))?"":__t)+"</span>\n    </div>\n    <div>\n        <span>Starting balance:</span>\n        <span>"+(null==(__t=app.utils.currency(invoice.get("starting_balance")))?"":__t)+"</span>\n    </div>\n    <div>\n        <span>New charges:</span>\n        <span>"+(null==(__t=app.utils.currency(invoice.get("total")))?"":__t)+"</span>\n    </div>\n    <div>\n        <span>Amount due:</span>\n        <span>"+(null==(__t=app.utils.currency(invoice.get("amount_due")))?"":__t)+"</span>\n    </div>\n    <div>\n        <span>"+(null==(__t=invoice.get("paid")?"PAID":invoice.get("closed")?"CLOSED":"UNPAID (next attempt on "+new Date(1e3*invoice.get("next_payment_attempt")).format("m/d/Y")+")")?"":__t)+"</span>\n    </div>\n</div>\n<div class='invoice-detail'>\n    <h2>New charges</h2>\n    <table>\n      <thead>\n        <tr>\n          <th>Date</th>\n          <th>Description</th>\n          <th>Charge</th>\n        </tr>\n      </thead>\n      <tbody>\n        ",_(invoice.get("lines").data).each(function(e){var t=e.period||{start:invoice.get("period_start"),end:invoice.get("period_end")};__p+="\n\n        <tr>\n          <td>"+(null==(__t=new Date(1e3*t.start).format("m/d/Y"))?"":__t)+" -\n              "+(null==(__t=new Date(1e3*t.end).format("m/d/Y"))?"":__t)+"</td>\n          <td>\n              "+(null==(__t="subscription"===e.type?"Subscription":"Charge")?"":__t)+":\n              ",__p+="subscription"===e.type?"\n              "+(null==(__t=e.plan.name)?"":__t)+"\n              ":"\n              "+(null==(__t=e.description)?"":__t)+"\n              ",__p+="\n          </td>\n          <td>"+(null==(__t=app.utils.currency(e.amount))?"":__t)+"</td>\n        </tr>\n        "}),__p+="\n        <tr>\n          <td colspan='2'>Total</td>\n          <td>"+(null==(__t=app.utils.currency(invoice.get("total")))?"":__t)+"</td>\n        </tr>\n      </tbody>\n    </table>\n\n</div>\n"}return __p},app.templates.Layers=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+="",_(obj.models).chain().clone().reverse().filter(function(e){return"base"!==e.get("account")}).each(function(e){__p+="\n",__p+=e.get("name")?"\n<li id='layer-"+(null==(__t=e.id)?"":__t)+"'>\n  <span class='thumb' style='background-image: url("+(null==(__t=e.thumb())?"":__t)+")'></span>\n  <span class='label'>"+(null==(__t=e.get("name"))?"":__t)+"</span>\n  <small>from "+(null==(__t=e.get("account"))?"":__t)+"</small>\n  <a class='icon purge' href='#remove'></a>\n</li>\n":"\n<li id='layer-"+(null==(__t=e.id)?"":__t)+"' class='missing'>\n  <span class='thumb'></span>\n  <span class='label'>"+(null==(__t=e.get("id"))?"":__t)+"</span>\n  <small>missing</small>\n  <a class='icon close' href='#remove'></a>\n</li>\n",__p+="\n"}),__p+="\n";return __p},app.templates.LayersMaps=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+="",maps.length||owner?maps.length||(__p+="\n<div class='empty centered'>\n  <p>\n    Design a custom layer in TileMill and upload it<br/>\n    to your MapBox account to add it to this map.\n  </p>\n  <a href='http://tilemill.com/' class='button big' target='_blank'>Download TileMill</a>\n  <a href='http://mapbox.com/tilemill/docs/crashcourse/introduction/' class='button big' target='_blank'>Crash course</a>\n</div>\n"):__p+="\n<div class='empty centered'>No maps found.</div>\n",__p+="\n\n",maps.each(function(e){__p+="\n";var t=_(model.get("layers")).include(e.id)?"selected":"";__p+="\n<a id='add-"+(null==(__t=e.id)?"":__t)+"' class='thumb labeled "+(null==(__t=t)?"":__t)+"' href='#add'>\n  <span small class='thumb-info'>\n    <strong class='name'>"+(null==(__t=e.get("name"))?"":__t)+"</strong>\n    <span class='date'>"+(null==(__t=e.get("created")?new Date(e.get("created")).format("M j Y"):"")?"":__t)+"</span>\n  </span>\n  <span class='thumb-layer' style='background-image: url("+(null==(__t=e.thumb())?"":__t)+")'></span>\n  <span class='buttons'>\n    <span class='button'>\n      ",e.get("private")&&(__p+="<span class='icon reverse lock'></span>"),__p+="\n      "+(null==(__t=e.get("filesize")?app.utils.bytes(e.get("filesize")):"")?"":__t)+"\n    </span>\n  </span>\n</a>\n"}),__p+="\n";return __p},app.templates.MapClient=function(obj){var __t,__p="";with(Array.prototype.join,obj||{}){__p+="";var controls=this.toControls(obj);__p+="<div class='ts-map "+(null==(__t=obj.api||"mm")?"":__t)+" "+(null==(__t=controls.join(" "))?"":__t)+"' id='map'>",_(controls).include("watermark")&&(__p+="<a href='http://mapbox.com' target='_blank' class='mapbox-watermark'>MapBox</a>"),__p+="</div>\n"}return __p},app.templates.MarkerURL=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+=""+(null==(__t=obj.host)?"":__t)+"/v3/marker/"+(null==(__t=obj.style)?"":__t)+".png\n";return __p},app.templates.Markers=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+="",_(markers.get("features")).chain().clone().filter(function(e){return obj.edit?!0:e.geometry.coordinates[0]&&e.geometry.coordinates[1]}).each(_(function(e){var t=e,n=this.MarkerURL({style:markers.getStyle(_.extend({},t.properties,{"marker-size":"small"})),host:markers.host}),i=this.MarkerURL({style:markers.getStyle(_.extend({},t.properties,{"marker-size":"medium"})),host:markers.host}),r=this.MarkerURL({style:markers.getStyle(_.extend({},t.properties,{"marker-size":"large"})),host:markers.host}),s=!(e.geometry.coordinates[0]&&e.geometry.coordinates[1]);__p+="\n<li class='marker "+(null==(__t=s?"unplaced":"")?"":__t)+"' data-id='"+(null==(__t=t.properties.id)?"":__t)+"'>\n  ",obj.edit?(__p+="\n  <div class='clearfix'>\n    <a href='#center-marker' class='marker-title'>\n      <span class='icon markers handle'></span>\n      <span class='title'>"+(null==(__t=this.strip(t.properties.title))?"":_.escape(__t))+"</span>\n    </a>\n    <div class='toggles'>\n      <a class='button toggle' href='#metadata'><span class='icon edit reverse'></span></a\n      ><a class='button toggle confirm' href='#remove'><span class='icon delete reverse'></span></a>\n    </div>\n  </div>\n  <div class='edit simple fillW clearfix'>\n    <ul>\n      <li class='help'>\n        <small>Describe your marker &amp; then place it.</small>\n      </li>\n      <li class='about'>\n        <label>Title</label>\n        <input class='text' name='title' type='text' value='"+(null==(__t=t.properties.title)?"":_.escape(__t))+"' />\n        <label>Tooltip contents</label>\n        <textarea name='description' rows='4'>"+(null==(__t=t.properties.description)?"":_.escape(__t))+"</textarea>\n      </li>\n      <li class='size clearfix'>\n        <a class='"+(null==(__t="small"===t.properties["marker-size"]?"active":"")?"":__t)+"' href='#size' data-size='small'>\n            <span class='marker-icon small' style='background-image: url("+(null==(__t=n)?"":__t)+")'></span>\n        </a\n        ><a class='"+(null==(__t="medium"===t.properties["marker-size"]?"active":"")?"":__t)+"' href='#size' data-size='medium'>\n            <span class='marker-icon medium' style='background-image: url("+(null==(__t=i)?"":__t)+")'></span>\n        </a\n        ><a class='last "+(null==(__t="large"===t.properties["marker-size"]?"active":"")?"":__t)+"' href='#size' data-size='large'>\n            <span class='marker-icon large' style='background-image: url("+(null==(__t=r)?"":__t)+")'></span>\n        </a>\n      </li>\n      <li class='color clearfix'>\n        ",_(swatches).each(function(e){__p+="\n          ";var n=e===t.properties["marker-color"]?"active":"";__p+="\n          <a href='#color' class='swatch "+(null==(__t=n)?"":__t)+"' style='background:"+(null==(__t=e)?"":__t)+"' data-color='"+(null==(__t=e)?"":__t)+"'>\n            <span class='icon reverse save'></span>\n          </a>\n        "}),__p+="\n        <input value='"+(null==(__t=t.properties["marker-color"])?"":__t)+"' maxlength='7' type='text' class='code' name='color' />\n      </li>\n      <li>\n        <ul class='symbols clearfix'>\n          ",_(symbols).chain().clone().pluck("marker-symbol").each(_(function(e){__p+="\n          <li>\n            ",__p+=1===e.length?"\n            <a class='text "+(null==(__t=e==t.properties["marker-symbol"]?"active":"")?"":__t)+"'\n                href='#symbol'\n                data-symbol='"+(null==(__t=e)?"":__t)+"'\n                title='"+(null==(__t=e)?"":__t)+"'>\n                "+(null==(__t=e.toUpperCase())?"":__t)+"\n            </a>\n            ":"\n            <a class='maki "+(null==(__t=e==t.properties["marker-symbol"]?"active":"")?"":__t)+"'\n                href='#symbol'\n                data-symbol='"+(null==(__t=e)?"":__t)+"'\n                title='"+(null==(__t=e)?"":__t)+"'>\n                <span class='marker-icon maki-icon "+(null==(__t=e)?"":__t)+"'></span>\n            </a>\n            ",__p+="\n          </li>\n          "}).bind(this)),__p+="\n        </ul>\n      </li>\n      <li class='clearfix'>\n          <small class='latlon'>\n              <label class='inline' for='lat'>lat:</label>\n              <input type='text' class='code' name='lat' value='"+(null==(__t=t.geometry.coordinates[1])?"":__t)+"'>\n              <label class='inline' for='lon'>lon:</label>\n              <input type='text' class='code' name='lon' value='"+(null==(__t=t.geometry.coordinates[0])?"":__t)+"'>\n          </small>\n      </li>\n      <li class='clearfix'>\n        <p class='actions buttons centered place'>\n          <a class='big button labeled remove' href='#remove'><span class='icon close reverse'></span> Cancel</a\n          ><a class='big button labeled place' href='#place'><span class='icon markers reverse'></span> Add</a>\n        </p>\n        <p class='actions buttons centered move'>\n          <a class='big button labeled move' href='#done'><span class='icon save reverse'></span> Done</a\n          ><a class='big button labeled muted' href='#place'><span class='icon markers reverse'></span> Move</a>\n        </p>\n        <input type='hidden' name='zoom' value='"+(null==(__t=t.properties["marker-zoom"])?"":__t)+"' />\n      </li>\n    </ul>\n  </div>\n  "):__p+="\n    <a href='#center-marker' class='marker-title'>\n      <span class='icon markers handle'></span>\n      <span class='title'>"+(null==(__t=this.strip(t.properties.title))?"":_.escape(__t))+"</span>\n    </a>\n    <a class='button toggle' href='#metadata'>edit</a>\n  ",__p+="\n</li>\n"}).bind(this)),__p+="\n";return __p},app.templates.Snippet=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+="",user&&user.id&&(__p+="\nwindow.mapboxHome = "+(null==(__t=JSON.stringify(baseurl+"/"+user.id))?"":__t)+";\n"),__p+="\ndocument.write("+(null==(__t=JSON.stringify(data))?"":__t)+");\n";return __p},$.ajaxSetup({headers:{"X-CSRF-Token":"76321cde599be2da"}});var models=app.models,views=app.views,templates=app.templates;