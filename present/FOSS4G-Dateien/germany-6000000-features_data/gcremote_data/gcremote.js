(function(){var c,b,a;a=document.location.search.match(/restUrl=([^&]+)/)[1];b={ping:function(d,e){c.pingback(document.location,d,$.now(),e)},getJSON:function(e,g,f,d){$.getJSON(e,g).then(f,d)},rest:function(d,k,n,h,g,j,m,f){var e,i;d=d.toUpperCase();h=h||{};if(typeof j==="function"){f=m;m=j;j=null}if(d!=="GET"){if(n.indexOf("?")>-1){n+="&"}else{n+="?"}if(g||h.oauth_token){n+="oauth_token="+g||h.oauth_token;delete h.oauth_token}if(j||h.api_key){n+="api_key="+j||h.api_key;delete h.api_key}if(d==="DELETE"){i=[n];if(typeof h==="string"){try{h=JSON.parse(h)}catch(l){console.log(l)}}if($.isArray(h)||$.isPlainObject(h)){for(e in h){if(h.hasOwnProperty(e)){i.push(e+"="+h[e])}}}else{i.push(h)}if(i.length>1){n=i.join("&")}h=null}}$.ajax({url:a+n,type:d,cache:false,dataType:"json",accepts:"application/json",contentType:k||"application/x-www-form-urlencoded",data:h}).success(function(q,o,p){m([q,p.getResponseHeader("location")])}).error(function(s,p,r){var o,q,t;if(s.responseText){o=s.responseText.match(/<code>(.*)<\/code><msg>(.*)<\/msg>/i);q=o&&o[1];t=o&&o[2]}f([s.status,p,r,q,t])})},restGet:function(e,g,f,d){$.ajax({url:a+e,type:"GET",cache:false,dataType:"json",data:g}).then(f,d)},restPost:function(e,g,f,d){$.ajax({url:a+e,type:"POST",cache:false,dataType:"json",data:g}).then(f,d)},restPut:function(e,g,f,d){$.ajax({url:a+e,type:"PUT",cache:false,dataType:"json",data:g}).then(f,d)},restDelete:function(e,g,f,d){$.ajax({url:a+e,type:"DELETE",cache:false,dataType:"json",data:g}).then(f,d)},execute:function(g,d){var f,e;if(b[g]){f=b[g];e=b}else{if(window[g]){f=window[g];e=window}}if(f&&f.apply){f.apply(e,d)}}};c=new easyXDM.Rpc({},{local:b,remote:{restUrl:{},pingback:{}}})})();